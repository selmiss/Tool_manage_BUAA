"use strict";(self["webpackChunktoolmanagement"]=self["webpackChunktoolmanagement"]||[]).push([[472],{4099:function(e,t,l){l.d(t,{A:function(){return g}});var o=l(285),a=l(9132);const i={class:"x-head"},s={class:"place-content-center",style:{"line-height":"6vh",margin:"0 4vh 0 0"}},r={style:{color:"white"}};function n(e,t,l,n,d,u){const c=(0,o.g2)("el-image"),p=(0,o.g2)("el-icon"),g=(0,o.g2)("el-dropdown-item"),m=(0,o.g2)("el-dropdown-menu"),h=(0,o.g2)("el-dropdown");return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.bF)(c,{onClick:u.toMain,style:{cursor:"pointer",height:"60px","margin-left":"10px","margin-top":"0.5%"},src:d.headerLogo},null,8,["onClick","src"]),t[3]||(t[3]=(0,o.Lk)("div",{style:{margin:"0 auto"}},null,-1)),(0,o.Lk)("div",s,[(0,o.bF)(h,null,{dropdown:(0,o.k6)((()=>[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.bF)(g,null,{default:(0,o.k6)((()=>[(0,o.bF)(p,{class:"el-icon-edit"}),(0,o.Lk)("span",{onClick:t[0]||(t[0]=(...e)=>u.changePwd&&u.changePwd(...e)),style:{cursor:"pointer"}},"修改密码")])),_:1}),(0,o.bF)(g,null,{default:(0,o.k6)((()=>[(0,o.bF)(p,{class:"el-icon-edit"}),(0,o.Lk)("span",{onClick:t[1]||(t[1]=(...e)=>u.changeInfo&&u.changeInfo(...e)),style:{cursor:"pointer"}},"个人信息")])),_:1}),(0,o.bF)(g,null,{default:(0,o.k6)((()=>[(0,o.bF)(p,{class:"el-icon-s-fold"}),(0,o.Lk)("span",{onClick:t[2]||(t[2]=(...e)=>u.logout&&u.logout(...e)),style:{cursor:"pointer"}},"退出登录")])),_:1})])),_:1})])),default:(0,o.k6)((()=>[(0,o.Lk)("span",r,(0,a.v_)(this.mail),1)])),_:1})])])}l(9138);var d=l(4794),u={name:"teacherheadbar",data(){return{mail:localStorage.getItem("Mail"),headerLogo:d}},methods:{logout(){this.$router.push("/teacherLogin"),localStorage.setItem("Mail",null),localStorage.setItem("token","wutoken")},changeInfo(){this.$router.push("/teacherChangeInfo")},changePwd(){this.$router.push("/teacherChangePwd")},toMain(){this.$router.push("/borrowProcessing")}}},c=l(4307);const p=(0,c.A)(u,[["render",n],["__scopeId","data-v-7f4a0cb1"]]);var g=p},358:function(e,t,l){l.d(t,{A:function(){return u}});var o=l(285);const a={style:{display:"flex"}},i={style:{"min-width":"200px"}};function s(e,t,l,s,r,n){const d=(0,o.g2)("el-icon"),u=(0,o.g2)("el-menu-item"),c=(0,o.g2)("el-sub-menu"),p=(0,o.g2)("el-menu"),g=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",i,[(0,o.bF)(p,{class:"el-menu-vertical-demo","active-text-color":"#a6dcff",router:""},{default:(0,o.k6)((()=>[(0,o.bF)(c,{index:"1"},{title:(0,o.k6)((()=>[(0,o.bF)(d,{class:"el-icon-s-promotion"}),t[0]||(t[0]=(0,o.eW)("审批管理"))])),default:(0,o.k6)((()=>[this.isSuperUser?((0,o.uX)(),(0,o.Wv)(u,{key:0,index:"/borrowProcessing"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.Lk)("span",{slot:"title"},"借用审批",-1)]))),_:1})):(0,o.Q3)("",!0),this.isSuperUser?((0,o.uX)(),(0,o.Wv)(u,{key:1,index:"/messageProcessing"},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.Lk)("span",{slot:"title"},"延期审批",-1)]))),_:1})):(0,o.Q3)("",!0),this.isSuperUser?((0,o.uX)(),(0,o.Wv)(u,{key:2,index:"/toolRecord"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.Lk)("span",{slot:"title"},"归还审批",-1)]))),_:1})):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(c,{index:"2"},{title:(0,o.k6)((()=>[(0,o.bF)(d,{class:"el-icon-s-order"}),t[4]||(t[4]=(0,o.eW)("用户管理"))])),default:(0,o.k6)((()=>[this.isSuperUser?((0,o.uX)(),(0,o.Wv)(u,{key:0,index:"/addTeacher"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.Lk)("span",{slot:"title"},"添加教师",-1)]))),_:1})):(0,o.Q3)("",!0),this.isSuperUser?((0,o.uX)(),(0,o.Wv)(u,{key:1,index:"/UserRecord"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.Lk)("span",{slot:"title"},"学生列表",-1)]))),_:1})):(0,o.Q3)("",!0),this.isSuperUser?((0,o.uX)(),(0,o.Wv)(u,{key:2,index:"/TeacherRecord"},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.Lk)("span",{slot:"title"},"教师列表",-1)]))),_:1})):(0,o.Q3)("",!0),this.isSuperUser?((0,o.uX)(),(0,o.Wv)(u,{key:3,index:"/register_verify"},{default:(0,o.k6)((()=>t[8]||(t[8]=[(0,o.Lk)("span",{slot:"title"},"学生注册",-1)]))),_:1})):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(c,{index:"3"},{title:(0,o.k6)((()=>[(0,o.bF)(d,{class:"el-icon-setting"}),t[9]||(t[9]=(0,o.eW)("工具管理"))])),default:(0,o.k6)((()=>[this.isSuperUser?((0,o.uX)(),(0,o.Wv)(u,{key:0,index:"/AllToolRecord"},{default:(0,o.k6)((()=>t[10]||(t[10]=[(0,o.Lk)("span",{slot:"title"},"工具列表",-1)]))),_:1})):(0,o.Q3)("",!0),(0,o.bF)(u,{index:"/addtool"},{default:(0,o.k6)((()=>t[11]||(t[11]=[(0,o.Lk)("span",{slot:"title"},"新增工具",-1)]))),_:1}),(0,o.bF)(u,{index:"/settools"},{default:(0,o.k6)((()=>t[12]||(t[12]=[(0,o.Lk)("span",{slot:"title"},"编辑工具",-1)]))),_:1})])),_:1})])),_:1})]),(0,o.Lk)("div",null,[(0,o.bF)(g)])])}var r={name:"teachermenu",mounted(){this.loadIsSuperUser()},data(){return{isSuperUser:!0}},methods:{loadIsSuperUser(){"false"==localStorage.getItem("isSuperUser")&&(this.isSuperUser=!1)}}},n=l(4307);const d=(0,n.A)(r,[["render",s]]);var u=d},472:function(e,t,l){l.r(t),l.d(t,{default:function(){return G}});var o=l(285),a=l(9132);const i={style:{display:"grid","grid-template-columns":"15% 80% 5%"}},s={class:"tagselect-frame"},r={class:"tagselect-path"},n={key:1},d={key:2},u={class:"tagselect-content"},c={key:0},p={style:{display:"grid","grid-template-columns":"repeat(3,300px)","grid-template-rows":"400px","column-gap":"100px","justify-content":"space-around"}},g=["onClick"],m={style:{width:"100%",height:"300px"}},h=["src"],k={class:"tagselect-onetype-title"};function f(e,t,l,f,_,b){const y=(0,o.g2)("TeacherHeadBar"),v=(0,o.g2)("TeacherMenu"),L=(0,o.g2)("ToolSelectMan");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(y),(0,o.Lk)("div",i,[(0,o.Lk)("div",null,[(0,o.bF)(v)]),(0,o.Lk)("div",s,[t[1]||(t[1]=(0,o.Lk)("div",{class:"tagselect-title"},"编辑工具",-1)),(0,o.Lk)("div",r,[_.tagid>0?((0,o.uX)(),(0,o.CE)("span",{key:0,style:{cursor:"pointer"},onClick:t[0]||(t[0]=(...e)=>b.cancelTag&&b.cancelTag(...e))},"类别")):(0,o.Q3)("",!0),_.tagid>0?((0,o.uX)(),(0,o.CE)("span",n,"   >>   ")):(0,o.Q3)("",!0),_.tagid>0?((0,o.uX)(),(0,o.CE)("span",d,(0,a.v_)(_.tagname),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",u,[0==_.tagid?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",p,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(_.labellist,(e=>((0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",{class:"tagselect-onetype",onClick:t=>b.chooseTag(e.lowerLabel[0])},[(0,o.Lk)("div",m,[(0,o.Lk)("img",{style:{height:"100%",width:"100%"},src:e.lowerLabel[0].url},null,8,h)]),(0,o.Lk)("h3",k,(0,a.v_)(e.lowerLabel[0].name),1)],8,g)])))),256))])])):(0,o.Q3)("",!0),_.tagid>0?((0,o.uX)(),(0,o.Wv)(L,{key:1,tagid:_.tagid},null,8,["tagid"])):(0,o.Q3)("",!0)])]),t[2]||(t[2]=(0,o.Lk)("div",null,null,-1))])])}var _=l(7164),b=l(4099),y=l(358),v=l(6660);const L={style:{width:"100%",display:"grid","grid-template-rows":"40px auto","row-gap":"30px"}},x={style:{display:"grid","grid-template-columns":"20% 40% 40%","align-items":"center"}},w={style:{display:"grid","grid-template-columns":"repeat(auto-fill,160px)","grid-template-rows":"repeat(auto-fill,250px)",gap:"30px 30px"}},F={class:"tagselect-onetag"},C=["onClick"],U={style:{height:"30px",width:"160px"}},X={style:{height:"40px",width:"160px","margin-top":"10px",display:"inline-block"}},V={style:{width:"100%",display:"grid","grid-template-rows":"100px 200px 50px auto 100px","justify-items":"center"}},S={class:"borrow-tool-title"},W={style:{width:"200px",height:"200px",margin:"0 auto"}},T={class:"borrow-tool-text",style:{"line-height":"50px"}},D={key:0},E={class:"borrow-tool-text",style:{display:"grid","grid-template-columns":"100px 400px"}},I={style:{width:"100%",display:"grid","grid-template-rows":"100px auto","justify-items":"center"}},Q={style:{display:"grid","grid-template-columns":"400px 500px","grid-template-rows":"400px 100px","column-gap":"50px"}},A=["src"],R={key:0},M={style:{"grid-column-start":"span 2","justify-self":"center"}},j={class:"text-red-800"};function P(e,t,l,i,s,r){const n=(0,o.g2)("el-button"),d=(0,o.g2)("el-input"),u=(0,o.g2)("el-image"),c=(0,o.g2)("el-icon"),p=(0,o.g2)("el-dialog"),g=(0,o.g2)("el-form-item"),m=(0,o.g2)("Plus"),h=(0,o.g2)("el-upload"),k=(0,o.g2)("el-input-number"),f=(0,o.g2)("el-form");return(0,o.uX)(),(0,o.CE)("div",L,[(0,o.Lk)("div",x,[(0,o.Lk)("span",null,"共 "+(0,a.v_)(s.rescount)+" 条结果",1),(0,o.Lk)("span",null,[(0,o.bF)(d,{style:{width:"400px","margin-left":"100px"},placeholder:"支持模糊搜索工具名称",modelValue:s.searchkey,"onUpdate:modelValue":t[0]||(t[0]=e=>s.searchkey=e),onKeyup:(0,v.jR)(r.searchtool,["enter","native"])},{default:(0,o.k6)((()=>[(0,o.bF)(n,{slot:"append",icon:"el-icon-search",onClick:r.searchtool},null,8,["onClick"])])),_:1},8,["modelValue","onKeyup"])])]),(0,o.Lk)("div",w,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.tools,(t=>((0,o.uX)(),(0,o.CE)("div",F,[(0,o.Lk)("div",{style:{width:"150px",height:"150px",margin:"5px auto"},onClick:e=>r.info(t)},[(0,o.bF)(u,{style:{height:"100%",width:"100%","border-radius":"5px"},src:t.portrait,fit:e.fill},null,8,["src","fit"])],8,C),(0,o.Lk)("div",U,(0,a.v_)(t.name),1),(0,o.Lk)("div",X,[(0,o.bF)(n,{size:"small",style:{"margin-top":"5px"},onClick:e=>r.info(t)},{default:(0,o.k6)((()=>[(0,o.bF)(c,{class:"el-icon-info"})])),_:2},1032,["onClick"]),(0,o.bF)(n,{type:"primary",size:"small",style:{"margin-top":"5px"},loading:s.editButtonLoading,onClick:e=>r.pre_edit(t)},{default:(0,o.k6)((()=>[(0,o.bF)(c,{class:"el-icon-edit"})])),_:2},1032,["loading","onClick"]),(0,o.bF)(n,{type:"danger",size:"small",style:{"margin-top":"5px"},onClick:e=>r.pre_del(t)},{default:(0,o.k6)((()=>[(0,o.bF)(c,{class:"el-icon-delete"})])),_:2},1032,["onClick"])])])))),256)),(0,o.bF)(p,{modelValue:s.infoDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>s.infoDialog=e),center:"",modal:!0,"append-to-body":!0,width:"700px",top:"5px"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",V,[(0,o.Lk)("div",S,(0,a.v_)(s.cur_tool.name),1),(0,o.Lk)("div",W,[(0,o.bF)(u,{style:{height:"100%",width:"100%","border-radius":"5px"},src:s.cur_tool.portrait,fit:e.fill},null,8,["src","fit"])]),(0,o.Lk)("div",T,[(0,o.Lk)("span",null,"限借天数："+(0,a.v_)(s.cur_tool.limit_days),1),(0,o.Lk)("span",null,"  总数："+(0,a.v_)(s.cur_tool.total_count),1),(0,o.Lk)("span",null,"  剩余数量："+(0,a.v_)(s.cur_tool.left_count),1),0==s.cur_tool.leftCount?((0,o.uX)(),(0,o.CE)("span",D," 归还时间："+(0,a.v_)(s.cur_tool.shortReturnTime),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",E,[t[11]||(t[11]=(0,o.Lk)("div",{style:{"font-weight":"bold"}},"详情介绍:",-1)),(0,o.Lk)("div",null,(0,a.v_)(s.cur_tool.intro),1)])])])),_:1},8,["modelValue"]),(0,o.bF)(p,{modelValue:s.editDialog,"onUpdate:modelValue":t[7]||(t[7]=e=>s.editDialog=e),center:"",modal:!0,"append-to-body":!0,width:"1000px",top:"5px"},{default:(0,o.k6)((()=>[(0,o.bF)(f,{ref:"form",model:s.form,rules:s.rules,"label-width":"80px"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",I,[t[14]||(t[14]=(0,o.Lk)("div",{class:"borrow-tool-title"},"编辑工具",-1)),(0,o.bF)(f,{ref:"form",model:s.form,rules:s.rules,"label-width":"80px"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",Q,[(0,o.Lk)("div",null,[(0,o.bF)(g,{label:"工具名称",prop:"name"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{modelValue:s.form.name,"onUpdate:modelValue":t[2]||(t[2]=e=>s.form.name=e)},null,8,["modelValue"])])),_:1}),(0,o.bF)(g,{label:"工具图片"},{default:(0,o.k6)((()=>[(0,o.bF)(h,{class:"avatar-uploader",accept:"image/jpeg,image/jpg,image/png","auto-upload":!1,"show-file-list":!1,action:"","on-change":r.handleChange},{default:(0,o.k6)((()=>[s.form.img?((0,o.uX)(),(0,o.CE)("img",{key:0,src:s.form.img,class:"avatar"},null,8,A)):((0,o.uX)(),(0,o.Wv)(c,{key:1,class:"el-icon--upload"},{default:(0,o.k6)((()=>[(0,o.bF)(m)])),_:1}))])),_:1},8,["on-change"])])),_:1}),(0,o.bF)(g,{label:"工具数量",prop:"addCount"},{default:(0,o.k6)((()=>[(0,o.bF)(k,{modelValue:s.form.total_count,"onUpdate:modelValue":t[3]||(t[3]=e=>s.form.total_count=e),min:1},null,8,["modelValue"]),(0,o.Lk)("div",null,"剩余数量："+(0,a.v_)(s.cur_tool.left_count),1),0==s.cur_tool.left_count?((0,o.uX)(),(0,o.CE)("div",R," 归还时间："+(0,a.v_)(s.cur_tool.shortReturnTime),1)):(0,o.Q3)("",!0)])),_:1})]),(0,o.Lk)("div",null,[(0,o.bF)(g,{label:"限借天数",prop:"limit_days"},{default:(0,o.k6)((()=>[(0,o.bF)(k,{style:{width:"100%"},modelValue:s.form.limit_days,"onUpdate:modelValue":t[4]||(t[4]=e=>s.form.limit_days=e),min:1},null,8,["modelValue"])])),_:1}),(0,o.bF)(g,{label:"工具详情",prop:"intro"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{type:"textarea",autosize:{minRows:14},placeholder:"请输入内容",modelValue:s.form.intro,"onUpdate:modelValue":t[5]||(t[5]=e=>s.form.intro=e)},null,8,["modelValue"])])),_:1})]),(0,o.Lk)("div",M,[(0,o.bF)(g,null,{default:(0,o.k6)((()=>[(0,o.bF)(n,{style:{width:"200px"},type:"primary",onClick:r.edit,loading:s.formLoading},{default:(0,o.k6)((()=>t[12]||(t[12]=[(0,o.eW)("确定")]))),_:1},8,["onClick","loading"]),(0,o.bF)(n,{style:{width:"200px"},onClick:t[6]||(t[6]=e=>s.editDialog=!1)},{default:(0,o.k6)((()=>t[13]||(t[13]=[(0,o.eW)("取消")]))),_:1})])),_:1})])])])),_:1},8,["model","rules"])])])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),(0,o.bF)(p,{modelValue:s.delDialog,"onUpdate:modelValue":t[10]||(t[10]=e=>s.delDialog=e),width:"30%"},{footer:(0,o.k6)((()=>[(0,o.bF)(n,{type:"danger",onClick:t[8]||(t[8]=t=>r.del(e.tool))},{default:(0,o.k6)((()=>t[17]||(t[17]=[(0,o.eW)("确认")]))),_:1}),(0,o.bF)(n,{onClick:t[9]||(t[9]=e=>s.delDialog=!1)},{default:(0,o.k6)((()=>t[18]||(t[18]=[(0,o.eW)("取消")]))),_:1})])),default:(0,o.k6)((()=>[(0,o.Lk)("p",null,[t[15]||(t[15]=(0,o.eW)("您确定要删除 ")),(0,o.Lk)("span",j,(0,a.v_)(s.cur_tool.name),1),t[16]||(t[16]=(0,o.eW)(" 工具吗？"))])])),_:1},8,["modelValue"])])])}l(1531),l(3678),l(4145);var $=l(9093),q={file:null,name:"ToolSelectMan",components:{},mounted(){this.init()},props:["tagid"],data(){return{searchkey:"",fulltools:[],tools:[{id:0,name:"",total_count:0,left_count:0,label:"",portrait:"",created_at:"",intro:"",limit_days:0}],rescount:0,formLoading:!1,editButtonLoading:!1,infoDialog:!1,editDialog:!1,delDialog:!1,cur_tool:{},form:{id:0,name:"",total_count:1,img:"",imgfile:null,intro:"暂无简介",limit_days:7},rules:{name:[{required:!0,message:"请输入工具名称",trigger:"blur"}],labelId:[{required:!0,message:"请选择分类",trigger:"blur"}],img:[{required:!0,message:"请上传工具图片",trigger:"blur"}],addCount:[{required:!0,message:"请输入工具数量",trigger:"blur"}],limit_days:[{required:!0,message:"请输入工具的限制借用天数",trigger:"blur"}],intro:[]}}},methods:{handleChange(e,t){this.form.img=URL.createObjectURL(e.raw),this.form.imgfile=e.raw},init(){(0,_.A)({url:"tools",method:"get",params:{label:this.tagid}}).then((e=>{this.tools=e.data.data,this.tools.map((e=>{e.portrait.startsWith("http")?e.portrait=e.portrait:e.portrait=_.A.defaults.baseURL+"media/image/"+e.portrait})),this.rescount=e.data.data.length,this.fulltools=this.tools,console.log(this.tools)})).catch((e=>{this.$message.error(e)}))},searchtool(){this.searchkey.length<1?this.init():this.tools=this.fulltools.filter((e=>e.name.includes(this.searchkey)))},pre_del(e){this.cur_tool=e,this.delDialog=!0},del(){(0,_.A)({url:"tools/"+this.cur_tool.id,method:"DELETE"}).then((e=>{this.delDialog=!1,this.init()})).catch((e=>{$.nk.error(e)}))},info(e){this.cur_tool=e,this.infoDialog=!0},pre_edit(e){this.cur_tool=e,this.form=e,this.form.img=e.portrait,this.form.imgfile=null,this.editDialog=!0},edit(){this.formLoading||this.$refs.form.validate((e=>{if(e){this.formLoading=!0;var t=new FormData;t.append("name",this.form.name),t.append("total_count",this.form.total_count),t.append("intro",this.form.intro),t.append("limit_days",this.form.limit_days),t.append("img",this.form.imgfile),(0,_.A)({url:"tools/"+this.form.id,method:"put",data:t}).then((e=>{this.formLoading=!1,this.editDialog=!1,this.init()})).catch((e=>{this.$message.error(e),this.formLoading=!1}))}}))}}},z=l(4307);const B=(0,z.A)(q,[["render",P],["__scopeId","data-v-5cfbd14a"]]);var K=B,H={name:"ToolManagement",components:{TeacherHeadBar:b.A,TeacherMenu:y.A,ToolSelectMan:K},data(){return{tagid:0,tagname:"",labellist:[],toolcount:0}},mounted(){(0,_.A)({url:"user/getFirstLabelList",method:"post",data:{}}).then((e=>{0==e.data.error_code?(this.labellist=e.data.labelList,console.log(this.labellist[0].lowerLabel)):this.$message.error(e.error_code)}))},methods:{chooseTag(e){this.tagid=e.id,this.tagname=e.name},cancelTag(){this.tagid=0,this.tagname=""}}};const O=(0,z.A)(H,[["render",f],["__scopeId","data-v-31e9ec2c"]]);var G=O},4794:function(e,t,l){e.exports=l.p+"img/headerLogo.d1c84d2a.png"}}]);
//# sourceMappingURL=472.abc197ad.js.map