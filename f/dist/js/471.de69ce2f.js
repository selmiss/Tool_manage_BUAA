"use strict";(self["webpackChunkf"]=self["webpackChunkf"]||[]).push([[471],{3471:function(e,o,t){t.r(o),t.d(o,{default:function(){return _}});var r=t(285),l=t(9132),s=t(6660);const a={class:"login-register"},n={class:"contain"},i={key:0,class:"big-contain"},d={class:"bform"},c={key:0,class:"errTips"},u={key:1,class:"errTips"},m={key:1,class:"big-contain"},h={key:0},p={class:"bform"},f={key:0,class:"errTips"},g={key:1},k={class:"btitle"},b={class:"bform"};function L(e,o,t,L,w,v){return(0,r.uX)(),(0,r.CE)("div",a,[(0,r.Lk)("div",n,[(0,r.Lk)("div",{class:(0,l.C4)(["big-box",{active:w.isLogin}])},[w.isLogin?((0,r.uX)(),(0,r.CE)("div",i,[o[16]||(o[16]=(0,r.Lk)("div",{class:"btitle"},"用户登录",-1)),(0,r.Lk)("div",d,[(0,r.bo)((0,r.Lk)("input",{type:"email",placeholder:"请输入用户名","onUpdate:modelValue":o[0]||(o[0]=e=>w.form.email=e)},null,512),[[s.Jo,w.form.email]]),w.emailError?((0,r.uX)(),(0,r.CE)("span",c,"* 邮箱填写错误 *")):(0,r.Q3)("",!0),(0,r.bo)((0,r.Lk)("input",{type:"password",placeholder:"密码","onUpdate:modelValue":o[1]||(o[1]=e=>w.form.password=e)},null,512),[[s.Jo,w.form.password]]),w.emailError?((0,r.uX)(),(0,r.CE)("span",u,"* 密码填写错误 *")):(0,r.Q3)("",!0)]),(0,r.Lk)("button",{class:"bbutton",onClick:o[2]||(o[2]=(...e)=>v.login&&v.login(...e))},"登录"),o[17]||(o[17]=(0,r.eW)("   ")),(0,r.Lk)("span",{onClick:o[3]||(o[3]=(...e)=>v.studentForgetPwd&&v.studentForgetPwd(...e))},"忘记密码")])):((0,r.uX)(),(0,r.CE)("div",m,[w.stateReg?((0,r.uX)(),(0,r.CE)("div",g,[(0,r.Lk)("div",k,"欢迎！"+(0,l.v_)(this.form.name),1),(0,r.Lk)("div",b,[(0,r.bo)((0,r.Lk)("input",{type:"text",placeholder:"手机号码","onUpdate:modelValue":o[9]||(o[9]=e=>w.form.phone=e)},null,512),[[s.Jo,w.form.phone]]),o[25]||(o[25]=(0,r.Lk)("br",null,null,-1)),(0,r.Lk)("button",{onClick:o[10]||(o[10]=(...e)=>v.sendCode&&v.sendCode(...e))},[o[24]||(o[24]=(0,r.eW)("获取验证码")),(0,r.bo)((0,r.Lk)("span",{class:"count"},(0,l.v_)(w.count)+" s",513),[[s.aG,!w.show]])]),o[26]||(o[26]=(0,r.Lk)("br",null,null,-1)),(0,r.bo)((0,r.Lk)("input",{type:"code",placeholder:"验证码","onUpdate:modelValue":o[11]||(o[11]=e=>w.form.code=e)},null,512),[[s.Jo,w.form.code]]),o[27]||(o[27]=(0,r.Lk)("br",null,null,-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",placeholder:"密码","onUpdate:modelValue":o[12]||(o[12]=e=>w.form.password=e)},null,512),[[s.Jo,w.form.password]]),o[28]||(o[28]=(0,r.Lk)("br",null,null,-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",placeholder:"确认密码","onUpdate:modelValue":o[13]||(o[13]=e=>w.form.password2=e)},null,512),[[s.Jo,w.form.password2]])]),(0,r.Lk)("button",{class:"bbutton",onClick:o[14]||(o[14]=(...e)=>v.changeRegState&&v.changeRegState(...e))},"上一步"),o[29]||(o[29]=(0,r.eW)("  ")),(0,r.Lk)("button",{class:"bbutton",onClick:o[15]||(o[15]=(...e)=>v.register&&v.register(...e))},"注册")])):((0,r.uX)(),(0,r.CE)("div",h,[o[23]||(o[23]=(0,r.Lk)("div",{class:"btitle"},"用户注册",-1)),(0,r.Lk)("div",p,[(0,r.bo)((0,r.Lk)("input",{type:"text",placeholder:"学号","onUpdate:modelValue":o[4]||(o[4]=e=>w.form.sid=e)},null,512),[[s.Jo,w.form.sid]]),o[18]||(o[18]=(0,r.Lk)("br",null,null,-1)),w.existed?((0,r.uX)(),(0,r.CE)("span",f,"* 该学号已经注册！ *")):(0,r.Q3)("",!0),(0,r.bo)((0,r.Lk)("input",{type:"text",placeholder:"姓名","onUpdate:modelValue":o[5]||(o[5]=e=>w.form.name=e)},null,512),[[s.Jo,w.form.name]]),o[19]||(o[19]=(0,r.Lk)("br",null,null,-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",placeholder:"学院","onUpdate:modelValue":o[6]||(o[6]=e=>w.form.college=e)},null,512),[[s.Jo,w.form.college]]),o[20]||(o[20]=(0,r.Lk)("br",null,null,-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",placeholder:"邮箱","onUpdate:modelValue":o[7]||(o[7]=e=>w.form.email=e)},null,512),[[s.Jo,w.form.email]]),o[21]||(o[21]=(0,r.Lk)("br",null,null,-1)),o[22]||(o[22]=(0,r.eW)(" 请确认您的个人信息无误。 "))]),(0,r.Lk)("button",{class:"bbutton",onClick:o[8]||(o[8]=(...e)=>v.changeRegState&&v.changeRegState(...e))},"下一步")]))]))],2)])])}t(9138);var w=t(7164),v={name:"login-register",data(){return{isLogin:!0,stateReg:!1,emailError:!1,passwordError:!1,existed:!1,form:{name:"",sid:"",college:"",email:"",password:"",code:"",phone:""},show:!0,count:"",timer:null}},methods:{sendCode(){const e=60;this.timer||(console.log("已发送"),(0,w.A)({method:"post",url:"http://10.212.87.185/user/forget/sendCode",data:{acc:this.form.phone}}).then((e=>{console.log(e.data.error_code),alert("验证码已发送，请在手机信息中查看。")})),this.count=e,this.show=!1,this.timer=setInterval((()=>{this.count>0&&this.count<=e?this.count--:(this.show=!0,clearInterval(this.timer),this.timer=null)}),1e3))},studentForgetPwd(){this.$router.push("/studentForgetPwd")},changeType(){this.isLogin=!this.isLogin,this.stateReg=!1,this.form.sid="",this.form.name="",this.form.college="",this.form.email="",this.form.password=""},teacherEntry(){this.$router.push("/teacherLogin")},changeRegState(){""!=this.form.sid&&""!=this.form.name&&""!=this.form.college?this.stateReg=!this.stateReg:alert("填写不能为空！")},login(){console.log(this.form.email+" : "+this.form.password),""!=this.form.email&&""!=this.form.password?(0,w.A)({method:"post",url:"http://10.212.87.185/user/login",data:{acc:this.form.email,pwd:this.form.password}}).then((e=>{0==e.data.error_code?(localStorage.setItem("uid",e.data.uid),localStorage.setItem("Mail",this.form.email),alert("登录成功！"),this.$router.push("/borrowRecord")):1==e.data.error_code?alert("输入有误！请重新登录。"):2==e.data.error_code?alert("请先进行注册！"):3==e.data.error_code&&alert("密码错误！请重新输入")})).catch((e=>{console.log(e)})):alert("填写不能为空！")},register(){console.log(this.form.email+" : "+this.form.password),""!=this.form.password&&""!=this.form.email?(0,w.A)({method:"post",url:"http://10.212.87.185/user/register",data:{studentId:this.form.sid,name:this.form.name,college:this.form.college,acc:this.form.email,pwd:this.form.password,key:this.form.code,phoneNumber:this.form.phone}}).then((e=>{console.log(e.data.error_code),0==e.data.error_code?this.changeType():1==e.data.error_code?alert("输入有误，请重新输入。"):2==e.data.error_code?alert("该邮箱已注册。"):3==e.data.error_code?alert("请输入正确验证码"):4==e.data.error_code&&alert("验证码错误，请重新输入!")})).catch((e=>{console.log(e)})):alert("填写不能为空！")}}},y=t(4307);const C=(0,y.A)(v,[["render",L],["__scopeId","data-v-d1dee712"]]);var _=C}}]);
//# sourceMappingURL=471.de69ce2f.js.map