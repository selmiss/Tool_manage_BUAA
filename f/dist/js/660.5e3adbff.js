"use strict";(self["webpackChunktoolmanagement"]=self["webpackChunktoolmanagement"]||[]).push([[660],{2660:function(e,t,o){o.r(t),o.d(t,{default:function(){return X}});var s=o(285),l=o(9132),a=o(6660);const r={class:"login-register"},n={class:"contain"},i={key:0,class:"big-contain"},d={class:"bform"},c={key:0,class:"errTips"},u={key:1,class:"errTips"},m={key:1,class:"big-contain"},p={key:0},h={class:"bform"},g={key:0,class:"errTips"},k={key:1},f={class:"btitle"},b={class:"bform"},L={key:0,class:"small-contain"},w={key:1,class:"small-contain"};function v(e,t,o,v,y,C){return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("div",n,[(0,s.Lk)("div",{class:(0,l.C4)(["big-box",{active:y.isLogin}])},[y.isLogin?((0,s.uX)(),(0,s.CE)("div",i,[t[18]||(t[18]=(0,s.Lk)("div",{class:"btitle"},"学生登录",-1)),(0,s.Lk)("div",d,[(0,s.bo)((0,s.Lk)("input",{type:"email",placeholder:"邮箱","onUpdate:modelValue":t[0]||(t[0]=e=>y.form.email=e)},null,512),[[a.Jo,y.form.email]]),y.emailError?((0,s.uX)(),(0,s.CE)("span",c,"* 邮箱填写错误 *")):(0,s.Q3)("",!0),(0,s.bo)((0,s.Lk)("input",{type:"password",placeholder:"密码","onUpdate:modelValue":t[1]||(t[1]=e=>y.form.password=e)},null,512),[[a.Jo,y.form.password]]),y.emailError?((0,s.uX)(),(0,s.CE)("span",u,"* 密码填写错误 *")):(0,s.Q3)("",!0)]),(0,s.Lk)("button",{class:"bbutton",onClick:t[2]||(t[2]=(...e)=>C.login&&C.login(...e))},"登录"),t[19]||(t[19]=(0,s.eW)("   ")),(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>C.studentForgetPwd&&C.studentForgetPwd(...e))},"忘记密码")])):((0,s.uX)(),(0,s.CE)("div",m,[y.stateReg?((0,s.uX)(),(0,s.CE)("div",k,[(0,s.Lk)("div",f,"欢迎！"+(0,l.v_)(this.form.name),1),(0,s.Lk)("div",b,[(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"手机号码","onUpdate:modelValue":t[9]||(t[9]=e=>y.form.phone=e)},null,512),[[a.Jo,y.form.phone]]),t[26]||(t[26]=(0,s.Lk)("br",null,null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",placeholder:"密码","onUpdate:modelValue":t[10]||(t[10]=e=>y.form.password=e)},null,512),[[a.Jo,y.form.password]]),t[27]||(t[27]=(0,s.Lk)("br",null,null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",placeholder:"确认密码","onUpdate:modelValue":t[11]||(t[11]=e=>y.form.password2=e)},null,512),[[a.Jo,y.form.password2]])]),(0,s.Lk)("button",{class:"bbutton",onClick:t[12]||(t[12]=(...e)=>C.changeRegState&&C.changeRegState(...e))},"上一步"),t[28]||(t[28]=(0,s.eW)("  ")),(0,s.Lk)("button",{class:"bbutton",onClick:t[13]||(t[13]=(...e)=>C.register&&C.register(...e))},"注册")])):((0,s.uX)(),(0,s.CE)("div",p,[t[25]||(t[25]=(0,s.Lk)("div",{class:"btitle"},"学生注册",-1)),(0,s.Lk)("div",h,[(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"学号","onUpdate:modelValue":t[4]||(t[4]=e=>y.form.sid=e)},null,512),[[a.Jo,y.form.sid]]),t[20]||(t[20]=(0,s.Lk)("br",null,null,-1)),y.existed?((0,s.uX)(),(0,s.CE)("span",g,"* 该学号已经注册！ *")):(0,s.Q3)("",!0),(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"姓名","onUpdate:modelValue":t[5]||(t[5]=e=>y.form.name=e)},null,512),[[a.Jo,y.form.name]]),t[21]||(t[21]=(0,s.Lk)("br",null,null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"学院","onUpdate:modelValue":t[6]||(t[6]=e=>y.form.college=e)},null,512),[[a.Jo,y.form.college]]),t[22]||(t[22]=(0,s.Lk)("br",null,null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"email",placeholder:"邮箱","onUpdate:modelValue":t[7]||(t[7]=e=>y.form.email=e)},null,512),[[a.Jo,y.form.email]]),t[23]||(t[23]=(0,s.Lk)("br",null,null,-1)),t[24]||(t[24]=(0,s.eW)(" 请确认您的个人信息无误。 "))]),(0,s.Lk)("button",{class:"bbutton",onClick:t[8]||(t[8]=(...e)=>C.changeRegState&&C.changeRegState(...e))},"下一步")]))]))],2),(0,s.Lk)("div",{class:(0,l.C4)(["small-box",{active:y.isLogin}])},[y.isLogin?((0,s.uX)(),(0,s.CE)("div",L,[t[29]||(t[29]=(0,s.Lk)("div",{class:"stitle"},[(0,s.eW)("北航工程训练中心"),(0,s.Lk)("br"),(0,s.eW)("工具信息平台")],-1)),t[30]||(t[30]=(0,s.Lk)("p",{class:"scontent"},"尚无账号？点击下方按钮进行注册。",-1)),(0,s.Lk)("button",{class:"sbutton",onClick:t[14]||(t[14]=(...e)=>C.changeType&&C.changeType(...e))},"前往注册"),t[31]||(t[31]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("button",{class:"sbutton",onClick:t[15]||(t[15]=(...e)=>C.teacherEntry&&C.teacherEntry(...e))},"教师入口")])):((0,s.uX)(),(0,s.CE)("div",w,[t[32]||(t[32]=(0,s.Lk)("div",{class:"stitle"},"学生，您好！",-1)),t[33]||(t[33]=(0,s.Lk)("p",{class:"scontent"},[(0,s.eW)("注册工训中心账号，"),(0,s.Lk)("br"),(0,s.eW)("轻松进行设备借还。")],-1)),(0,s.Lk)("button",{class:"sbutton",onClick:t[16]||(t[16]=(...e)=>C.changeType&&C.changeType(...e))},"前往登录"),t[34]||(t[34]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("button",{class:"sbutton",onClick:t[17]||(t[17]=(...e)=>C.teacherEntry&&C.teacherEntry(...e))},"教师入口")]))],2)])])}o(9138);var y=o(7164),C=o(9093),E={name:"login-register",data(){return{isLogin:!0,stateReg:!1,emailError:!1,passwordError:!1,existed:!1,form:{name:"",sid:"",college:"",email:"",password:"",code:"",phone:""},show:!0,count:"",timer:null}},methods:{sendCode(){const e=60;this.timer||(console.log("已发送"),(0,y.A)({method:"post",url:"user/forget/sendCode",data:{acc:this.form.phone}}).then((e=>{console.log(e.data.error_code),alert("验证码已发送，请在手机信息中查看。")})),this.count=e,this.show=!1,this.timer=setInterval((()=>{this.count>0&&this.count<=e?this.count--:(this.show=!0,clearInterval(this.timer),this.timer=null)}),1e3))},studentForgetPwd(){this.$router.push("/studentForgetPwd")},changeType(){this.isLogin=!this.isLogin,this.stateReg=!1,this.form.sid="",this.form.name="",this.form.college="",this.form.email="",this.form.password=""},teacherEntry(){this.$router.push("/teacherLogin")},changeRegState(){""!=this.form.sid&&""!=this.form.name&&""!=this.form.college?this.stateReg=!this.stateReg:alert("填写不能为空！")},login(){localStorage.setItem("token","wutoken");var e=localStorage.getItem("token");console.log(e),console.log(this.form.email+" : "+this.form.password),""!=this.form.email&&""!=this.form.password?(0,y.A)({method:"post",url:"user/login",data:{acc:this.form.email,pwd:this.form.password}}).then((e=>{0==e.data.error_code?(console.log(e.data.hash_code),print(e.data),localStorage.setItem("uid",e.data.uid),localStorage.setItem("Mail",this.form.email),localStorage.setItem("token",e.data.hash_code),this.$router.push("/borrowRecord")):1==e.data.error_code?alert("输入有误！请重新登录。"):2==e.data.error_code?alert("请先进行注册！"):3==e.data.error_code&&alert("密码错误！请重新输入")})).catch((e=>{console.log(e)})):alert("填写不能为空！")},register(){if(""!=this.form.password&&""!=this.form.email){let e=new FormData;e.append("studentId",this.form.sid),e.append("name",this.form.name),e.append("college",this.form.college),e.append("email",this.form.email),e.append("password",this.form.password),e.append("phone",this.form.phone),(0,y.A)({method:"post",url:"user/register",data:e}).then((e=>{C.nk.success(e.data.msg),this.reload()})).catch((e=>{C.nk.error(e.response.data.msg)}))}else alert("填写不能为空！")}}},R=o(4307);const S=(0,R.A)(E,[["render",v],["__scopeId","data-v-c25c0d32"]]);var X=S}}]);
//# sourceMappingURL=660.5e3adbff.js.map