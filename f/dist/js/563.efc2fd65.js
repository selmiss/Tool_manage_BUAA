"use strict";(self["webpackChunktoolmanagement"]=self["webpackChunktoolmanagement"]||[]).push([[563],{6565:function(e,t,l){l.d(t,{A:function(){return m}});var a=l(285),o=l(9132);const r={style:{color:"white"}};function i(e,t,l,i,s,n){const d=(0,a.g2)("el-image"),u=(0,a.g2)("el-dropdown-item"),m=(0,a.g2)("el-dropdown-menu"),c=(0,a.g2)("el-dropdown"),g=(0,a.g2)("el-header"),p=(0,a.g2)("el-container");return(0,a.uX)(),(0,a.Wv)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(g,{class:"bg-gradient-to-r from-orange-400 to-amber-800 flex items-center justify-between cursor-pointer"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{class:"h-full p-1",src:s.headerLogo,onClick:n.toMain},null,8,["src","onClick"]),(0,a.bF)(c,null,{dropdown:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(u,{icon:"edit"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",{onClick:t[0]||(t[0]=(...e)=>n.changePwd&&n.changePwd(...e)),style:{cursor:"pointer"}},"修改密码")])),_:1}),(0,a.bF)(u,{icon:"edit"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",{onClick:t[1]||(t[1]=(...e)=>n.changeInfo&&n.changeInfo(...e)),style:{cursor:"pointer"}},"个人信息")])),_:1}),(0,a.bF)(u,{icon:"fold"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",{onClick:t[2]||(t[2]=(...e)=>n.logout&&n.logout(...e)),style:{cursor:"pointer"}},"退出登录")])),_:1})])),_:1})])),default:(0,a.k6)((()=>[(0,a.Lk)("span",r,(0,o.v_)(this.mail),1)])),_:1})])),_:1})])),_:1})}l(9138);var s=l(4794),n={name:"teacherheadbar",data(){return{mail:localStorage.getItem("Mail"),headerLogo:s}},methods:{logout(){this.$router.push("/teacherLogin"),localStorage.setItem("Mail",null),localStorage.setItem("token","wutoken")},changeInfo(){this.$router.push("/teacherChangeInfo")},changePwd(){this.$router.push("/teacherChangePwd")},toMain(){this.$router.push("/borrowProcessing")}}},d=l(4307);const u=(0,d.A)(n,[["render",i]]);var m=u},358:function(e,t,l){l.d(t,{A:function(){return u}});var a=l(285);const o={style:{display:"flex"}},r={style:{"min-width":"200px"}};function i(e,t,l,i,s,n){const d=(0,a.g2)("el-icon"),u=(0,a.g2)("el-menu-item"),m=(0,a.g2)("el-sub-menu"),c=(0,a.g2)("el-menu"),g=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",r,[(0,a.bF)(c,{class:"el-menu-vertical-demo","active-text-color":"#a6dcff",router:""},{default:(0,a.k6)((()=>[(0,a.bF)(m,{index:"1"},{title:(0,a.k6)((()=>[(0,a.bF)(d,{class:"el-icon-s-promotion"}),t[0]||(t[0]=(0,a.eW)("审批管理"))])),default:(0,a.k6)((()=>[this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:0,index:"/borrowProcessing"},{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.Lk)("span",{slot:"title"},"借用审批",-1)]))),_:1})):(0,a.Q3)("",!0),this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:1,index:"/messageProcessing"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.Lk)("span",{slot:"title"},"延期审批",-1)]))),_:1})):(0,a.Q3)("",!0),this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:2,index:"/toolRecord"},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.Lk)("span",{slot:"title"},"归还审批",-1)]))),_:1})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(m,{index:"2"},{title:(0,a.k6)((()=>[(0,a.bF)(d,{class:"el-icon-s-order"}),t[4]||(t[4]=(0,a.eW)("用户管理"))])),default:(0,a.k6)((()=>[this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:0,index:"/addTeacher"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.Lk)("span",{slot:"title"},"添加教师",-1)]))),_:1})):(0,a.Q3)("",!0),this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:1,index:"/UserRecord"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.Lk)("span",{slot:"title"},"学生列表",-1)]))),_:1})):(0,a.Q3)("",!0),this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:2,index:"/TeacherRecord"},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.Lk)("span",{slot:"title"},"教师列表",-1)]))),_:1})):(0,a.Q3)("",!0),this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:3,index:"/register_verify"},{default:(0,a.k6)((()=>t[8]||(t[8]=[(0,a.Lk)("span",{slot:"title"},"学生注册",-1)]))),_:1})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(m,{index:"3"},{title:(0,a.k6)((()=>[(0,a.bF)(d,{class:"el-icon-setting"}),t[9]||(t[9]=(0,a.eW)("工具管理"))])),default:(0,a.k6)((()=>[this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:0,index:"/AllToolRecord"},{default:(0,a.k6)((()=>t[10]||(t[10]=[(0,a.Lk)("span",{slot:"title"},"工具列表",-1)]))),_:1})):(0,a.Q3)("",!0),(0,a.bF)(u,{index:"/addtool"},{default:(0,a.k6)((()=>t[11]||(t[11]=[(0,a.Lk)("span",{slot:"title"},"新增工具",-1)]))),_:1}),(0,a.bF)(u,{index:"/settools"},{default:(0,a.k6)((()=>t[12]||(t[12]=[(0,a.Lk)("span",{slot:"title"},"编辑工具",-1)]))),_:1})])),_:1})])),_:1})]),(0,a.Lk)("div",null,[(0,a.bF)(g)])])}var s={name:"teachermenu",mounted(){this.loadIsSuperUser()},data(){return{isSuperUser:!0}},methods:{loadIsSuperUser(){"false"==localStorage.getItem("isSuperUser")&&(this.isSuperUser=!1)}}},n=l(4307);const d=(0,n.A)(s,[["render",i]]);var u=d},4563:function(e,t,l){l.r(t),l.d(t,{default:function(){return f}});var a=l(285),o=l(9132);const r={style:{margin:"0 auto","margin-top":"20px","align-items":"center"}},i={slot:"footer",class:"dialog-footer"},s={slot:"footer",class:"dialog-footer"};function n(e,t,l,n,d,u){const m=(0,a.g2)("TeacherHeadBar"),c=(0,a.g2)("TeacherMenu"),g=(0,a.g2)("el-aside"),p=(0,a.g2)("el-table-column"),f=(0,a.g2)("el-button"),h=(0,a.g2)("el-popover"),k=(0,a.g2)("el-input"),b=(0,a.g2)("el-form-item"),F=(0,a.g2)("el-form"),_=(0,a.g2)("el-dialog"),w=(0,a.g2)("el-date-picker"),v=(0,a.g2)("el-time-select"),y=(0,a.g2)("el-table"),L=(0,a.g2)("el-card"),x=(0,a.g2)("el-main"),T=(0,a.g2)("el-container");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(m),(0,a.bF)(T,null,{default:(0,a.k6)((()=>[(0,a.bF)(g,{width:"20%",style:{"min-height":"600px"}},{default:(0,a.k6)((()=>[(0,a.bF)(c)])),_:1}),(0,a.bF)(x,{width:"75%"},{default:(0,a.k6)((()=>[t[16]||(t[16]=(0,a.Lk)("div",{class:"title"},"待审批借用申请",-1)),(0,a.Lk)("div",r,[(0,a.bF)(L,{class:"box-card",style:{width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(y,{data:d.borrowList,style:{width:"100%"},border:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{align:"center",prop:"toolName",label:"工具名称","min-width":"110"}),(0,a.bF)(p,{align:"center",prop:"borrowCount",label:"借用数量","min-width":"110"}),(0,a.bF)(p,{align:"center",label:"借用者信息","min-width":"110"},{default:(0,a.k6)((e=>[(0,a.bF)(h,{trigger:"hover",placement:"bottom",width:"auto"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,o.v_)(e.row.requestUserName)+"       "+(0,o.v_)(e.row.stuid),1),(0,a.Lk)("div",null,"学院:         "+(0,o.v_)(e.row.stuCollege),1),(0,a.Lk)("div",null,"联系邮箱:  "+(0,o.v_)(e.row.stuEmail),1),(0,a.Lk)("div",null,"联系电话:  "+(0,o.v_)(e.row.phoneNumber),1)])),reference:(0,a.k6)((()=>[(0,a.bF)(f,{size:"mini",slot:"reference"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.row.requestUserName),1)])),_:2},1024)])),_:2},1024)])),_:1}),(0,a.bF)(p,{align:"center",prop:"startTime",label:"借用开始时间","min-width":"100"}),(0,a.bF)(p,{align:"center",prop:"returnTime",label:"原定归还时间","min-width":"100"}),(0,a.bF)(p,{align:"center",label:"操作","min-width":"180"},{default:(0,a.k6)((l=>[(0,a.bF)(h,{effect:"light",trigger:"click",placement:"left",width:"auto"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,"借用目的: "+(0,o.v_)(l.row.purpose),1)])),reference:(0,a.k6)((()=>[(0,a.bF)(f,{style:{"margin-right":"10px"},size:"mini",plain:"",slot:"reference",type:"primary"},{default:(0,a.k6)((()=>t[9]||(t[9]=[(0,a.eW)("查看目的")]))),_:1})])),_:2},1024),(0,a.bF)(f,{size:"mini",type:"success",plain:"",onClick:e=>u.handleCreate2(l.row)},{default:(0,a.k6)((()=>t[10]||(t[10]=[(0,a.eW)("同意借出")]))),_:2},1032,["onClick"]),(0,a.bF)(f,{size:"mini",type:"danger",plain:"",onClick:e=>u.handleCreate(l.row)},{default:(0,a.k6)((()=>t[11]||(t[11]=[(0,a.eW)("拒绝借出")]))),_:2},1032,["onClick"]),(0,a.bF)(_,{modelValue:d.dialogFormVisible,"onUpdate:modelValue":t[2]||(t[2]=e=>d.dialogFormVisible=e)},{default:(0,a.k6)((()=>[(0,a.bF)(F,{model:d.formData,ref:"dataForm","label-position":"left","label-width":"80px",style:{width:"300px","margin-left":"50px"}},{default:(0,a.k6)((()=>[(0,a.bF)(b,{label:"拒绝原因"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{type:"textarea",rows:2,modelValue:d.formData.refuseReason,"onUpdate:modelValue":t[0]||(t[0]=e=>d.formData.refuseReason=e),placeholder:"请输入拒绝原因"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,a.Lk)("div",i,[(0,a.bF)(f,{onClick:t[1]||(t[1]=e=>d.dialogFormVisible=!1)},{default:(0,a.k6)((()=>t[12]||(t[12]=[(0,a.eW)("取消")]))),_:1}),(0,a.bF)(f,{type:"primary",onClick:e=>u.handleRefuse(l.$index)},{default:(0,a.k6)((()=>t[13]||(t[13]=[(0,a.eW)("拒绝")]))),_:2},1032,["onClick"])])])),_:2},1032,["modelValue"]),(0,a.bF)(_,{modelValue:d.dialogFormVisible2,"onUpdate:modelValue":t[8]||(t[8]=e=>d.dialogFormVisible2=e)},{default:(0,a.k6)((()=>[(0,a.bF)(F,{model:d.formAgree,ref:"dataForm","label-position":"left","label-width":"120px",align:"left",style:{width:"600px","margin-left":"50px"}},{default:(0,a.k6)((()=>[(0,a.bF)(b,{label:"领取工具日期"},{default:(0,a.k6)((()=>[(0,a.bF)(w,{modelValue:d.formAgree.getDate,"onUpdate:modelValue":t[3]||(t[3]=e=>d.formAgree.getDate=e),format:"YYYY年MM月DD日","value-format":"YYYY-MM-DD",align:"left",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions},null,8,["modelValue","picker-options"])])),_:1}),(0,a.bF)(b,{label:"领取工具时间"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{placeholder:"起始时间",modelValue:d.startTime,"onUpdate:modelValue":t[4]||(t[4]=e=>d.startTime=e),"picker-options":{start:"08:30",step:"00:30",end:"18:30"}},null,8,["modelValue"]),(0,a.bF)(v,{placeholder:"结束时间",modelValue:d.endTime,"onUpdate:modelValue":t[5]||(t[5]=e=>d.endTime=e),"picker-options":{start:"08:30",step:"00:30",end:"22:30",minTime:d.startTime}},null,8,["modelValue","picker-options"])])),_:1}),(0,a.bF)(b,{label:"领取工具地点"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{type:"textarea",style:{width:"90%"},rows:1,modelValue:d.formAgree.address,"onUpdate:modelValue":t[6]||(t[6]=e=>d.formAgree.address=e),placeholder:"请输入领取工具地点"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,a.Lk)("div",s,[(0,a.bF)(f,{onClick:t[7]||(t[7]=e=>d.dialogFormVisible2=!1)},{default:(0,a.k6)((()=>t[14]||(t[14]=[(0,a.eW)("取消")]))),_:1}),(0,a.bF)(f,{type:"primary",onClick:e=>u.handleAgree(l.$index)},{default:(0,a.k6)((()=>t[15]||(t[15]=[(0,a.eW)("借出")]))),_:2},1032,["onClick"])])])),_:2},1032,["modelValue"])])),_:1})])),_:1},8,["data"])])),_:1})])])),_:1}),(0,a.bF)(g,{width:"5%"})])),_:1})])}var d=l(7164),u=l(6565),m=l(358),c={inject:["reload"],components:{TeacherHeadBar:u.A,TeacherMenu:m.A},mounted(){this.loadMessage()},data(){return{startTime:"",endTime:"",dialogFormVisible:!1,dialogFormVisible2:!1,formData:{refuseReason:""},formAgree:{address:"",getDate:""},borrowList:[{toolName:"",requestUserName:"",startTime:"",borrowTime:"",returnTime:"",stuid:"",stuCollege:"",userId:"",phoneNumber:"",purpose:"",stuEmail:"",borrowCount:""}],rowStore:null}},methods:{handleCreate(e){this.rowStore=e,this.formData={refuseReason:""},this.dialogFormVisible=!0},handleCreate2(e){this.rowStore=e,this.formAgree={address:"工程训练中心南208"},this.dialogFormVisible2=!0},handleAgree(e){var t=this.rowStore;console.log(e,t),(0,d.A)({url:"manager/approveBorrowRequest",method:"post",data:{requestId:t.requestId,status:"Accept",isChangeTime:"false",changeTime:"",refuseReason:"",getDate:this.formAgree.getDate,startTime:this.startTime,endTime:this.endTime,address:this.formAgree.address}}).then((e=>{e?0===e.data.error_code?(console.log("已同意借用申请",e.data),alert("已同意该同学的借用申请，该设备最晚于"+t.returnTime+"归还"),this.reload()):5===e.data.error_code?alert("该设备数量不足，请拒绝该申请！"):(console.log("审批失败"+e.data),alert("error: "+e.data.error_code)):(console.log("error"+e.data),alert("error"+e.data.error_code))}))},handleRefuse(e){var t=this.rowStore;console.log(this.formData.refuseReason),(0,d.A)({url:"manager/approveBorrowRequest",method:"post",data:{requestId:t.requestId,status:"Refuse",isChangeTime:"false",changeTime:null,refuseReason:this.formData.refuseReason,getDate:"",startTime:"",endTime:"",address:""}}).then((e=>{e?(console.log("rejectpurpose: ",this.formData.refuseReason),0===e.data.error_code?(console.log("已拒绝该申请",e.data),alert("已拒绝该申请"),this.reload()):(console.log("审批失败"+e.data),alert("error: "+e.data.error_code))):(console.log("审批失败，请检查网络"+e.data),alert("审批失败，请检查网络"))}))},loadMessage(){let e=this;(0,d.A)({url:"manager/getToolRequestList",method:"post",data:{}}).then((t=>{t&&0===t.data.error_code?(console.log("获取成功",t.data),e.borrowList=t.data.dataList):(console.log("获取失败"+t.data),alert("获取失败，请检查网络"))}))}}},g=l(4307);const p=(0,g.A)(c,[["render",n],["__scopeId","data-v-15988b2e"]]);var f=p},4794:function(e,t,l){e.exports=l.p+"img/headerLogo.d1c84d2a.png"}}]);
//# sourceMappingURL=563.efc2fd65.js.map