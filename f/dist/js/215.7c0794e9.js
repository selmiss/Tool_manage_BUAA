"use strict";(self["webpackChunktoolmanagement"]=self["webpackChunktoolmanagement"]||[]).push([[215],{4099:function(e,l,t){t.d(l,{A:function(){return p}});var a=t(285),o=t(9132);const r={class:"x-head"},i={class:"place-content-center",style:{"line-height":"6vh",margin:"0 4vh 0 0"}},n={style:{color:"white"}};function s(e,l,t,s,d,u){const m=(0,a.g2)("el-image"),c=(0,a.g2)("el-icon"),p=(0,a.g2)("el-dropdown-item"),g=(0,a.g2)("el-dropdown-menu"),f=(0,a.g2)("el-dropdown");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(m,{onClick:u.toMain,style:{cursor:"pointer",height:"60px","margin-left":"10px","margin-top":"0.5%"},src:d.headerLogo},null,8,["onClick","src"]),l[3]||(l[3]=(0,a.Lk)("div",{style:{margin:"0 auto"}},null,-1)),(0,a.Lk)("div",i,[(0,a.bF)(f,null,{dropdown:(0,a.k6)((()=>[(0,a.bF)(g,null,{default:(0,a.k6)((()=>[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(c,{class:"el-icon-edit"}),(0,a.Lk)("span",{onClick:l[0]||(l[0]=(...e)=>u.changePwd&&u.changePwd(...e)),style:{cursor:"pointer"}},"修改密码")])),_:1}),(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(c,{class:"el-icon-edit"}),(0,a.Lk)("span",{onClick:l[1]||(l[1]=(...e)=>u.changeInfo&&u.changeInfo(...e)),style:{cursor:"pointer"}},"个人信息")])),_:1}),(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(c,{class:"el-icon-s-fold"}),(0,a.Lk)("span",{onClick:l[2]||(l[2]=(...e)=>u.logout&&u.logout(...e)),style:{cursor:"pointer"}},"退出登录")])),_:1})])),_:1})])),default:(0,a.k6)((()=>[(0,a.Lk)("span",n,(0,o.v_)(this.mail),1)])),_:1})])])}t(9138);var d=t(4794),u={name:"teacherheadbar",data(){return{mail:localStorage.getItem("Mail"),headerLogo:d}},methods:{logout(){this.$router.push("/teacherLogin"),localStorage.setItem("Mail",null),localStorage.setItem("token","wutoken")},changeInfo(){this.$router.push("/teacherChangeInfo")},changePwd(){this.$router.push("/teacherChangePwd")},toMain(){this.$router.push("/borrowProcessing")}}},m=t(4307);const c=(0,m.A)(u,[["render",s],["__scopeId","data-v-7f4a0cb1"]]);var p=c},358:function(e,l,t){t.d(l,{A:function(){return u}});var a=t(285);const o={style:{display:"flex"}},r={style:{"min-width":"200px"}};function i(e,l,t,i,n,s){const d=(0,a.g2)("el-icon"),u=(0,a.g2)("el-menu-item"),m=(0,a.g2)("el-sub-menu"),c=(0,a.g2)("el-menu"),p=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",r,[(0,a.bF)(c,{class:"el-menu-vertical-demo","active-text-color":"#a6dcff",router:""},{default:(0,a.k6)((()=>[(0,a.bF)(m,{index:"1"},{title:(0,a.k6)((()=>[(0,a.bF)(d,{class:"el-icon-s-promotion"}),l[0]||(l[0]=(0,a.eW)("审批管理"))])),default:(0,a.k6)((()=>[this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:0,index:"/borrowProcessing"},{default:(0,a.k6)((()=>l[1]||(l[1]=[(0,a.Lk)("span",{slot:"title"},"借用审批",-1)]))),_:1})):(0,a.Q3)("",!0),this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:1,index:"/messageProcessing"},{default:(0,a.k6)((()=>l[2]||(l[2]=[(0,a.Lk)("span",{slot:"title"},"延期审批",-1)]))),_:1})):(0,a.Q3)("",!0),this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:2,index:"/toolRecord"},{default:(0,a.k6)((()=>l[3]||(l[3]=[(0,a.Lk)("span",{slot:"title"},"归还审批",-1)]))),_:1})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(m,{index:"2"},{title:(0,a.k6)((()=>[(0,a.bF)(d,{class:"el-icon-s-order"}),l[4]||(l[4]=(0,a.eW)("用户管理"))])),default:(0,a.k6)((()=>[this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:0,index:"/addTeacher"},{default:(0,a.k6)((()=>l[5]||(l[5]=[(0,a.Lk)("span",{slot:"title"},"添加教师",-1)]))),_:1})):(0,a.Q3)("",!0),this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:1,index:"/UserRecord"},{default:(0,a.k6)((()=>l[6]||(l[6]=[(0,a.Lk)("span",{slot:"title"},"学生列表",-1)]))),_:1})):(0,a.Q3)("",!0),this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:2,index:"/TeacherRecord"},{default:(0,a.k6)((()=>l[7]||(l[7]=[(0,a.Lk)("span",{slot:"title"},"教师列表",-1)]))),_:1})):(0,a.Q3)("",!0),this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:3,index:"/register_verify"},{default:(0,a.k6)((()=>l[8]||(l[8]=[(0,a.Lk)("span",{slot:"title"},"学生注册",-1)]))),_:1})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(m,{index:"3"},{title:(0,a.k6)((()=>[(0,a.bF)(d,{class:"el-icon-setting"}),l[9]||(l[9]=(0,a.eW)("工具管理"))])),default:(0,a.k6)((()=>[this.isSuperUser?((0,a.uX)(),(0,a.Wv)(u,{key:0,index:"/AllToolRecord"},{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.Lk)("span",{slot:"title"},"工具列表",-1)]))),_:1})):(0,a.Q3)("",!0),(0,a.bF)(u,{index:"/addtool"},{default:(0,a.k6)((()=>l[11]||(l[11]=[(0,a.Lk)("span",{slot:"title"},"新增工具",-1)]))),_:1}),(0,a.bF)(u,{index:"/settools"},{default:(0,a.k6)((()=>l[12]||(l[12]=[(0,a.Lk)("span",{slot:"title"},"编辑工具",-1)]))),_:1})])),_:1})])),_:1})]),(0,a.Lk)("div",null,[(0,a.bF)(p)])])}var n={name:"teachermenu",mounted(){this.loadIsSuperUser()},data(){return{isSuperUser:!0}},methods:{loadIsSuperUser(){"false"==localStorage.getItem("isSuperUser")&&(this.isSuperUser=!1)}}},s=t(4307);const d=(0,s.A)(n,[["render",i]]);var u=d},1215:function(e,l,t){t.r(l),t.d(l,{default:function(){return v}});var a=t(285);const o={style:{display:"grid","grid-template-columns":"20% 75% 5%"}},r={class:"addtool-frame"},i={class:"addtool-content"},n={style:{display:"grid","grid-template-columns":"500px 500px","grid-template-rows":"400px 100px","column-gap":"100px"}},s=["src"],d={key:1,class:"el-icon-plus avatar-uploader-icon"},u={style:{"grid-column-start":"span 2","margin-left":"auto","margin-right":"auto"}};function m(e,l,t,m,c,p){const g=(0,a.g2)("TeacherHeadBar"),f=(0,a.g2)("TeacherMenu"),h=(0,a.g2)("el-input"),k=(0,a.g2)("el-form-item"),b=(0,a.g2)("el-option"),v=(0,a.g2)("el-select"),_=(0,a.g2)("el-upload"),y=(0,a.g2)("el-input-number"),L=(0,a.g2)("el-button"),F=(0,a.g2)("el-form"),w=(0,a.g2)("el-result");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(g),(0,a.Lk)("div",o,[(0,a.Lk)("div",null,[(0,a.bF)(f)]),(0,a.Lk)("div",r,[l[9]||(l[9]=(0,a.Lk)("div",{class:"addtool-title"},"新增工具",-1)),(0,a.Lk)("div",i,[0==c.addSuccess?((0,a.uX)(),(0,a.Wv)(F,{key:0,ref:"form",model:c.form,rules:c.rules,"label-width":"80px"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",n,[(0,a.Lk)("div",null,[(0,a.bF)(k,{label:"工具名称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{modelValue:c.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>c.form.name=e),placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),(0,a.bF)(k,{label:"所属分类",prop:"labelId"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{modelValue:c.form.labelId,"onUpdate:modelValue":l[1]||(l[1]=e=>c.form.labelId=e),placeholder:"选择分类"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(c.ops,(e=>((0,a.uX)(),(0,a.Wv)(b,{key:e.lowerLabel[0].id,label:e.lowerLabel[0].name,value:e.lowerLabel[0].id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(k,{label:"工具图片",prop:"img",ref:"uploadElement"},{default:(0,a.k6)((()=>[(0,a.Q3)("",!0),(0,a.bF)(_,{class:"avatar-uploader",ref:"upload",accept:"image/jpeg,image/jpg,image/png","auto-upload":!1,action:"","show-file-list":!1,"on-change":p.handleChange},{default:(0,a.k6)((()=>[c.form.img?((0,a.uX)(),(0,a.CE)("img",{key:0,src:c.form.img,class:"avatar"},null,8,s)):((0,a.uX)(),(0,a.CE)("i",d))])),_:1},8,["on-change"])])),_:1},512),(0,a.bF)(k,{label:"工具数量",prop:"addCount"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{style:{width:"100%"},modelValue:c.form.addCount,"onUpdate:modelValue":l[3]||(l[3]=e=>c.form.addCount=e),min:1},null,8,["modelValue"])])),_:1})]),(0,a.Lk)("div",null,[(0,a.bF)(k,{label:"限借天数",prop:"limit_days"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{style:{width:"100%"},modelValue:c.form.limit_days,"onUpdate:modelValue":l[4]||(l[4]=e=>c.form.limit_days=e),min:1},null,8,["modelValue"])])),_:1}),(0,a.bF)(k,{label:"工具详情",prop:"intro"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{type:"textarea",autosize:{minRows:14},placeholder:"请输入内容",modelValue:c.form.intro,"onUpdate:modelValue":l[5]||(l[5]=e=>c.form.intro=e)},null,8,["modelValue"])])),_:1})]),(0,a.Lk)("div",u,[(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.bF)(L,{style:{width:"200px"},type:"warning",onClick:p.handleSubmitAdd,loading:c.formLoading},{default:(0,a.k6)((()=>l[6]||(l[6]=[(0,a.eW)("确定")]))),_:1},8,["onClick","loading"]),(0,a.bF)(L,{style:{width:"200px"},onClick:p.formReset},{default:(0,a.k6)((()=>l[7]||(l[7]=[(0,a.eW)("清空")]))),_:1},8,["onClick"])])),_:1})])])])),_:1},8,["model","rules"])):((0,a.uX)(),(0,a.Wv)(w,{key:1,icon:"success",title:"添加工具成功"},{extra:(0,a.k6)((()=>[(0,a.bF)(L,{type:"primary",size:"medium",onClick:p.continueAdd},{default:(0,a.k6)((()=>l[8]||(l[8]=[(0,a.eW)("继续添加")]))),_:1},8,["onClick"])])),_:1}))])])])])}t(1531),t(3678),t(4145);var c=t(7164),p=t(4099),g=t(358),f=t(9093),h={components:{TeacherHeadBar:p.A,TeacherMenu:g.A},data(){return{addSuccess:!1,formLoading:!1,ops:[],form:{labelId:null,name:"",img:"",intro:"暂无简介",addCount:1,imgfile:null,limit_days:7},rules:{name:[{required:!0,message:"请输入工具名称",trigger:"blur"}],labelId:[{required:!0,message:"请选择分类",trigger:"blur"}],img:[{required:!0,message:"请上传工具图片",trigger:"blur"}],addCount:[{required:!0,message:"请输入工具数量",trigger:"blur"}],limit_days:[{required:!0,message:"请输入工具的限制借用天数",trigger:"blur"}],intro:[]}}},mounted(){this.init()},methods:{formReset(){this.form.labelId=null,this.form.name="",this.form.img=null,this.form.intro="暂无简介",this.form.addCount=1,this.form.limit_days=7,this.form.imgfile=null},continueAdd(){this.formReset(),this.addSuccess=!1},init(){(0,c.A)({url:"user/getFirstLabelList",method:"post"}).then((e=>{0==e.data.error_code&&(this.ops=e.data.labelList)}))},handleChange(e,l){this.form.img=URL.createObjectURL(e.raw),this.form.imgfile=e.raw},handleSubmitAdd(){this.formLoading||this.$refs.form.validate((e=>{if(e){this.formLoading=!0;var l=new FormData;l.append("name",this.form.name),l.append("label",this.form.labelId),l.append("total_count",this.form.addCount),l.append("intro",this.form.intro),l.append("limit_days",this.form.limit_days),l.append("img",this.form.imgfile),c.A.post("/tools",l).then((e=>{201==e.status?(this.formLoading=!1,this.$refs.upload.clearFiles(),this.addSuccess=!0):this.$message.error("由于网络安全原因失败，请重试！",e.data.error_code)})).catch((e=>{console.log("err",e),f.nk.error("添加工具失败"+e)}))}}))}}},k=t(4307);const b=(0,k.A)(h,[["render",m],["__scopeId","data-v-aa230374"]]);var v=b},4794:function(e,l,t){e.exports=t.p+"img/headerLogo.d1c84d2a.png"}}]);
//# sourceMappingURL=215.7c0794e9.js.map