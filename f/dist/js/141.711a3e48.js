"use strict";(self["webpackChunkf"]=self["webpackChunkf"]||[]).push([[141],{5141:function(e,o,t){t.r(o),t.d(o,{default:function(){return R}});var l=t(285),r=t(9132),s=t(6660);const a={class:"login-register"},n={class:"contain"},i={key:0,class:"big-contain"},d={class:"bform"},c={class:"count"},u={class:"count"},h={class:"count"},m={class:"count"},p={style:{"margin-top":"70px"}},k={key:1,class:"big-contain"},f={key:0},g={class:"bform"},b={key:0,class:"errTips"},L={key:1},y={class:"btitle"},w={class:"bform"},v={key:0,class:"small-contain"},C={key:1,class:"small-contain"};function _(e,o,t,_,E,W){return(0,l.uX)(),(0,l.CE)("div",a,[(0,l.Lk)("div",n,[(0,l.Lk)("div",{class:(0,r.C4)(["big-box",{active:E.isLogin}])},[E.isLogin?((0,l.uX)(),(0,l.CE)("div",i,[o[32]||(o[32]=(0,l.Lk)("div",{class:"btitle"},"忘记密码",-1)),(0,l.Lk)("div",d,[(0,l.Lk)("span",c,[o[21]||(o[21]=(0,l.eW)("邮箱          :  ")),(0,l.bo)((0,l.Lk)("input",{type:"text",placeholder:"邮箱","onUpdate:modelValue":o[0]||(o[0]=e=>E.form.email=e)},null,512),[[s.Jo,E.form.email]])]),o[26]||(o[26]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("span",u,[o[22]||(o[22]=(0,l.eW)("手机号码    :  ")),(0,l.bo)((0,l.Lk)("input",{type:"text",placeholder:"手机号码","onUpdate:modelValue":o[1]||(o[1]=e=>E.form.phone=e)},null,512),[[s.Jo,E.form.phone]])]),o[27]||(o[27]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("button",{onClick:o[2]||(o[2]=(...e)=>W.sendCode&&W.sendCode(...e))},[o[23]||(o[23]=(0,l.eW)("获取验证码")),(0,l.bo)((0,l.Lk)("span",{class:"count"},(0,r.v_)(E.count)+" s",513),[[s.aG,!E.show]])]),o[28]||(o[28]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("span",h,[o[24]||(o[24]=(0,l.eW)("验证码       :  ")),(0,l.bo)((0,l.Lk)("input",{type:"code",placeholder:"验证码","onUpdate:modelValue":o[3]||(o[3]=e=>E.form.code=e)},null,512),[[s.Jo,E.form.code]])]),o[29]||(o[29]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("span",m,[o[25]||(o[25]=(0,l.eW)("设置新密码:  ")),(0,l.bo)((0,l.Lk)("input",{type:"password",placeholder:"设置新密码","onUpdate:modelValue":o[4]||(o[4]=e=>E.form.password=e)},null,512),[[s.Jo,E.form.password]])]),o[30]||(o[30]=(0,l.Lk)("br",null,null,-1))]),(0,l.Lk)("div",p,[(0,l.Lk)("button",{class:"bbutton",onClick:o[5]||(o[5]=(...e)=>W.confirmChange&&W.confirmChange(...e))},"确认修改"),o[31]||(o[31]=(0,l.eW)("   ")),(0,l.Lk)("button",{onClick:o[6]||(o[6]=(...e)=>W.studentEntry&&W.studentEntry(...e))},"返回登录")])])):((0,l.uX)(),(0,l.CE)("div",k,[E.stateReg?((0,l.uX)(),(0,l.CE)("div",L,[(0,l.Lk)("div",y,"欢迎！"+(0,r.v_)(this.form.name),1),(0,l.Lk)("div",w,[(0,l.bo)((0,l.Lk)("input",{type:"text",placeholder:"手机号码","onUpdate:modelValue":o[12]||(o[12]=e=>E.form.phone=e)},null,512),[[s.Jo,E.form.phone]]),o[39]||(o[39]=(0,l.Lk)("br",null,null,-1)),(0,l.bo)((0,l.Lk)("input",{type:"password",placeholder:"密码","onUpdate:modelValue":o[13]||(o[13]=e=>E.form.password=e)},null,512),[[s.Jo,E.form.password]]),o[40]||(o[40]=(0,l.Lk)("br",null,null,-1)),(0,l.bo)((0,l.Lk)("input",{type:"password",placeholder:"确认密码","onUpdate:modelValue":o[14]||(o[14]=e=>E.form.password2=e)},null,512),[[s.Jo,E.form.password2]])]),(0,l.Lk)("button",{class:"bbutton",onClick:o[15]||(o[15]=(...e)=>W.changeRegState&&W.changeRegState(...e))},"上一步"),o[41]||(o[41]=(0,l.eW)("  ")),(0,l.Lk)("button",{class:"bbutton",onClick:o[16]||(o[16]=(...e)=>W.register&&W.register(...e))},"注册")])):((0,l.uX)(),(0,l.CE)("div",f,[o[38]||(o[38]=(0,l.Lk)("div",{class:"btitle"},"学生注册",-1)),(0,l.Lk)("div",g,[(0,l.bo)((0,l.Lk)("input",{type:"text",placeholder:"学号","onUpdate:modelValue":o[7]||(o[7]=e=>E.form.sid=e)},null,512),[[s.Jo,E.form.sid]]),o[33]||(o[33]=(0,l.Lk)("br",null,null,-1)),E.existed?((0,l.uX)(),(0,l.CE)("span",b,"* 该学号已经注册！ *")):(0,l.Q3)("",!0),(0,l.bo)((0,l.Lk)("input",{type:"text",placeholder:"姓名","onUpdate:modelValue":o[8]||(o[8]=e=>E.form.name=e)},null,512),[[s.Jo,E.form.name]]),o[34]||(o[34]=(0,l.Lk)("br",null,null,-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",placeholder:"学院","onUpdate:modelValue":o[9]||(o[9]=e=>E.form.college=e)},null,512),[[s.Jo,E.form.college]]),o[35]||(o[35]=(0,l.Lk)("br",null,null,-1)),(0,l.bo)((0,l.Lk)("input",{type:"email",placeholder:"邮箱","onUpdate:modelValue":o[10]||(o[10]=e=>E.form.email=e)},null,512),[[s.Jo,E.form.email]]),o[36]||(o[36]=(0,l.Lk)("br",null,null,-1)),o[37]||(o[37]=(0,l.eW)(" 请确认您的个人信息无误。 "))]),(0,l.Lk)("button",{class:"bbutton",onClick:o[11]||(o[11]=(...e)=>W.changeRegState&&W.changeRegState(...e))},"下一步")]))]))],2),(0,l.Lk)("div",{class:(0,r.C4)(["small-box",{active:E.isLogin}])},[E.isLogin?((0,l.uX)(),(0,l.CE)("div",v,[o[42]||(o[42]=(0,l.Lk)("div",{class:"stitle"},[(0,l.eW)("北航工程训练中心"),(0,l.Lk)("br"),(0,l.eW)("工具信息平台")],-1)),o[43]||(o[43]=(0,l.Lk)("p",{class:"scontent"},"尚无账号？点击下方按钮进行注册。",-1)),(0,l.Lk)("button",{class:"sbutton",onClick:o[17]||(o[17]=(...e)=>W.changeType&&W.changeType(...e))},"前往注册"),o[44]||(o[44]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("button",{class:"sbutton",onClick:o[18]||(o[18]=(...e)=>W.teacherEntry&&W.teacherEntry(...e))},"教师入口")])):((0,l.uX)(),(0,l.CE)("div",C,[o[45]||(o[45]=(0,l.Lk)("div",{class:"stitle"},"学生，您好！",-1)),o[46]||(o[46]=(0,l.Lk)("p",{class:"scontent"},[(0,l.eW)("注册工训中心账号，"),(0,l.Lk)("br"),(0,l.eW)("轻松进行设备借还。")],-1)),(0,l.Lk)("button",{class:"sbutton",onClick:o[19]||(o[19]=(...e)=>W.changeType&&W.changeType(...e))},"前往登录"),o[47]||(o[47]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("button",{class:"sbutton",onClick:o[20]||(o[20]=(...e)=>W.teacherEntry&&W.teacherEntry(...e))},"教师入口")]))],2)])])}t(9138);var E=t(7164),W={name:"login-register",data(){return{isLogin:!0,stateReg:!1,emailError:!1,passwordError:!1,existed:!1,form:{email:"",phone:"",password:"",code:""},show:!0,count:"",timer:null}},methods:{sendCode(){const e=60;this.timer||(console.log("已发送"),(0,E.A)({method:"post",url:"user/forget/sendCode",data:{acc:this.form.phone}}).then((e=>{console.log(e.data),alert("验证码已发送，请在手机信息中查看。")})),this.count=e,this.show=!1,this.timer=setInterval((()=>{this.count>0&&this.count<=e?this.count--:(this.show=!0,clearInterval(this.timer),this.timer=null)}),1e3))},studentEntry(){this.$router.push("/studentLogin")},confirmChange(){""!=this.form.phone&&""!=this.form.password?(0,E.A)({method:"post",url:"user/forget/setPwd",data:{acc:this.form.email,phoneNumber:this.form.phone,pwd:this.form.password,key:this.form.code}}).then((e=>{console.log(e.data.error_code),0==e.data.error_code?(alert("重置密码成功！"),this.$router.push("/studentLogin")):1==e.data.error_code?alert("存在输入为空！"):2==e.data.error_code?alert("该邮箱不存在！"):3==e.data.error_code?alert("密码错误或格式不规范！请重新输入。"):alert("验证码错误，请重新输入。")})):alert("填写不能为空")},studentForgetPwd(){this.$router.push("/studentForgetPwd")},changeType(){this.isLogin=!this.isLogin,this.stateReg=!1,this.form.sid="",this.form.name="",this.form.college="",this.form.email="",this.form.password=""},teacherEntry(){this.$router.push("/teacherLogin")},changeRegState(){""!=this.form.sid&&""!=this.form.name&&""!=this.form.college?this.stateReg=!this.stateReg:alert("填写不能为空！")},login(){console.log(this.form.email+" : "+this.form.password),""!=this.form.email&&""!=this.form.password?(0,E.A)({method:"post",url:"user/login",data:{acc:this.form.email,pwd:this.form.password}}).then((e=>{0==e.data.error_code?(localStorage.setItem("uid",e.data.uid),localStorage.setItem("Mail",this.form.email),alert("登录成功！"),this.$router.push("/borrowRecord")):1==e.data.error_code?alert("输入有误！请重新登录。"):2==e.data.error_code?alert("请先进行注册！"):3==e.data.error_code&&alert("密码错误或格式不正确！请重新输入")})).catch((e=>{console.log(e)})):alert("填写不能为空！")},register(){console.log(this.form.email+" : "+this.form.password),""!=this.form.password&&""!=this.form.email?(0,E.A)({method:"post",url:"user/register",data:{studentId:this.form.sid,name:this.form.name,college:this.form.college,acc:this.form.email,pwd:this.form.password,key:this.form.code,phoneNumber:this.form.phone}}).then((e=>{console.log(e.data.error_code),0==e.data.error_code?this.changeType():1==e.data.error_code?alert("输入有误，请重新输入。"):2==e.data.error_code?alert("该邮箱已注册。"):3==e.data.error_code?alert("请输入正确验证码"):4==e.data.error_code&&alert("验证码错误，请重新输入!")})).catch((e=>{console.log(e)})):alert("填写不能为空！")}}},x=t(4307);const J=(0,x.A)(W,[["render",_],["__scopeId","data-v-7423a2c7"]]);var R=J}}]);
//# sourceMappingURL=141.711a3e48.js.map