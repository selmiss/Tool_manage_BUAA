"use strict";(self["webpackChunktoolmanagement"]=self["webpackChunktoolmanagement"]||[]).push([[819],{1819:function(e,t,o){o.r(t),o.d(t,{default:function(){return x}});var s=o(285),r=o(9132),a=o(6660);const n={class:"login-register"},l={class:"contain"},i={key:0,class:"big-contain"},c={class:"bform"},d={class:"count"},u={class:"count"},h={class:"count"},m={class:"count"},p={style:{"align-items":"center","margin-top":"70px"}},k={key:1,class:"big-contain"},L={key:0},f={class:"bform"},b={key:0,class:"errTips"},g={key:1},w={key:0,class:"small-contain"},y={key:1,class:"small-contain"};function v(e,t,o,v,C,E){return(0,s.uX)(),(0,s.CE)("div",n,[t[39]||(t[39]=(0,s.Lk)("div",{class:"header"},null,-1)),(0,s.Lk)("div",l,[(0,s.Lk)("div",{class:(0,r.C4)(["big-box",{active:C.isLogin}])},[C.isLogin?((0,s.uX)(),(0,s.CE)("div",i,[t[26]||(t[26]=(0,s.Lk)("div",{class:"btitle"},"忘记密码",-1)),(0,s.Lk)("div",c,[(0,s.Lk)("span",d,[t[15]||(t[15]=(0,s.eW)("邮箱          :  ")),(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"邮箱","onUpdate:modelValue":t[0]||(t[0]=e=>C.form.email=e)},null,512),[[a.Jo,C.form.email]])]),t[20]||(t[20]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("span",u,[t[16]||(t[16]=(0,s.eW)("手机号码    :  ")),(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"手机号码","onUpdate:modelValue":t[1]||(t[1]=e=>C.form.phone=e)},null,512),[[a.Jo,C.form.phone]])]),t[21]||(t[21]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>E.sendCode&&E.sendCode(...e))},[t[17]||(t[17]=(0,s.eW)("获取验证码")),(0,s.bo)((0,s.Lk)("span",{class:"count"},(0,r.v_)(C.count)+" s",513),[[a.aG,!C.show]])]),t[22]||(t[22]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("span",h,[t[18]||(t[18]=(0,s.eW)("验证码       :  ")),(0,s.bo)((0,s.Lk)("input",{type:"code",placeholder:"验证码","onUpdate:modelValue":t[3]||(t[3]=e=>C.form.code=e)},null,512),[[a.Jo,C.form.code]])]),t[23]||(t[23]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("span",m,[t[19]||(t[19]=(0,s.eW)("设置新密码:  ")),(0,s.bo)((0,s.Lk)("input",{type:"password",placeholder:"设置新密码","onUpdate:modelValue":t[4]||(t[4]=e=>C.form.password=e)},null,512),[[a.Jo,C.form.password]])]),t[24]||(t[24]=(0,s.Lk)("br",null,null,-1))]),(0,s.Lk)("div",p,[(0,s.Lk)("button",{class:"bbutton",onClick:t[5]||(t[5]=(...e)=>E.confirmChange&&E.confirmChange(...e))},"确认修改"),t[25]||(t[25]=(0,s.eW)("   ")),(0,s.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>E.teacherEntry&&E.teacherEntry(...e))},"返回登录")])])):((0,s.uX)(),(0,s.CE)("div",k,[C.stateReg?((0,s.uX)(),(0,s.CE)("div",g)):((0,s.uX)(),(0,s.CE)("div",L,[t[30]||(t[30]=(0,s.Lk)("div",{class:"btitle"},"教师注册",-1)),t[31]||(t[31]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("div",f,[(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"工号","onUpdate:modelValue":t[7]||(t[7]=e=>C.form.tid=e)},null,512),[[a.Jo,C.form.tid]]),t[27]||(t[27]=(0,s.Lk)("br",null,null,-1)),C.existed?((0,s.uX)(),(0,s.CE)("span",b,"* 该工号已经注册！ *")):(0,s.Q3)("",!0),(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"姓名","onUpdate:modelValue":t[8]||(t[8]=e=>C.form.name=e)},null,512),[[a.Jo,C.form.name]]),t[28]||(t[28]=(0,s.Lk)("br",null,null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"邮箱","onUpdate:modelValue":t[9]||(t[9]=e=>C.form.email=e)},null,512),[[a.Jo,C.form.email]]),t[29]||(t[29]=(0,s.Lk)("br",null,null,-1))]),t[32]||(t[32]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("button",{class:"bbutton",onClick:t[10]||(t[10]=(...e)=>E.changeRegState&&E.changeRegState(...e))},"下一步")]))]))],2),(0,s.Lk)("div",{class:(0,r.C4)(["small-box",{active:C.isLogin}])},[C.isLogin?((0,s.uX)(),(0,s.CE)("div",w,[t[33]||(t[33]=(0,s.Lk)("div",{class:"stitle"},[(0,s.eW)("北航工程训练中心"),(0,s.Lk)("br"),(0,s.eW)("工具信息平台")],-1)),t[34]||(t[34]=(0,s.Lk)("p",{class:"scontent"},[(0,s.eW)("请输入您的邮箱"),(0,s.Lk)("br"),(0,s.eW)("或管理员账号")],-1)),(0,s.Lk)("button",{class:"sbutton",onClick:t[11]||(t[11]=(...e)=>E.changeType&&E.changeType(...e))},"前往注册"),t[35]||(t[35]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("button",{class:"sbutton",onClick:t[12]||(t[12]=(...e)=>E.studentEntry&&E.studentEntry(...e))},"学生入口")])):((0,s.uX)(),(0,s.CE)("div",y,[t[36]||(t[36]=(0,s.Lk)("div",{class:"stitle"},"老师，您好！",-1)),t[37]||(t[37]=(0,s.Lk)("p",{class:"scontent"},[(0,s.eW)("注册工训中心账号，"),(0,s.Lk)("br"),(0,s.eW)("轻松管理设备借还。")],-1)),(0,s.Lk)("button",{class:"sbutton",onClick:t[13]||(t[13]=(...e)=>E.changeType&&E.changeType(...e))},"前往登录"),t[38]||(t[38]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("button",{class:"sbutton",onClick:t[14]||(t[14]=(...e)=>E.studentEntry&&E.studentEntry(...e))},"学生入口")]))],2)])])}o(9138);var C=o(7164),E={name:"login-register",data(){return{isLogin:!0,stateReg:!1,emailError:!1,passwordError:!1,existed:!1,form:{email:"",password:"",phone:"",code:""},show:!0,count:"",timer:null}},methods:{studentEntry(){this.$router.push("/studentLogin")},changeType(){this.isLogin=!this.isLogin,this.stateReg=!1,this.form.tid="",this.form.name="",this.form.email="",this.form.password=""},teacherEntry(){this.$router.push("/teacherLogin")},sendCode(){const e=60;this.timer||(console.log("已发送"),(0,C.A)({method:"post",url:"user/forget/sendCode",data:{acc:this.form.phone}}).then((e=>{alert("验证码已发送，请查看手机消息。")})),this.count=e,this.show=!1,this.timer=setInterval((()=>{this.count>0&&this.count<=e?this.count--:(this.show=!0,clearInterval(this.timer),this.timer=null)}),1e3))},changeRegState(){""!=this.form.sid&&""!=this.form.name&&""!=this.form.college?this.stateReg=!this.stateReg:alert("填写不能为空！")},changePwd(){""!=this.form.phone&&""!=this.form.password&&(0,C.A)({method:"post",url:"http://8.130.48.144/forget/setPwd",data:{uid:this.userId,old_pwd:this.form.password,new_pwd:this.new_password}}).then((e=>{switch(e.error_code){case 0:alert("登录成功");break;case 1:alert("请求参数错误");break;case 2:alert("原密码错误");break;case 3:alert("新密码格式错误");break;case 4:alert("用户不存在");break}}))},confirmChange(){""!=this.form.email&&""!=this.form.password?(0,C.A)({method:"post",url:"manager/forget/setPwd",data:{acc:this.form.email,phoneNumber:this.form.phone,pwd:this.form.password,key:this.form.code}}).then((e=>{console.log(e.data.error_code),0==e.data.error_code?(alert("重置密码成功！"),this.$router.push("/teacherLogin")):1==e.data.error_code?alert("存在输入为空！"):2==e.data.error_code?alert("该邮箱不存在！"):3==e.data.error_code?alert("密码错误！请重新输入。"):alert("验证码错误，请重新输入。")})):alert("填写不能为空")},register(){console.log(this.form.phone+" : "+this.form.tid),""!=this.form.password&&""!=this.form.email?this.form.password!=this.form.password2?alert("两次密码输入不一致。"):(0,C.A)({method:"post",url:"manager/RegisterTeacherAcc",data:{acc:this.form.email,teacherId:this.form.tid,name:this.form.name,pwd:this.form.password,key:this.form.code,phoneNumber:this.form.phone}}).then((e=>{console.log(e),0==e.data.error_code&&(alert("您的注册请求已提交！请等待管理员审核。"),this.$router.push("/teacherLogin"))})):alert("填写不能为空！")}}},_=o(4307);const W=(0,_.A)(E,[["render",v],["__scopeId","data-v-5d112809"]]);var x=W}}]);
//# sourceMappingURL=819.ae60e8d9.js.map