"use strict";(self["webpackChunktoolmanagement"]=self["webpackChunktoolmanagement"]||[]).push([[75],{1075:function(e,t,o){o.r(t),o.d(t,{default:function(){return U}});var s=o(285),a=o(9132),r=o(6660);const l={class:"login-register"},n={class:"contain"},i={key:0,class:"big-contain"},d={class:"bform"},c={key:0,class:"errTips"},u={key:1,class:"errTips"},h={key:1,class:"big-contain"},m={key:0},p={class:"bform"},k={key:0,class:"errTips"},g={key:1},b={class:"btitle"},f={class:"bform"},L={key:0,class:"small-contain"},w={key:1,class:"small-contain"};function v(e,t,o,v,y,C){return(0,s.uX)(),(0,s.CE)("div",l,[t[34]||(t[34]=(0,s.Lk)("div",{class:"header"},null,-1)),(0,s.Lk)("div",n,[(0,s.Lk)("div",{class:(0,a.C4)(["big-box",{active:y.isLogin}])},[y.isLogin?((0,s.uX)(),(0,s.CE)("div",i,[t[17]||(t[17]=(0,s.Lk)("div",{class:"btitle"},"教师登录",-1)),(0,s.Lk)("div",d,[(0,s.bo)((0,s.Lk)("input",{type:"email",placeholder:"邮箱","onUpdate:modelValue":t[0]||(t[0]=e=>y.form.email=e)},null,512),[[r.Jo,y.form.email]]),y.emailError?((0,s.uX)(),(0,s.CE)("span",c,"* 邮箱填写错误 *")):(0,s.Q3)("",!0),(0,s.bo)((0,s.Lk)("input",{type:"password",placeholder:"密码","onUpdate:modelValue":t[1]||(t[1]=e=>y.form.password=e)},null,512),[[r.Jo,y.form.password]]),y.emailError?((0,s.uX)(),(0,s.CE)("span",u,"* 密码填写错误 *")):(0,s.Q3)("",!0)]),(0,s.Lk)("button",{class:"bbutton",onClick:t[2]||(t[2]=(...e)=>C.login&&C.login(...e))},"登录"),t[18]||(t[18]=(0,s.eW)("   ")),(0,s.Lk)("button",{class:"bbutton",onClick:t[3]||(t[3]=(...e)=>C.teacherForgetPwd&&C.teacherForgetPwd(...e))},"忘记密码")])):((0,s.uX)(),(0,s.CE)("div",h,[y.stateReg?((0,s.uX)(),(0,s.CE)("div",g,[(0,s.Lk)("div",b,"欢迎，"+(0,a.v_)(this.form.name)+"老师！",1),(0,s.Lk)("div",f,[(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"手机号","onUpdate:modelValue":t[8]||(t[8]=e=>y.form.phone=e)},null,512),[[r.Jo,y.form.phone]]),t[25]||(t[25]=(0,s.Lk)("br",null,null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",placeholder:"密码","onUpdate:modelValue":t[9]||(t[9]=e=>y.form.password=e)},null,512),[[r.Jo,y.form.password]]),t[26]||(t[26]=(0,s.Lk)("br",null,null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",placeholder:"确认密码","onUpdate:modelValue":t[10]||(t[10]=e=>y.form.password2=e)},null,512),[[r.Jo,y.form.password2]])]),(0,s.Lk)("button",{class:"bbutton",onClick:t[11]||(t[11]=(...e)=>C.changeRegState&&C.changeRegState(...e))},"上一步"),t[27]||(t[27]=(0,s.eW)("  ")),(0,s.Lk)("button",{class:"bbutton",onClick:t[12]||(t[12]=(...e)=>C.register&&C.register(...e))},"注册")])):((0,s.uX)(),(0,s.CE)("div",m,[t[22]||(t[22]=(0,s.Lk)("div",{class:"btitle"},"教师注册",-1)),t[23]||(t[23]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("div",p,[(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"工号","onUpdate:modelValue":t[4]||(t[4]=e=>y.form.tid=e)},null,512),[[r.Jo,y.form.tid]]),t[19]||(t[19]=(0,s.Lk)("br",null,null,-1)),y.existed?((0,s.uX)(),(0,s.CE)("span",k,"* 该工号已经注册！ *")):(0,s.Q3)("",!0),(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"姓名","onUpdate:modelValue":t[5]||(t[5]=e=>y.form.name=e)},null,512),[[r.Jo,y.form.name]]),t[20]||(t[20]=(0,s.Lk)("br",null,null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"邮箱","onUpdate:modelValue":t[6]||(t[6]=e=>y.form.email=e)},null,512),[[r.Jo,y.form.email]]),t[21]||(t[21]=(0,s.Lk)("br",null,null,-1))]),t[24]||(t[24]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("button",{class:"bbutton",onClick:t[7]||(t[7]=(...e)=>C.changeRegState&&C.changeRegState(...e))},"下一步")]))]))],2),(0,s.Lk)("div",{class:(0,a.C4)(["small-box",{active:y.isLogin}])},[y.isLogin?((0,s.uX)(),(0,s.CE)("div",L,[t[28]||(t[28]=(0,s.Lk)("div",{class:"stitle"},[(0,s.eW)("北航工程训练中心"),(0,s.Lk)("br"),(0,s.eW)("工具信息平台")],-1)),t[29]||(t[29]=(0,s.Lk)("p",{class:"scontent"},[(0,s.eW)("请输入您的邮箱"),(0,s.Lk)("br"),(0,s.eW)("或管理员账号")],-1)),(0,s.Lk)("button",{class:"sbutton",onClick:t[13]||(t[13]=(...e)=>C.changeType&&C.changeType(...e))},"前往注册"),t[30]||(t[30]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("button",{class:"sbutton",onClick:t[14]||(t[14]=(...e)=>C.studentEntry&&C.studentEntry(...e))},"学生入口")])):((0,s.uX)(),(0,s.CE)("div",w,[t[31]||(t[31]=(0,s.Lk)("div",{class:"stitle"},"老师，您好！",-1)),t[32]||(t[32]=(0,s.Lk)("p",{class:"scontent"},[(0,s.eW)("注册工训中心账号，"),(0,s.Lk)("br"),(0,s.eW)("轻松管理设备借还。")],-1)),(0,s.Lk)("button",{class:"sbutton",onClick:t[15]||(t[15]=(...e)=>C.changeType&&C.changeType(...e))},"前往登录"),t[33]||(t[33]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("button",{class:"sbutton",onClick:t[16]||(t[16]=(...e)=>C.studentEntry&&C.studentEntry(...e))},"学生入口")]))],2)])])}o(9138);var y=o(7164),C={name:"login-register",data(){return{isLogin:!0,stateReg:!1,emailError:!1,passwordError:!1,existed:!1,form:{name:"",tid:"",email:"",password:"",password2:"",phone:""},show:!0,count:"",timer:null}},methods:{studentEntry(){this.$router.push("/studentLogin")},changeType(){this.isLogin=!this.isLogin,this.stateReg=!1,this.form.tid="",this.form.name="",this.form.email="",this.form.password=""},teacherForgetPwd(){this.$router.push("/teacherForgetPwd")},sendCode(){const e=60;this.timer||(console.log("已发送"),(0,y.A)({method:"post",url:"user/forget/sendCode",data:{acc:this.form.phone}}).then((e=>{console.log(e.error_code),alert("验证码已发送，请在手机信息中查看。")})),this.count=e,this.show=!1,this.timer=setInterval((()=>{this.count>0&&this.count<=e?this.count--:(this.show=!0,clearInterval(this.timer),this.timer=null)}),1e3))},changeRegState(){""!=this.form.sid&&""!=this.form.name&&""!=this.form.college?this.stateReg=!this.stateReg:alert("填写不能为空！")},changePwd(){""!=this.form.email&&""!=this.form.password&&(0,y.A)({method:"post",url:"manager/resetPwd",data:{uid:this.userId,old_pwd:this.form.password,new_pwd:this.new_password}}).then((e=>{switch(e.error_code){case 0:alert("登录成功");break;case 1:alert("请求参数错误");break;case 2:alert("原密码错误");break;case 3:alert("新密码格式错误");break;case 4:alert("用户不存在");break}}))},login(){localStorage.setItem("token","wutoken");var e=localStorage.getItem("token");console.log(e),""!=this.form.email&&""!=this.form.password?y.A.post("manager/Login",{acc:this.form.email,pwd:this.form.password}).then((e=>{console.log(y.A.defaults.baseURL);let t={};t.Mail=this.form.email,t.UID=e.data.uid,t.hash_code=e.data.hash_code,console.log(t.hash_code),0==e.data.error_code?(localStorage.setItem("uid",e.data.uid),localStorage.setItem("Mail",this.form.email),localStorage.setItem("isSuperUser",e.data.is_superUser),localStorage.setItem("token",e.data.hash_code),e.data.is_superUser?this.$router.push("/borrowProcessing"):this.$router.push("/settools")):1==e.data.error_code?alert("存在输入为空！"):2==e.data.error_code?alert("用户不存在！"):3==e.data.error_code?alert("密码错误！请重新输入。"):alert("请重新输入！")})):alert("填写不能为空")},register(){console.log(this.form.phone+" : "+this.form.tid),""!=this.form.password&&""!=this.form.email?this.form.password!=this.form.password2?alert("两次密码输入不一致。"):(0,y.A)({method:"post",url:"manager/RegisterTeacherAcc",data:{acc:this.form.email,teacherId:this.form.tid,name:this.form.name,pwd:this.form.password,phoneNumber:this.form.phone}}).then((e=>{console.log(e),0==e.data.error_code&&(alert("您的注册请求已提交！请等待管理员审核。"),this.changeType()),1==e.data.error_code&&alert("输入有误！请检查并重新输入"),2==e.data.error_code&&alert("该邮箱已注册！")})):alert("填写不能为空！")}}},_=o(4307);const E=(0,_.A)(C,[["render",v],["__scopeId","data-v-c756d6b0"]]);var U=E}}]);
//# sourceMappingURL=75.d8c567a6.js.map