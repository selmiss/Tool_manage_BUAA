{"remainingRequest":"D:\\Desktop\\git_clong\\Tool_manage_BUAA\\前端文件\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\git_clong\\Tool_manage_BUAA\\前端文件\\src\\views\\teacher_views\\ToolRecord.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Desktop\\git_clong\\Tool_manage_BUAA\\前端文件\\src\\views\\teacher_views\\ToolRecord.vue","mtime":1673701902165},{"path":"D:\\Desktop\\git_clong\\Tool_manage_BUAA\\前端文件\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1673701897175},{"path":"D:\\Desktop\\git_clong\\Tool_manage_BUAA\\前端文件\\node_modules\\babel-loader\\lib\\index.js","mtime":1673701896619},{"path":"D:\\Desktop\\git_clong\\Tool_manage_BUAA\\前端文件\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1673701897175},{"path":"D:\\Desktop\\git_clong\\Tool_manage_BUAA\\前端文件\\node_modules\\vue-loader\\lib\\index.js","mtime":1673701901619}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IFRlYWNoZXJIZWFkQmFyIGZyb20gIkAvY29tcG9uZW50cy9UZWFjaGVySGVhZEJhciI7DQppbXBvcnQgVGVhY2hlck1lbnUgZnJvbSAiQC9jb21wb25lbnRzL1RlYWNoZXJNZW51IjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgaW5qZWN0OiBbJ3JlbG9hZCddLA0KICBjb21wb25lbnRzOntUZWFjaGVySGVhZEJhcixUZWFjaGVyTWVudX0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5sb2FkTWVzc2FnZSgpDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRhYmxlRGF0YTogWw0KICAgICAgICB7DQogICAgICAgICAgdG9vbE5hbWU6ICIiLA0KICAgICAgICAgIHJlcXVlc3RVc2VyTmFtZToiIiwNCiAgICAgICAgICBzdGFydFRpbWU6IiIsDQogICAgICAgICAgcmV0dXJuVGltZTogIiIsDQogICAgICAgICAgc3R1aWQ6IiIsDQogICAgICAgICAgc3R1Q29sbGVnZToiIiwNCiAgICAgICAgICB1c2VySWQ6IiIsDQogICAgICAgICAgcGhvbmVOdW1iZXI6ICIiLA0KICAgICAgICAgIHN0dUVtYWlsOiIiLA0KICAgICAgICAgIGJvcnJvd0NvdW50OiIiLA0KICAgICAgICB9DQogICAgICBdLA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBoYW5kbGVDb25maXJtKGluZGV4LCByb3cpIHsNCiAgICAgIGNvbnNvbGUubG9nKGluZGV4LCByb3cpOw0KICAgICAgYXhpb3Moew0KCQkJCQl1cmw6ICdtYW5hZ2VyL3JldHVyblRvb2wnLA0KCQkJCQltZXRob2Q6ICdwb3N0JywNCgkJCQkJZGF0YTogew0KICAgICAgICAgICAgcmVxdWVzdElkOiByb3cucmVxdWVzdElkLA0KCQkJCQl9DQoJCQkJfSkudGhlbigocmVzcG9uc2UpID0+IHsNCgkJCQkJaWYgKHJlc3BvbnNlKSB7DQoJCQkJCQlpZiAocmVzcG9uc2UuZGF0YS5lcnJvcl9jb2RlID09PSAwKSB7DQoJCQkJCQkJY29uc29sZS5sb2coIuivpeiuvuWkh+W3suW9kui/mCIsIHJlc3BvbnNlLmRhdGEpOw0KICAgICAgICAgICAgICBhbGVydCgi6K+l6K6+5aSH5bey5b2S6L+YIik7DQogICAgICAgICAgICAgIHRoaXMucmVsb2FkKCkNCgkJCQkJCX0gZWxzZSB7DQoJCQkJCQkJY29uc29sZS5sb2coIuWuoeaJueWksei0pSIgKyByZXNwb25zZS5kYXRhKTsNCgkJCQkJCQlhbGVydCgi5a6h5om55aSx6LSl77yM6K+35qOA5p+l572R57ucIik7DQoJCQkJCQl9DQoJCQkJCX0gZWxzZSB7DQoJCQkJCQljb25zb2xlLmxvZygiZXJyb3IiICsgcmVzcG9uc2UuZGF0YSk7DQoJCQkJCQlhbGVydCgiZXJyb3IiKTsNCgkJCQkJfQ0KCQkJCX0pOw0KICAgIH0sDQogICAgbG9hZE1lc3NhZ2UoKSB7DQoJCQkJbGV0IHRoYXQgPSB0aGlzOw0KCQkJCWF4aW9zKHsNCgkJCQkJdXJsOiAnbWFuYWdlci9nZXRBbGxOZWVkUmV0dXJuTGlzdCcsDQoJCQkJCW1ldGhvZDogJ3Bvc3QnLA0KCQkJCQlkYXRhOiB7DQoJCQkJCX0NCgkJCQl9KS50aGVuKChyZXNwb25zZSkgPT4gew0KCQkJCQlpZiAocmVzcG9uc2UpIHsNCgkJCQkJCWlmIChyZXNwb25zZS5kYXRhLmVycm9yX2NvZGUgPT09IDApIHsNCgkJCQkJCQljb25zb2xlLmxvZygi6I635Y+W5oiQ5YqfIiwgcmVzcG9uc2UuZGF0YSk7DQogICAgICAgICAgICAgIHRoYXQudGFibGVEYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhX2xpc3Q7DQoJCQkJCQl9IGVsc2Ugew0KCQkJCQkJCWNvbnNvbGUubG9nKCLojrflj5blpLHotKUiICsgcmVzcG9uc2UuZGF0YSk7DQoJCQkJCQkJYWxlcnQoIuiOt+WPluWksei0pe+8jOivt+ajgOafpee9kee7nCIpOw0KCQkJCQkJfQ0KCQkJCQl9IGVsc2Ugew0KCQkJCQkJY29uc29sZS5sb2coIuiOt+WPluWksei0pSIgKyByZXNwb25zZS5kYXRhKTsNCgkJCQkJCWFsZXJ0KCLojrflj5blpLHotKXvvIzor7fmo4Dmn6XnvZHnu5wiKTsNCgkJCQkJfQ0KCQkJCX0pOw0KCQl9LA0KICB9DQp9Ow0K"},{"version":3,"sources":["ToolRecord.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ToolRecord.vue","sourceRoot":"src/views/teacher_views","sourcesContent":["<template>\r\n  <div>\r\n    <TeacherHeadBar></TeacherHeadBar>\r\n    <el-container>\r\n      <el-aside width=\"20%\" style=\"min-height: 600px;\" >\r\n        <TeacherMenu></TeacherMenu>\r\n      </el-aside>\r\n      <el-main width=\"75%\">\r\n        <div class=\"title\">待归还工具记录表</div>\r\n        <div style=\"margin: 0 auto; margin-top: 20px; align-items: center;\">\r\n          <el-card class=\"box-card\" style=\"width: 80%\">\r\n              <el-table :data=\"tableData\" style=\"width: 100%\" border>\r\n                <el-table-column align=\"center\" prop=\"toolName\" label=\"工具名称\" min-width=\"120\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"borrowCount\" label=\"借用数量\" min-width=\"110\"></el-table-column>\r\n                <el-table-column align=\"center\" label=\"借用者信息\" min-width=\"120\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-popover\r\n                      placement=\"bottom\"\r\n                      width=\"250\"\r\n                      trigger=\"click\">\r\n                      <div>{{ scope.row.requestUserName }} &nbsp &nbsp &nbsp &nbsp {{ scope.row.stuid }}</div>\r\n                      <div>学院: &nbsp &nbsp &nbsp &nbsp {{ scope.row.stuCollege }}</div>\r\n                      <div>联系邮箱: &nbsp{{ scope.row.stuEmail }}</div>\r\n                      <div>联系电话: &nbsp{{ scope.row.phoneNumber }}</div>\r\n                      <el-button size=\"mini\" slot=\"reference\">{{ scope.row.requestUserName }}</el-button>\r\n                    </el-popover>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column align=\"center\" prop=\"startTime\" label=\"借用开始时间\" min-width=\"110\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"returnTime\" label=\"最晚归还时间\" min-width=\"110\"> </el-table-column>\r\n                <el-table-column align=\"center\" label=\"操作\" min-width=\"130\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-button\r\n                      size=\"mini\"\r\n                      type=\"primary\"\r\n                      plain\r\n                      @click=\"handleConfirm(scope.$index, scope.row)\">确认归还</el-button>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n          </el-card>\r\n        </div>\r\n      </el-main>\r\n      <el-aside width=\"5%\"></el-aside>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport TeacherHeadBar from \"@/components/TeacherHeadBar\";\r\nimport TeacherMenu from \"@/components/TeacherMenu\";\r\nexport default {\r\n  inject: ['reload'],\r\n  components:{TeacherHeadBar,TeacherMenu},\r\n  mounted() {\r\n    this.loadMessage()\r\n  },\r\n  data() {\r\n    return {\r\n      tableData: [\r\n        {\r\n          toolName: \"\",\r\n          requestUserName:\"\",\r\n          startTime:\"\",\r\n          returnTime: \"\",\r\n          stuid:\"\",\r\n          stuCollege:\"\",\r\n          userId:\"\",\r\n          phoneNumber: \"\",\r\n          stuEmail:\"\",\r\n          borrowCount:\"\",\r\n        }\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    handleConfirm(index, row) {\r\n      console.log(index, row);\r\n      axios({\r\n\t\t\t\t\turl: 'manager/returnTool',\r\n\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\tdata: {\r\n            requestId: row.requestId,\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((response) => {\r\n\t\t\t\t\tif (response) {\r\n\t\t\t\t\t\tif (response.data.error_code === 0) {\r\n\t\t\t\t\t\t\tconsole.log(\"该设备已归还\", response.data);\r\n              alert(\"该设备已归还\");\r\n              this.reload()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(\"审批失败\" + response.data);\r\n\t\t\t\t\t\t\talert(\"审批失败，请检查网络\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"error\" + response.data);\r\n\t\t\t\t\t\talert(\"error\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n    },\r\n    loadMessage() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\taxios({\r\n\t\t\t\t\turl: 'manager/getAllNeedReturnList',\r\n\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((response) => {\r\n\t\t\t\t\tif (response) {\r\n\t\t\t\t\t\tif (response.data.error_code === 0) {\r\n\t\t\t\t\t\t\tconsole.log(\"获取成功\", response.data);\r\n              that.tableData = response.data.data_list;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(\"获取失败\" + response.data);\r\n\t\t\t\t\t\t\talert(\"获取失败，请检查网络\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"获取失败\" + response.data);\r\n\t\t\t\t\t\talert(\"获取失败，请检查网络\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t},\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n  .box-card{\r\n    margin-left: 100px;\r\n  }\r\n  .title {\r\n    color: rgb(225, 162, 80);\r\n    margin-bottom: 40px;\r\n    font-family: 微软雅黑;\r\n    word-wrap: break-word;\r\n    /* text-align: left; */\r\n    font-size: 25px;\r\n    font-weight: bold;\r\n  }\r\n</style>"]}]}