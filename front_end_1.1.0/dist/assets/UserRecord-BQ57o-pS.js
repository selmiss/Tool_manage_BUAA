import{T as B}from"./TeacherHeadBar-BCH8J0JN.js";import{T as N}from"./TeacherMenu-l0uX7cfN.js";import{_ as D,d as h,c as I,a as e,w as t,r as o,o as c,e as p,b as s,j as u,g as _,p as M,i as R}from"./index-BwCKoIWF.js";import"./headerLogo-CGJBKw5C.js";const F={components:{TeacherHeadBar:B,TeacherMenu:N},inject:["reload"],mounted(){this.loadMessage()},data(){return{dialogFormVisible:!1,tableRecordData:[{toolName:"",startTime:"",returnTime:"",requestId:"",status:""}],tableData:[{uid:"",name:"",phoneNumber:"",college:"",studentId:""}]}},methods:{handleCreate(a){this.dialogFormVisible=!0,this.tableRecordData=[];let d=this;console.log(a.uid),h({url:"manager/allBorrowList",method:"post",data:{uid:-2,stu_uid:a.uid}}).then(n=>{n?n.data.error_code===0?(console.log("获取成功",n.data),d.tableRecordData=n.data.requestList):(console.log("获取失败"+n.data),alert(a.uid+" 获取失败,error: "+n.data.error_code)):(console.log("获取失败"+n.data),alert("获取失败，请检查网络"))})},deleteUser(a){console.log(a);var d=a.uid;h({url:"manager/deleteStudent",method:"post",data:{uid:-2,stu_uid:d}}).then(n=>{this.reload(),alert("已删除该用户")})},loadMessage(){h({url:"manager/getStudentList",method:"post",data:{}}).then(a=>{this.tableData=a.data.dataList})}}},y=a=>(M("data-v-75d124f5"),a=a(),R(),a),S=y(()=>p("div",{class:"title",style:{"margin-top":"20px"}},"用户记录表",-1)),z={style:{margin:"0 auto","margin-top":"20px","align-items":"center"}},L=y(()=>p("div",{class:"title",style:{"margin-top":"0px"}},"工具借用记录表",-1)),U={style:{margin:"0 auto","align-items":"center"}};function H(a,d,n,j,m,g){const x=o("TeacherHeadBar"),T=o("TeacherMenu"),b=o("el-aside"),l=o("el-table-column"),r=o("el-button"),f=o("el-table"),w=o("el-card"),k=o("el-dialog"),v=o("el-main"),V=o("el-container");return c(),I("div",null,[e(x),e(V,null,{default:t(()=>[e(b,{width:"20%",style:{"min-height":"600px"}},{default:t(()=>[e(T)]),_:1}),e(v,{width:"75%"},{default:t(()=>[S,p("div",z,[e(w,{class:"box-card",style:{width:"80%"}},{default:t(()=>[e(f,{data:m.tableData,style:{width:"100%"},border:""},{default:t(()=>[e(l,{type:"index",index:a.indexMethod,align:"center"},null,8,["index"]),e(l,{align:"center",prop:"name",label:"用户名","min-width":"50"}),e(l,{align:"center",prop:"phoneNumber",label:"手机号","min-width":"80"}),e(l,{align:"center",prop:"studentId",label:"学号","min-width":"60"}),e(l,{align:"center",prop:"college",label:"学院","min-width":"50"}),e(l,{align:"center",label:"操作","min-width":"160"},{default:t(i=>[e(r,{type:"primary",plain:"",onClick:C=>g.handleCreate(i.row)},{default:t(()=>[s("查看记录")]),_:2},1032,["onClick"]),e(r,{type:"danger",plain:"",onClick:C=>g.deleteUser(i.row)},{default:t(()=>[s("删除用户")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(k,{modelValue:m.dialogFormVisible,"onUpdate:modelValue":d[0]||(d[0]=i=>m.dialogFormVisible=i)},{default:t(()=>[L,p("div",U,[e(w,{class:"box-card",style:{width:"80%"}},{default:t(()=>[e(f,{data:m.tableRecordData,style:{width:"100%"},border:""},{default:t(()=>[e(l,{align:"center",prop:"toolName",label:"工具名称","min-width":"120"}),e(l,{align:"center",prop:"startTime",label:"借用开始时间","min-width":"100"}),e(l,{align:"center",prop:"returnTime",label:"最晚归还时间","min-width":"100"}),e(l,{align:"center",label:"状态","min-width":"120"},{default:t(i=>[i.row.status==="A"?(c(),u(r,{key:0,size:"mini",type:"warning"},{default:t(()=>[s("工具借用中")]),_:1})):_("",!0),i.row.status==="W"?(c(),u(r,{key:1,size:"mini",type:"primary"},{default:t(()=>[s("等待审核中")]),_:1})):_("",!0),i.row.status==="R"?(c(),u(r,{key:2,size:"mini",type:"danger"},{default:t(()=>[s("申请被拒绝")]),_:1})):_("",!0),i.row.status==="F"?(c(),u(r,{key:3,size:"mini",type:"success"},{default:t(()=>[s("工具已归还")]),_:1})):_("",!0)]),_:1})]),_:1},8,["data"])]),_:1})])]),_:1},8,["modelValue"])]),_:1})])]),_:1}),e(b,{width:"5%"})]),_:1})])}const G=D(F,[["render",H],["__scopeId","data-v-75d124f5"]]);export{G as default};
