import{T as x}from"./TeacherHeadBar-dz4hO6k4.js";import{T as I}from"./TeacherMenu-Bq3oTJu6.js";import{_ as k,d as r,c as y,a as e,w as c,r as l,o as B,e as m,b as h,p as C,i as A}from"./index-BBbOrejx.js";import"./headerLogo-CGJBKw5C.js";const S={inject:["reload"],components:{TeacherHeadBar:x,TeacherMenu:I},mounted(){this.loadTable()},data(){return{tchData:[{name:"",teacherId:"",acc:"",uid:""}]}},methods:{loadTable(){let o=this;r({method:"post",url:"/manager/getTeacherApproveList",data:{}}).then(a=>{a&&a.data.error_code===0?(console.log("获取成功",a.data),o.tchData=a.data.dataList):(console.log("获取失败"+a.data),alert("获取失败，请检查网络"))})},handleAgree(o,a){console.log(o,a),r.post("manager/approveTeacher",{uid:localStorage.getItem("uid"),teacherId:a.uid,status:"Accept"}).then(t=>{t?t.data.error_code===0?(console.log("已添加该教师"),alert("已添加该教师"),this.reload()):(console.log("审批失败"+t.data),alert("error"+t.data.error_code)):(console.log("审批失败，请检查网络"+t.data),alert("审批失败，请检查网络"))})},handleRefuse(o,a){console.log(o,a),r({url:"manager/approveTeacher",method:"post",data:{uid:localStorage.getItem("uid"),teacherId:a.uid,status:"Refuse"}}).then(t=>{t?t.data.error_code===0?(console.log("已拒绝该申请",t.data),alert("已拒绝该申请"),this.reload()):(console.log("审批失败"+t.data),alert("error"+t.data.error_code)):(console.log("审批失败，请检查网络"+t.data),alert("审批失败，请检查网络"))})}}},$=o=>(C("data-v-c2dae3a4"),o=o(),A(),o),D=$(()=>m("div",{class:"title"},"教师添加",-1)),H={style:{margin:"0 auto","margin-top":"20px","align-items":"center"}};function M(o,a,t,N,u,i){const p=l("TeacherHeadBar"),g=l("TeacherMenu"),s=l("el-aside"),d=l("el-table-column"),_=l("el-button"),f=l("el-table"),b=l("el-card"),T=l("el-main"),w=l("el-container");return B(),y("div",null,[e(p),e(w,null,{default:c(()=>[e(s,{width:"20%",style:{"min-height":"600px"}},{default:c(()=>[e(g)]),_:1}),e(T,{width:"75%"},{default:c(()=>[D,m("div",H,[e(b,{class:"box-card",style:{width:"90%"}},{default:c(()=>[e(f,{data:u.tchData,style:{width:"100%"},border:""},{default:c(()=>[e(d,{align:"center",prop:"name",label:"教师信息","min-width":"150"}),e(d,{align:"center",prop:"teacherId",label:"工号","min-width":"170"}),e(d,{align:"center",prop:"acc",label:"邮箱","min-width":"170"}),e(d,{align:"center",label:"操作","min-width":"200"},{default:c(n=>[e(_,{size:"mini",type:"success",plain:"",onClick:v=>i.handleAgree(n.$index,n.row)},{default:c(()=>[h("同意添加")]),_:2},1032,["onClick"]),e(_,{size:"mini",type:"danger",plain:"",onClick:v=>i.handleRefuse(n.$index,n.row)},{default:c(()=>[h("拒绝添加")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])]),_:1}),e(s,{width:"5%"})]),_:1})])}const j=k(S,[["render",M],["__scopeId","data-v-c2dae3a4"]]);export{j as default};
