System.register(["./index-legacy-D4Q9cYOW.js"],(function(e,t){"use strict";var o,r,a,s,i,n,l,d,c,h,m,u,p;return{setters:[e=>{o=e._,r=e.a,a=e.c,s=e.b,i=e.n,n=e.w,l=e.v,d=e.d,c=e.e,h=e.t,m=e.o,u=e.p,p=e.g}],execute:function(){var t=document.createElement("style");t.textContent=".login-register[data-v-56c8e9c9]{width:100vw;height:100vh;box-sizing:border-box;background-image:url(/MainMenu.jpeg);background-size:1920px 980px}.contain[data-v-56c8e9c9]{width:60%;height:60%;position:relative;top:40%;left:50%;transform:translate(-50%,-50%);background-color:#fff;border-radius:20px;box-shadow:0 0 3px #f0f0f0,0 0 6px #f0f0f0}.big-box[data-v-56c8e9c9]{width:70%;height:100%;position:absolute;top:0;left:30%;transform:translate(0);transition:all 1s}.big-contain[data-v-56c8e9c9]{margin-top:8%;width:100%;height:100%;flex-direction:column;justify-content:center;align-items:center}.btitle[data-v-56c8e9c9]{font-size:1.5em;font-weight:700;color:#dd6f08}.bform[data-v-56c8e9c9]{width:100%;height:40%;padding:2em 0;display:flex;flex-direction:column;justify-content:space-around;align-items:center}.bform button[data-v-56c8e9c9]{width:20%;height:32px;align-items:center;border-radius:9px;border:1px solid rgb(207,186,141);outline:none;background-color:transparent;color:#d6560c;font-size:.9em;cursor:pointer}.bform .errTips[data-v-56c8e9c9]{display:block;width:50%;text-align:left;color:red;font-size:.7em;margin-left:1em}.bform input[data-v-56c8e9c9]{width:50%;height:30px;border:none;outline:none;border-radius:10px;padding-left:2em;background-color:#f0f0f0}.bbutton[data-v-56c8e9c9]{width:20%;height:40px;border-radius:24px;border:none;outline:none;background-color:#e4771e;color:#fff;font-size:.9em;cursor:pointer}.small-box[data-v-56c8e9c9]{width:30%;height:100%;background:linear-gradient(135deg,#eb9648,#d15706);position:absolute;top:0;left:0;transform:translate(0);transition:all 1s;border-top-left-radius:inherit;border-bottom-left-radius:inherit}.small-contain[data-v-56c8e9c9]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.stitle[data-v-56c8e9c9]{font-size:1.5em;font-weight:700;color:#fff}.scontent[data-v-56c8e9c9]{font-size:.8em;color:#fff;text-align:center;padding:2em 4em;line-height:1.7em}.sbutton[data-v-56c8e9c9]{width:60%;height:40px;border-radius:24px;border:1px solid #fff;outline:none;background-color:transparent;color:#fff;font-size:.9em;cursor:pointer}.big-box.active[data-v-56c8e9c9]{left:0;transition:all .5s}.small-box.active[data-v-56c8e9c9]{left:100%;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:inherit;border-bottom-right-radius:inherit;transform:translate(-100%);transition:all 1s}.header[data-v-56c8e9c9]{height:50px;display:flex;color:#0ff}\n",document.head.appendChild(t);const f={name:"login-register",data:()=>({isLogin:!0,stateReg:!1,emailError:!1,passwordError:!1,existed:!1,form:{name:"",tid:"",email:"",password:"",password2:"",phone:""},show:!0,count:"",timer:null}),methods:{studentEntry(){this.$router.push("/studentLogin")},changeType(){this.isLogin=!this.isLogin,this.stateReg=!1,this.form.tid="",this.form.name="",this.form.email="",this.form.password=""},teacherForgetPwd(){this.$router.push("/teacherForgetPwd")},sendCode(){this.timer||(console.log("已发送"),r({method:"post",url:"user/forget/sendCode",data:{acc:this.form.phone}}).then((e=>{console.log(e.error_code),alert("验证码已发送，请在手机信息中查看。")})),this.count=60,this.show=!1,this.timer=setInterval((()=>{this.count>0&&this.count<=60?this.count--:(this.show=!0,clearInterval(this.timer),this.timer=null)}),1e3))},changeRegState(){""!=this.form.sid&&""!=this.form.name&&""!=this.form.college?this.stateReg=!this.stateReg:alert("填写不能为空！")},changePwd(){""!=this.form.email&&""!=this.form.password&&r({method:"post",url:"manager/resetPwd",data:{uid:this.userId,old_pwd:this.form.password,new_pwd:this.new_password}}).then((e=>{switch(e.error_code){case 0:alert("登录成功");break;case 1:alert("请求参数错误");break;case 2:alert("原密码错误");break;case 3:alert("新密码格式错误");break;case 4:alert("用户不存在")}}))},login(){localStorage.setItem("token","wutoken");var e=localStorage.getItem("token");console.log(e),""!=this.form.email&&""!=this.form.password?r.post("manager/Login",{acc:this.form.email,pwd:this.form.password}).then((e=>{console.log(r.defaults.baseURL);let t={};t.Mail=this.form.email,t.UID=e.data.uid,t.hash_code=e.data.hash_code,console.log(t.hash_code),0==e.data.error_code?(localStorage.setItem("uid",e.data.uid),localStorage.setItem("Mail",this.form.email),localStorage.setItem("isSuperUser",e.data.is_superUser),localStorage.setItem("token",e.data.hash_code),e.data.is_superUser?(this.$router.push("/borrowProcessing"),this.$store.commit("changeLogin",t)):(this.$router.push("/settools"),this.$store.commit("changeLogin",t))):1==e.data.error_code?alert("存在输入为空！"):2==e.data.error_code?alert("用户不存在！"):3==e.data.error_code?alert("密码错误！请重新输入。"):alert("请重新输入！")})):alert("填写不能为空")},register(){console.log(this.form.phone+" : "+this.form.tid),""!=this.form.password&&""!=this.form.email?this.form.password!=this.form.password2?alert("两次密码输入不一致。"):r({method:"post",url:"manager/RegisterTeacherAcc",data:{acc:this.form.email,teacherId:this.form.tid,name:this.form.name,pwd:this.form.password,phoneNumber:this.form.phone}}).then((e=>{console.log(e),0==e.data.error_code&&(alert("您的注册请求已提交！请等待管理员审核。"),this.changeType()),1==e.data.error_code&&alert("输入有误！请检查并重新输入"),2==e.data.error_code&&alert("该邮箱已注册！")})):alert("填写不能为空！")}}},g=e=>(u("data-v-56c8e9c9"),e=e(),p(),e),b={class:"login-register"},w=g((()=>s("div",{class:"header"},null,-1))),v={class:"contain"},x={key:0,class:"big-contain"},y=g((()=>s("div",{class:"btitle"},"教师登录",-1))),k={class:"bform"},_={key:0,class:"errTips"},C={key:1,class:"errTips"},S={key:1,class:"big-contain"},U={key:0},I=g((()=>s("div",{class:"btitle"},"教师注册",-1))),L=g((()=>s("br",null,null,-1))),R={class:"bform"},T=g((()=>s("br",null,null,-1))),E={key:0,class:"errTips"},z=g((()=>s("br",null,null,-1))),V=g((()=>s("br",null,null,-1))),P=g((()=>s("br",null,null,-1))),$={key:1},j={class:"btitle"},F={class:"bform"},M=g((()=>s("br",null,null,-1))),A=g((()=>s("br",null,null,-1))),D={key:0,class:"small-contain"},N=g((()=>s("div",{class:"stitle"},[c("北航工程训练中心"),s("br"),c("工具信息平台")],-1))),q=g((()=>s("p",{class:"scontent"},[c("请输入您的邮箱"),s("br"),c("或管理员账号")],-1))),B=g((()=>s("br",null,null,-1))),G={key:1,class:"small-contain"},H=g((()=>s("div",{class:"stitle"},"老师，您好！",-1))),J=g((()=>s("p",{class:"scontent"},[c("注册工训中心账号，"),s("br"),c("轻松管理设备借还。")],-1))),K=g((()=>s("br",null,null,-1)));e("default",o(f,[["render",function(e,t,o,r,u,p){return m(),a("div",b,[w,s("div",v,[s("div",{class:i(["big-box",{active:u.isLogin}])},[u.isLogin?(m(),a("div",x,[y,s("div",k,[n(s("input",{type:"email",placeholder:"邮箱","onUpdate:modelValue":t[0]||(t[0]=e=>u.form.email=e)},null,512),[[l,u.form.email]]),u.emailError?(m(),a("span",_,"* 邮箱填写错误 *")):d("",!0),n(s("input",{type:"password",placeholder:"密码","onUpdate:modelValue":t[1]||(t[1]=e=>u.form.password=e)},null,512),[[l,u.form.password]]),u.emailError?(m(),a("span",C,"* 密码填写错误 *")):d("",!0)]),s("button",{class:"bbutton",onClick:t[2]||(t[2]=(...e)=>p.login&&p.login(...e))},"登录"),c("   "),s("button",{class:"bbutton",onClick:t[3]||(t[3]=(...e)=>p.teacherForgetPwd&&p.teacherForgetPwd(...e))},"忘记密码")])):(m(),a("div",S,[u.stateReg?(m(),a("div",$,[s("div",j,"欢迎，"+h(this.form.name)+"老师！",1),s("div",F,[n(s("input",{type:"text",placeholder:"手机号","onUpdate:modelValue":t[8]||(t[8]=e=>u.form.phone=e)},null,512),[[l,u.form.phone]]),M,n(s("input",{type:"password",placeholder:"密码","onUpdate:modelValue":t[9]||(t[9]=e=>u.form.password=e)},null,512),[[l,u.form.password]]),A,n(s("input",{type:"password",placeholder:"确认密码","onUpdate:modelValue":t[10]||(t[10]=e=>u.form.password2=e)},null,512),[[l,u.form.password2]])]),s("button",{class:"bbutton",onClick:t[11]||(t[11]=(...e)=>p.changeRegState&&p.changeRegState(...e))},"上一步"),c("  "),s("button",{class:"bbutton",onClick:t[12]||(t[12]=(...e)=>p.register&&p.register(...e))},"注册")])):(m(),a("div",U,[I,L,s("div",R,[n(s("input",{type:"text",placeholder:"工号","onUpdate:modelValue":t[4]||(t[4]=e=>u.form.tid=e)},null,512),[[l,u.form.tid]]),T,u.existed?(m(),a("span",E,"* 该工号已经注册！ *")):d("",!0),n(s("input",{type:"text",placeholder:"姓名","onUpdate:modelValue":t[5]||(t[5]=e=>u.form.name=e)},null,512),[[l,u.form.name]]),z,n(s("input",{type:"text",placeholder:"邮箱","onUpdate:modelValue":t[6]||(t[6]=e=>u.form.email=e)},null,512),[[l,u.form.email]]),V]),P,s("button",{class:"bbutton",onClick:t[7]||(t[7]=(...e)=>p.changeRegState&&p.changeRegState(...e))},"下一步")]))]))],2),s("div",{class:i(["small-box",{active:u.isLogin}])},[u.isLogin?(m(),a("div",D,[N,q,s("button",{class:"sbutton",onClick:t[13]||(t[13]=(...e)=>p.changeType&&p.changeType(...e))},"前往注册"),B,s("button",{class:"sbutton",onClick:t[14]||(t[14]=(...e)=>p.studentEntry&&p.studentEntry(...e))},"学生入口")])):(m(),a("div",G,[H,J,s("button",{class:"sbutton",onClick:t[15]||(t[15]=(...e)=>p.changeType&&p.changeType(...e))},"前往登录"),K,s("button",{class:"sbutton",onClick:t[16]||(t[16]=(...e)=>p.studentEntry&&p.studentEntry(...e))},"学生入口")]))],2)])])}],["__scopeId","data-v-56c8e9c9"]]))}}}));
