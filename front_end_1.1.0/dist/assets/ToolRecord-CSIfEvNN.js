import{_ as x,d as _,c as C,a as e,w as t,r as o,o as y,e as c,t as d,b as u,p as I,i as B}from"./index-BBbOrejx.js";import{T as k}from"./TeacherHeadBar-dz4hO6k4.js";import{T as q}from"./TeacherMenu-Bq3oTJu6.js";import"./headerLogo-CGJBKw5C.js";const M={inject:["reload"],components:{TeacherHeadBar:k,TeacherMenu:q},mounted(){this.loadMessage()},data(){return{tableData:[{toolName:"",requestUserName:"",startTime:"",returnTime:"",stuid:"",stuCollege:"",userId:"",phoneNumber:"",stuEmail:"",borrowCount:""}]}},methods:{handleConfirm(n,a){console.log(n,a),_({url:"manager/returnTool",method:"post",data:{requestId:a.requestId}}).then(r=>{r?r.data.error_code===0?(console.log("该设备已归还",r.data),alert("该设备已归还"),this.reload()):(console.log("审批失败"+r.data),alert("审批失败，请检查网络")):(console.log("error"+r.data),alert("error"))})},loadMessage(){let n=this;_({url:"manager/getAllNeedReturnList",method:"post",data:{}}).then(a=>{a&&a.data.error_code===0?(console.log("获取成功",a.data),n.tableData=a.data.data_list):(console.log("获取失败"+a.data),alert("获取失败，请检查网络"))})}}},D=n=>(I("data-v-220a09e9"),n=n(),B(),n),S=D(()=>c("div",{class:"title"},"待归还工具记录表",-1)),$={style:{margin:"0 auto","margin-top":"20px","align-items":"center"}};function E(n,a,r,H,h,p){const g=o("TeacherHeadBar"),f=o("TeacherMenu"),s=o("el-aside"),i=o("el-table-column"),m=o("el-button"),b=o("el-popover"),w=o("el-table"),T=o("el-card"),v=o("el-main"),N=o("el-container");return y(),C("div",null,[e(g),e(N,null,{default:t(()=>[e(s,{width:"20%",style:{"min-height":"600px"}},{default:t(()=>[e(f)]),_:1}),e(v,{width:"75%"},{default:t(()=>[S,c("div",$,[e(T,{class:"box-card",style:{width:"80%"}},{default:t(()=>[e(w,{data:h.tableData,style:{width:"100%"},border:""},{default:t(()=>[e(i,{align:"center",prop:"toolName",label:"工具名称","min-width":"120"}),e(i,{align:"center",prop:"borrowCount",label:"借用数量","min-width":"110"}),e(i,{align:"center",label:"借用者信息","min-width":"120"},{default:t(l=>[e(b,{trigger:"click",placement:"bottom",width:"250"},{default:t(()=>[c("div",null,d(l.row.requestUserName)+"       "+d(l.row.stuid),1),c("div",null,"学院:         "+d(l.row.stuCollege),1),c("div",null,"联系邮箱:  "+d(l.row.stuEmail),1),c("div",null,"联系电话:  "+d(l.row.phoneNumber),1)]),reference:t(()=>[e(m,{size:"mini",slot:"reference"},{default:t(()=>[u(d(l.row.requestUserName),1)]),_:2},1024)]),_:2},1024)]),_:1}),e(i,{align:"center",prop:"startTime",label:"借用开始时间","min-width":"110"}),e(i,{align:"center",prop:"returnTime",label:"最晚归还时间","min-width":"110"}),e(i,{align:"center",label:"操作","min-width":"130"},{default:t(l=>[e(m,{size:"mini",type:"primary",plain:"",onClick:U=>p.handleConfirm(l.$index,l.row)},{default:t(()=>[u("确认归还")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])]),_:1}),e(s,{width:"5%"})]),_:1})])}const A=x(M,[["render",E],["__scopeId","data-v-220a09e9"]]);export{A as default};
