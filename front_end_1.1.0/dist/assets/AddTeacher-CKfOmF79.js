import{T as x}from"./TeacherHeadBar-C0OQFf9M.js";import{T as I}from"./TeacherMenu-DvXlsAtX.js";import{_ as k,a as r,r as o,c as y,h as a,i as l,o as B,b as m,e as h,p as C,g as A}from"./index-B3rJzjPI.js";import"./headerLogo-CGJBKw5C.js";const S={inject:["reload"],components:{TeacherHeadBar:x,TeacherMenu:I},mounted(){this.loadTable()},data(){return{tchData:[{name:"",teacherId:"",acc:"",uid:""}]}},methods:{loadTable(){r({method:"post",url:"/manager/getTeacherApproveList",data:{}}).then(e=>{e&&e.data.error_code===0?(console.log("获取成功",e.data),this.tchData=e.data.dataList):(console.log("获取失败"+e.data),alert("获取失败，请检查网络"))})},handleAgree(e,c){console.log(e,c),r.post("manager/approveTeacher",{uid:localStorage.getItem("uid"),teacherId:c.uid,status:"Accept"}).then(t=>{t?t.data.error_code===0?(console.log("已添加该教师"),alert("已添加该教师"),this.reload()):(console.log("审批失败"+t.data),alert("error"+t.data.error_code)):(console.log("审批失败，请检查网络"+t.data),alert("审批失败，请检查网络"))})},handleRefuse(e,c){console.log(e,c),r({url:"manager/approveTeacher",method:"post",data:{uid:localStorage.getItem("uid"),teacherId:c.uid,status:"Refuse"}}).then(t=>{t?t.data.error_code===0?(console.log("已拒绝该申请",t.data),alert("已拒绝该申请"),this.reload()):(console.log("审批失败"+t.data),alert("error"+t.data.error_code)):(console.log("审批失败，请检查网络"+t.data),alert("审批失败，请检查网络"))})}}},$=e=>(C("data-v-dfe15098"),e=e(),A(),e),D=$(()=>m("div",{class:"title"},"教师添加",-1)),H={style:{margin:"0 auto","margin-top":"20px","align-items":"center"}};function M(e,c,t,N,u,i){const p=o("TeacherHeadBar"),g=o("TeacherMenu"),s=o("el-aside"),d=o("el-table-column"),_=o("el-button"),f=o("el-table"),b=o("el-card"),T=o("el-main"),v=o("el-container");return B(),y("div",null,[a(p),a(v,null,{default:l(()=>[a(s,{width:"20%",style:{"min-height":"600px"}},{default:l(()=>[a(g)]),_:1}),a(T,{width:"75%"},{default:l(()=>[D,m("div",H,[a(b,{class:"box-card",style:{width:"90%"}},{default:l(()=>[a(f,{data:u.tchData,style:{width:"100%"},border:""},{default:l(()=>[a(d,{align:"center",prop:"name",label:"教师信息","min-width":"150"}),a(d,{align:"center",prop:"teacherId",label:"工号","min-width":"170"}),a(d,{align:"center",prop:"acc",label:"邮箱","min-width":"170"}),a(d,{align:"center",label:"操作","min-width":"200"},{default:l(n=>[a(_,{size:"mini",type:"success",plain:"",onClick:w=>i.handleAgree(n.$index,n.row)},{default:l(()=>[h("同意添加")]),_:2},1032,["onClick"]),a(_,{size:"mini",type:"danger",plain:"",onClick:w=>i.handleRefuse(n.$index,n.row)},{default:l(()=>[h("拒绝添加")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])]),_:1}),a(s,{width:"5%"})]),_:1})])}const j=k(S,[["render",M],["__scopeId","data-v-dfe15098"]]);export{j as default};
