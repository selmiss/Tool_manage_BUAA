import{T as B}from"./TeacherHeadBar-Cmev-W7V.js";import{T as N}from"./TeacherMenu-yB-Pn6uT.js";import{_ as R,a as g,E as _,r as i,c as F,h as e,i as t,o as c,b as h,e as s,j as u,d as p,p as I,g as z}from"./index-BiNYOpqX.js";import"./headerLogo-CGJBKw5C.js";const M={components:{TeacherHeadBar:B,TeacherMenu:N},inject:["reload"],mounted(){this.loadData()},data(){return{dialogFormVisible:!1,tableRecordData:[{toolName:"",startTime:"",returnTime:"",requestId:"",status:""}],tableData:[{id:"",name:"",phone:"",college:"",student_id:"",email:""}]}},methods:{handleCreate(a){this.dialogFormVisible=!0,this.tableRecordData=[];let r=this;console.log(a.id),g({url:"manager/allBorrowList",method:"post",data:{uid:-2,stu_uid:a.id}}).then(l=>{l?l.data.error_code===0?(console.log("获取成功",l.data),r.tableRecordData=l.data.requestList):(console.log("获取失败"+l.data),alert(a.uid+" 获取失败,error: "+l.data.error_code)):(console.log("获取失败"+l.data),alert("获取失败，请检查网络"))})},deleteUser(a){var r=a.id;g.delete("users/"+r).then(l=>{_.success(l.data.msg),this.reload()}).catch(l=>{_.error(l)})},loadData(){g.get("users").then(a=>{this.tableData=a.data.data,_.success(a.data.msg)}).catch(a=>{_.error(a)})}}},x=a=>(I("data-v-1bb6907c"),a=a(),z(),a),U=x(()=>h("div",{class:"title",style:{"margin-top":"20px"}},"用户记录表",-1)),E={style:{margin:"0 auto","margin-top":"20px","align-items":"center"}},H=x(()=>h("div",{class:"title",style:{"margin-top":"0px"}},"工具借用记录表",-1)),S={style:{margin:"0 auto","align-items":"center"}};function j(a,r,l,q,m,b){const T=i("TeacherHeadBar"),k=i("TeacherMenu"),f=i("el-aside"),o=i("el-table-column"),d=i("el-button"),w=i("el-table"),y=i("el-card"),v=i("el-dialog"),V=i("el-main"),C=i("el-container");return c(),F("div",null,[e(T),e(C,null,{default:t(()=>[e(f,{width:"20%",style:{"min-height":"600px"}},{default:t(()=>[e(k)]),_:1}),e(V,{width:"75%"},{default:t(()=>[U,h("div",E,[e(y,{class:"box-card",style:{width:"80%"}},{default:t(()=>[e(w,{data:m.tableData,style:{width:"100%"},border:""},{default:t(()=>[e(o,{type:"index",align:"center"}),e(o,{align:"center",prop:"name",label:"用户名","min-width":"50"}),e(o,{align:"center",prop:"phone",label:"手机号","min-width":"80"}),e(o,{align:"center",prop:"student_id",label:"学号","min-width":"60"}),e(o,{align:"center",prop:"college",label:"学院","min-width":"50"}),e(o,{align:"center",label:"操作","min-width":"160"},{default:t(n=>[e(d,{type:"primary",plain:"",onClick:D=>b.handleCreate(n.row)},{default:t(()=>[s("查看记录")]),_:2},1032,["onClick"]),e(d,{type:"danger",plain:"",onClick:D=>b.deleteUser(n.row)},{default:t(()=>[s("删除用户")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(v,{modelValue:m.dialogFormVisible,"onUpdate:modelValue":r[0]||(r[0]=n=>m.dialogFormVisible=n)},{default:t(()=>[H,h("div",S,[e(y,{class:"box-card",style:{width:"80%"}},{default:t(()=>[e(w,{data:m.tableRecordData,style:{width:"100%"},border:""},{default:t(()=>[e(o,{align:"center",prop:"toolName",label:"工具名称","min-width":"120"}),e(o,{align:"center",prop:"startTime",label:"借用开始时间","min-width":"100"}),e(o,{align:"center",prop:"returnTime",label:"最晚归还时间","min-width":"100"}),e(o,{align:"center",label:"状态","min-width":"120"},{default:t(n=>[n.row.status==="A"?(c(),u(d,{key:0,size:"mini",type:"warning"},{default:t(()=>[s("工具借用中")]),_:1})):p("",!0),n.row.status==="W"?(c(),u(d,{key:1,size:"mini",type:"primary"},{default:t(()=>[s("等待审核中")]),_:1})):p("",!0),n.row.status==="R"?(c(),u(d,{key:2,size:"mini",type:"danger"},{default:t(()=>[s("申请被拒绝")]),_:1})):p("",!0),n.row.status==="F"?(c(),u(d,{key:3,size:"mini",type:"success"},{default:t(()=>[s("工具已归还")]),_:1})):p("",!0)]),_:1})]),_:1},8,["data"])]),_:1})])]),_:1},8,["modelValue"])]),_:1})])]),_:1}),e(f,{width:"5%"})]),_:1})])}const J=R(M,[["render",j],["__scopeId","data-v-1bb6907c"]]);export{J as default};
