(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ae43e05"],{"26d3":function(e,t,o){"use strict";o("3c82")},"3c82":function(e,t,o){},fd85:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-register"},[t("div",{staticClass:"contain"},[t("div",{staticClass:"big-box",class:{active:e.isLogin}},[e.isLogin?t("div",{staticClass:"big-contain"},[t("div",{staticClass:"btitle"},[e._v("用户登录")]),t("div",{staticClass:"bform"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],attrs:{type:"email",placeholder:"请输入用户名"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}}),e.emailError?t("span",{staticClass:"errTips"},[e._v("* 邮箱填写错误 *")]):e._e(),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}}),e.emailError?t("span",{staticClass:"errTips"},[e._v("* 密码填写错误 *")]):e._e()]),t("button",{staticClass:"bbutton",on:{click:e.login}},[e._v("登录")]),e._v("   "),t("span",{on:{click:e.studentForgetPwd}},[e._v("忘记密码")])]):t("div",{staticClass:"big-contain"},[e.stateReg?t("div",[t("div",{staticClass:"btitle"},[e._v("欢迎！"+e._s(this.form.name))]),t("div",{staticClass:"bform"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.phone,expression:"form.phone"}],attrs:{type:"text",placeholder:"手机号码"},domProps:{value:e.form.phone},on:{input:function(t){t.target.composing||e.$set(e.form,"phone",t.target.value)}}}),t("br"),t("button",{on:{click:e.sendCode}},[e._v("获取验证码"),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count"},[e._v(" "+e._s(e.count)+" s")])]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.code,expression:"form.code"}],attrs:{type:"code",placeholder:"验证码"},domProps:{value:e.form.code},on:{input:function(t){t.target.composing||e.$set(e.form,"code",t.target.value)}}}),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}}),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password2,expression:"form.password2"}],attrs:{type:"password",placeholder:"确认密码"},domProps:{value:e.form.password2},on:{input:function(t){t.target.composing||e.$set(e.form,"password2",t.target.value)}}})]),t("button",{staticClass:"bbutton",on:{click:e.changeRegState}},[e._v("上一步")]),e._v("  "),t("button",{staticClass:"bbutton",on:{click:e.register}},[e._v("注册")])]):t("div",[t("div",{staticClass:"btitle"},[e._v("用户注册")]),t("div",{staticClass:"bform"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.sid,expression:"form.sid"}],attrs:{type:"text",placeholder:"学号"},domProps:{value:e.form.sid},on:{input:function(t){t.target.composing||e.$set(e.form,"sid",t.target.value)}}}),t("br"),e.existed?t("span",{staticClass:"errTips"},[e._v("* 该学号已经注册！ *")]):e._e(),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],attrs:{type:"text",placeholder:"姓名"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}}),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.college,expression:"form.college"}],attrs:{type:"text",placeholder:"学院"},domProps:{value:e.form.college},on:{input:function(t){t.target.composing||e.$set(e.form,"college",t.target.value)}}}),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],attrs:{type:"email",placeholder:"邮箱"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}}),t("br"),e._v(" 请确认您的个人信息无误。 ")]),t("button",{staticClass:"bbutton",on:{click:e.changeRegState}},[e._v("下一步")])])])])])])},r=[],a=(o("cdf1"),o("8aad")),i=o.n(a),l={name:"login-register",data(){return{isLogin:!0,stateReg:!1,emailError:!1,passwordError:!1,existed:!1,form:{name:"",sid:"",college:"",email:"",password:"",code:"",phone:""},show:!0,count:"",timer:null}},methods:{sendCode(){const e=60;this.timer||(console.log("已发送"),i()({method:"post",url:"http://10.212.87.185/user/forget/sendCode",data:{acc:this.form.phone}}).then(e=>{console.log(e.data.error_code),alert("验证码已发送，请在手机信息中查看。")}),this.count=e,this.show=!1,this.timer=setInterval(()=>{this.count>0&&this.count<=e?this.count--:(this.show=!0,clearInterval(this.timer),this.timer=null)},1e3))},studentForgetPwd(){this.$router.push("/studentForgetPwd")},changeType(){this.isLogin=!this.isLogin,this.stateReg=!1,this.form.sid="",this.form.name="",this.form.college="",this.form.email="",this.form.password=""},teacherEntry(){this.$router.push("/teacherLogin")},changeRegState(){""!=this.form.sid&&""!=this.form.name&&""!=this.form.college?this.stateReg=!this.stateReg:alert("填写不能为空！")},login(){console.log(this.form.email+" : "+this.form.password),""!=this.form.email&&""!=this.form.password?i()({method:"post",url:"http://10.212.87.185/user/login",data:{acc:this.form.email,pwd:this.form.password}}).then(e=>{0==e.data.error_code?(localStorage.setItem("uid",e.data.uid),localStorage.setItem("Mail",this.form.email),alert("登录成功！"),this.$router.push("/borrowRecord")):1==e.data.error_code?alert("输入有误！请重新登录。"):2==e.data.error_code?alert("请先进行注册！"):3==e.data.error_code&&alert("密码错误！请重新输入")}).catch(e=>{console.log(e)}):alert("填写不能为空！")},register(){console.log(this.form.email+" : "+this.form.password),""!=this.form.password&&""!=this.form.email?i()({method:"post",url:"http://10.212.87.185/user/register",data:{studentId:this.form.sid,name:this.form.name,college:this.form.college,acc:this.form.email,pwd:this.form.password,key:this.form.code,phoneNumber:this.form.phone}}).then(e=>{console.log(e.data.error_code),0==e.data.error_code?this.changeType():1==e.data.error_code?alert("输入有误，请重新输入。"):2==e.data.error_code?alert("该邮箱已注册。"):3==e.data.error_code?alert("请输入正确验证码"):4==e.data.error_code&&alert("验证码错误，请重新输入!")}).catch(e=>{console.log(e)}):alert("填写不能为空！")}}},n=l,m=(o("26d3"),o("847b")),d=Object(m["a"])(n,s,r,!1,null,"93419220",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-7ae43e05.b44ca760.js.map