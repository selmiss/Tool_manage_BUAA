(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44dba0ce"],{"624b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("TeacherHeadBar"),a("div",{staticStyle:{display:"grid","grid-template-columns":"20% 75% 5%"}},[a("div",[a("TeacherMenu")],1),a("div",{staticClass:"addtool-frame"},[a("div",{staticClass:"addtool-title"},[e._v("新增工具")]),a("div",{staticClass:"addtool-content"},[0==e.addSuccess?a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("div",{staticStyle:{display:"grid","grid-template-columns":"500px 500px","grid-template-rows":"400px 100px","column-gap":"100px"}},[a("div",[a("el-form-item",{attrs:{label:"工具名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"所属分类",prop:"labelId"}},[a("el-select",{attrs:{placeholder:"选择分类"},model:{value:e.form.labelId,callback:function(t){e.$set(e.form,"labelId",t)},expression:"form.labelId"}},e._l(e.ops,(function(e){return a("el-option",{key:e.lowerLabel[0].id,attrs:{label:e.lowerLabel[0].name,value:e.lowerLabel[0].id}})})),1)],1),a("el-form-item",{ref:"uploadElement",attrs:{label:"工具图片",prop:"img"}},[e._e(),a("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{accept:"image/jpeg,image/jpg,image/png","auto-upload":!1,action:"","show-file-list":!1,"on-change":e.handleChange,"on-success":e.handleAvatarSuccess}},[e.form.img?a("img",{staticClass:"avatar",attrs:{src:e.form.img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"工具数量",prop:"addCount"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1},model:{value:e.form.addCount,callback:function(t){e.$set(e.form,"addCount",t)},expression:"form.addCount"}})],1)],1),a("div",[a("el-form-item",{attrs:{label:"限借天数",prop:"limit_days"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1},model:{value:e.form.limit_days,callback:function(t){e.$set(e.form,"limit_days",t)},expression:"form.limit_days"}})],1),a("el-form-item",{attrs:{label:"工具详情",prop:"intro"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:14},placeholder:"请输入内容"},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1)],1),a("div",{staticStyle:{"grid-column-start":"span 2"}},[a("el-form-item",[a("el-button",{staticStyle:{width:"200px","font-size":"1.2em","background-color":"#d59131",color:"#fff"},attrs:{loading:e.formLoading},on:{click:e.handleSubmitAdd}},[e._v("确定")]),a("el-button",{staticStyle:{width:"200px","font-size":"1.2em"},on:{click:e.formReset}},[e._v("清空")])],1)],1)])]):a("el-result",{attrs:{icon:"success",title:"添加工具成功"}},[a("template",{slot:"extra"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.continueAdd}},[e._v("继续添加")])],1)],2)],1),a("div")]),a("div")])],1)},i=[],o=(a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("bc3a")),l=a.n(o),s=a("f18d"),n=a("cb7d"),d={components:{TeacherHeadBar:s["a"],TeacherMenu:n["a"]},data:function(){return{addSuccess:!1,formLoading:!1,ops:[],uploadFile:"",form:{labelId:null,name:"",img:"",intro:"",addCount:"",imgfile:null,limit_days:7},rules:{name:[{required:!0,message:"请输入工具名称",trigger:"blur"}],labelId:[{required:!0,message:"请选择分类",trigger:"blur"}],img:[{required:!0,message:"请上传工具图片",trigger:"blur"}],addCount:[{required:!0,message:"请输入工具数量",trigger:"blur"}],limit_days:[{required:!0,message:"请输入工具的限制借用天数",trigger:"blur"}],intro:[]}}},mounted:function(){this.init()},methods:{formReset:function(){this.form.labelId=null,this.form.name="",this.form.img=null,this.form.intro="",this.form.addCount=null,this.form.limit_days=7,this.form.imgfile=null},continueAdd:function(){this.formReset(),this.addSuccess=!1},init:function(){var e=this;l()({url:"user/getFirstLabelList",method:"post",data:{}}).then((function(t){0==t.data.error_code&&(e.ops=t.data.labelList,console.log(e.ops))}))},handleChange:function(e,t){this.form.img=URL.createObjectURL(e.raw),this.form.imgfile=e.raw},handleAvatarSuccess:function(){var e=this;l()({url:"user/getLabelToolList",method:"post",data:{labelId:this.form.labelId}}).then((function(t){e.init()}))},handleSubmitAdd:function(){var e=this;this.formLoading||this.$refs.form.validate((function(t){if(t){e.formLoading=!0;var a=new FormData;a.append("name",e.form.name),a.append("LabelId",e.form.labelId),a.append("intro",e.form.intro),a.append("addCount",e.form.addCount),a.append("uid",e.$store.state.UID),a.append("limit_days",e.form.limit_days),a.append("img",e.form.imgfile),l()({url:"/manager/createTool",method:"post",data:a}).then((function(t){0==t.data.error_code?(e.formLoading=!1,e.$refs.upload.clearFiles(),e.addSuccess=!0):e.$message.error("由于网络安全原因失败，请重试！",t.data.error_code)})).catch((function(t){e.$message.error(t)}))}}))}}},m=d,c=(a("96c0"),a("2877")),u=Object(c["a"])(m,r,i,!1,null,"3fe7c7a1",null);t["default"]=u.exports},"7a93":function(e,t,a){},"96c0":function(e,t,a){"use strict";a("7a93")}}]);
//# sourceMappingURL=chunk-44dba0ce.e50349d1.js.map