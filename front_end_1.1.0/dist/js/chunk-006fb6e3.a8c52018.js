(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-006fb6e3"],{"419e":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("TeacherHeadBar"),o("el-container",[o("el-aside",{staticStyle:{"min-height":"600px"},attrs:{width:"20%"}},[o("TeacherMenu")],1),o("el-main",{attrs:{width:"75%"}},[o("div",{staticClass:"title"},[e._v("待审批延期归还申请")]),o("div",{staticStyle:{margin:"0 auto","margin-top":"20px","align-items":"center"}},[o("el-card",{staticClass:"box-card",staticStyle:{width:"100%"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.renewList,border:""}},[o("el-table-column",{attrs:{align:"center",prop:"toolName",label:"工具名称","min-width":"100"}}),o("el-table-column",{attrs:{align:"center",label:"借用者信息","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{placement:"bottom",width:"250",trigger:"hover"}},[o("div",[e._v(e._s(t.row.requestUserName)+"       "+e._s(t.row.stuid))]),o("div",[e._v("学院:         "+e._s(t.row.stuCollege))]),o("div",[e._v("联系邮箱:  "+e._s(t.row.stuEmail))]),o("div",[e._v("联系电话:  "+e._s(t.row.phoneNumber))]),o("el-button",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[e._v(e._s(t.row.requestUserName))])],1)]}}])}),o("el-table-column",{attrs:{align:"center",prop:"startTime",label:"借用开始时间","min-width":"100"}}),o("el-table-column",{attrs:{align:"center",prop:"returnTime",label:"原定归还时间","min-width":"100"}}),o("el-table-column",{attrs:{align:"center",prop:"postPoneTime",label:"延期归还时间","min-width":"100"}}),o("el-table-column",{attrs:{align:"center",label:"操作","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{placement:"left",width:"250",trigger:"click"}},[o("div",[e._v("延期目的: "+e._s(t.row.postponePurpose)+":")]),o("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",size:"mini",plain:"",type:"primary"},slot:"reference"},[e._v("查看")])],1),o("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(o){return e.handleAgree(t.row)}}},[e._v("同意")]),o("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){return e.handleCreate()}}},[e._v("拒绝")]),o("el-dialog",{attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"dataForm",staticStyle:{width:"300px","margin-left":"50px"},attrs:{model:e.formData,"label-position":"left","label-width":"80px"}},[o("el-form-item",{attrs:{label:"拒绝原因"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入拒绝原因"},model:{value:e.formData.refuseReason,callback:function(t){e.$set(e.formData,"refuseReason",t)},expression:"formData.refuseReason"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(o){return e.handleRefuse(t.row)}}},[e._v("确定")])],1)],1)]}}])})],1)],1)],1)]),o("el-aside",{attrs:{width:"5%"}})],1)],1)},s=[],a=o("bc3a"),i=o.n(a),n=o("f18d"),l=o("cb7d"),c={inject:["reload"],components:{TeacherHeadBar:n["a"],TeacherMenu:l["a"]},mounted:function(){this.loadMessage()},data:function(){return{dialogFormVisible:!1,formData:{refuseReason:""},renewList:[{toolName:"",requestUserName:"",startTime:"",borrowTime:"",returnTime:"",postPoneTime:"",stuid:"",stuCollege:"",userId:"",phoneNumber:"",stuEmail:"",postponePurpose:"",requestId:""}]}},methods:{handleCreate:function(){this.formData={refuseReason:""},this.dialogFormVisible=!0},handleAgree:function(e){var t=this;i()({url:"manager/approvePostponeRequest",method:"post",data:{requestId:e.requestId,status:"Accept",refuseReason:""}}).then((function(o){o?0===o.data.error_code?(alert("已同意延期申请，该设备最晚于"+e.postPoneTime+"归还"),t.reload()):(console.log("error"+o.data.error_code),alert("error"+o.data.error_code)):(console.log("审批失败，请检查网络"),alert("审批失败，请检查网络"))}))},handleRefuse:function(e){var t=this;i()({url:"manager/approvePostponeRequest",method:"post",data:{requestId:e.requestId,status:"Refuse",refuseReason:this.formData.refuseReason}}).then((function(e){e?0===e.data.error_code?(console.log("已拒绝该申请",e.data),alert("已拒绝该申请"),t.reload()):(console.log("error"+e.data.error_code),alert("error"+e.data.error_code)):(console.log("审批失败，请检查网络"),alert("审批失败，请检查网络"))}))},loadMessage:function(){var e=this;i()({url:"manager/getPostponeRequestList",method:"post",data:{}}).then((function(t){t&&0===t.data.error_code?(console.log("获取成功",t.data),e.renewList=t.data.data_list):(console.log("获取失败"+t.data),alert("获取失败，请检查网络"))}))}}},u=c,d=(o("969f"),o("2877")),m=Object(d["a"])(u,r,s,!1,null,"f0cede30",null);t["default"]=m.exports},"6fd4":function(e,t,o){},"7d91":function(e,t,o){},"969f":function(e,t,o){"use strict";o("7d91")},cb7d:function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{display:"flex"}},[o("div",{staticStyle:{"min-width":"200px"}},[o("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"active-text-color":"#a6dcff",router:""}},[o("el-submenu",{attrs:{index:"1"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-s-promotion"}),e._v("审批管理")]),this.isSuperUser?o("el-menu-item",{attrs:{index:"/borrowProcessing"}},[o("span",{attrs:{slot:"title"},slot:"title"},[e._v("借用审批")])]):e._e(),this.isSuperUser?o("el-menu-item",{attrs:{index:"/messageProcessing"}},[o("span",{attrs:{slot:"title"},slot:"title"},[e._v("延期审批")])]):e._e(),this.isSuperUser?o("el-menu-item",{attrs:{index:"/toolRecord"}},[o("span",{attrs:{slot:"title"},slot:"title"},[e._v("归还审批")])]):e._e()],2),o("el-submenu",{attrs:{index:"2"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-s-order"}),e._v("用户管理")]),this.isSuperUser?o("el-menu-item",{attrs:{index:"/addTeacher"}},[o("span",{attrs:{slot:"title"},slot:"title"},[e._v("添加教师")])]):e._e(),this.isSuperUser?o("el-menu-item",{attrs:{index:"/UserRecord"}},[o("span",{attrs:{slot:"title"},slot:"title"},[e._v("学生列表")])]):e._e(),this.isSuperUser?o("el-menu-item",{attrs:{index:"/TeacherRecord"}},[o("span",{attrs:{slot:"title"},slot:"title"},[e._v("教师列表")])]):e._e()],2),o("el-submenu",{attrs:{index:"3"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-setting"}),e._v("工具管理")]),this.isSuperUser?o("el-menu-item",{attrs:{index:"/AllToolRecord"}},[o("span",{attrs:{slot:"title"},slot:"title"},[e._v("工具列表")])]):e._e(),o("el-menu-item",{attrs:{index:"/addtool"}},[o("span",{attrs:{slot:"title"},slot:"title"},[e._v("新增工具")])]),o("el-menu-item",{attrs:{index:"/settools"}},[o("span",{attrs:{slot:"title"},slot:"title"},[e._v("编辑工具")])])],2)],1)],1),o("div",[o("router-view")],1)])},s=[],a={name:"teachermenu",mounted:function(){this.loadIsSuperUser()},data:function(){return{isSuperUser:!0}},methods:{loadIsSuperUser:function(){"false"==localStorage.getItem("isSuperUser")&&(this.isSuperUser=!1)}}},i=a,n=o("2877"),l=Object(n["a"])(i,r,s,!1,null,null,null);t["a"]=l.exports},e9bd:function(e,t,o){"use strict";o("6fd4")},f18d:function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"x-head"},[o("img",{staticStyle:{cursor:"pointer",height:"60px","margin-left":"10px","margin-top":"0.5%"},attrs:{src:"headerLogo.png"},on:{click:e.toMain}}),o("div",{staticStyle:{margin:"0 auto"}}),o("div",{staticStyle:{"line-height":"6vh",margin:"0 4vh 0 0"}},[o("el-dropdown",[o("div",{staticClass:"header-right"},[o("span",{staticStyle:{color:"white"}},[e._v(e._s(this.mail))])]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{icon:"el-icon-edit"}},[o("span",{staticStyle:{cursor:"pointer"},on:{click:e.changePwd}},[e._v("修改密码")])]),o("el-dropdown-item",{attrs:{icon:"el-icon-edit"}},[o("span",{staticStyle:{cursor:"pointer"},on:{click:e.changeInfo}},[e._v("个人信息")])]),o("el-dropdown-item",{attrs:{icon:"el-icon-s-fold"}},[o("span",{staticStyle:{cursor:"pointer"},on:{click:e.logout}},[e._v("退出登录")])])],1)],1)],1),e._m(0)])},s=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("br")])}],a=o("bc3a"),i=o.n(a),n={name:"teacherheadbar",data:function(){return{mail:localStorage.getItem("Mail")}},methods:{goToLogin:function(){this.$router.push("/teacherLogin"),localStorage.setItem("Mail",null)},logout:function(){this.$router.push("/teacherLogin"),localStorage.setItem("Mail",null),i()({method:"post",url:"user/unLogin",data:{token:localStorage.getItem("token")}}),console.log("执行了"),localStorage.setItem("token","wutoken")},changeInfo:function(){console.log("Info"),this.$router.push("/teacherChangeInfo")},changePwd:function(){console.log("Pwd"),this.$router.push("/teacherChangePwd")},toMain:function(){this.$router.push("/borrowProcessing")}}},l=n,c=(o("e9bd"),o("2877")),u=Object(c["a"])(l,r,s,!1,null,"03982c49",null);t["a"]=u.exports}}]);
//# sourceMappingURL=chunk-006fb6e3.a8c52018.js.map