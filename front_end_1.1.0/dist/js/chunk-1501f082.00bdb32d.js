(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1501f082"],{4140:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-register"},[e("div",{staticClass:"header"}),e("div",{staticClass:"contain"},[e("div",{staticClass:"big-box",class:{active:t.isLogin}},[t.isLogin?e("div",{staticClass:"big-contain"},[e("div",{staticClass:"btitle"},[t._v("教师登录")]),e("div",{staticClass:"bform"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],attrs:{type:"email",placeholder:"邮箱"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),t.emailError?e("span",{staticClass:"errTips"},[t._v("* 邮箱填写错误 *")]):t._e(),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),t.emailError?e("span",{staticClass:"errTips"},[t._v("* 密码填写错误 *")]):t._e()]),e("button",{staticClass:"bbutton",on:{click:t.login}},[t._v("登录")]),t._v("   "),e("button",{on:{click:t.teacherForgetPwd}},[t._v("忘记密码")])]):e("div",{staticClass:"big-contain"},[t.stateReg?e("div",[e("div",{staticClass:"btitle"},[t._v("欢迎，"+t._s(this.form.name)+"老师！")]),e("div",{staticClass:"bform"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.phone,expression:"form.phone"}],attrs:{type:"text",placeholder:"手机号"},domProps:{value:t.form.phone},on:{input:function(e){e.target.composing||t.$set(t.form,"phone",e.target.value)}}}),e("br"),e("button",{on:{click:t.sendCode}},[t._v("获取验证码"),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}],staticClass:"count"},[t._v(" "+t._s(t.count)+" s")])]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.code,expression:"form.code"}],attrs:{type:"code",placeholder:"验证码"},domProps:{value:t.form.code},on:{input:function(e){e.target.composing||t.$set(t.form,"code",e.target.value)}}}),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password2,expression:"form.password2"}],attrs:{type:"password",placeholder:"确认密码"},domProps:{value:t.form.password2},on:{input:function(e){e.target.composing||t.$set(t.form,"password2",e.target.value)}}})]),e("button",{staticClass:"bbutton",on:{click:t.changeRegState}},[t._v("上一步")]),t._v("  "),e("button",{staticClass:"bbutton",on:{click:t.register}},[t._v("注册")])]):e("div",[e("div",{staticClass:"btitle"},[t._v("教师注册")]),e("br"),e("div",{staticClass:"bform"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tid,expression:"form.tid"}],attrs:{type:"text",placeholder:"工号"},domProps:{value:t.form.tid},on:{input:function(e){e.target.composing||t.$set(t.form,"tid",e.target.value)}}}),e("br"),t.existed?e("span",{staticClass:"errTips"},[t._v("* 该工号已经注册！ *")]):t._e(),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],attrs:{type:"text",placeholder:"姓名"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],attrs:{type:"text",placeholder:"邮箱"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),e("br")]),e("br"),e("button",{staticClass:"bbutton",on:{click:t.changeRegState}},[t._v("下一步")])])])]),e("div",{staticClass:"small-box",class:{active:t.isLogin}},[t.isLogin?e("div",{staticClass:"small-contain"},[t._m(0),t._m(1),e("button",{staticClass:"sbutton",on:{click:t.changeType}},[t._v("前往注册")]),e("br"),e("button",{staticClass:"sbutton",on:{click:t.studentEntry}},[t._v("学生入口")])]):e("div",{staticClass:"small-contain"},[e("div",{staticClass:"stitle"},[t._v("老师，您好！")]),t._m(2),e("button",{staticClass:"sbutton",on:{click:t.changeType}},[t._v("前往登录")]),e("br"),e("button",{staticClass:"sbutton",on:{click:t.studentEntry}},[t._v("学生入口")])])])])])},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"stitle"},[t._v("北航工程训练中心"),e("br"),t._v("工具信息平台")])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"scontent"},[t._v("请输入您的邮箱"),e("br"),t._v("或管理员账号")])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"scontent"},[t._v("注册工训中心账号，"),e("br"),t._v("轻松管理设备借还。")])}],r=(s("cdf1"),s("8aad")),i=s.n(r),n={name:"login-register",data(){return{isLogin:!0,stateReg:!1,emailError:!1,passwordError:!1,existed:!1,form:{name:"",tid:"",email:"",password:"",password2:"",code:"",phone:""},show:!0,count:"",timer:null}},methods:{studentEntry(){this.$router.push("/studentLogin")},changeType(){this.isLogin=!this.isLogin,this.stateReg=!1,this.form.tid="",this.form.name="",this.form.email="",this.form.password=""},teacherForgetPwd(){this.$router.push("/teacherForgetPwd")},sendCode(){const t=60;this.timer||(console.log("已发送"),i()({method:"post",url:"user/forget/sendCode",data:{acc:this.form.phone}}).then(t=>{console.log(t.error_code),alert("验证码已发送，请在手机信息中查看。")}),this.count=t,this.show=!1,this.timer=setInterval(()=>{this.count>0&&this.count<=t?this.count--:(this.show=!0,clearInterval(this.timer),this.timer=null)},1e3))},changeRegState(){""!=this.form.sid&&""!=this.form.name&&""!=this.form.college?this.stateReg=!this.stateReg:alert("填写不能为空！")},changePwd(){""!=this.form.email&&""!=this.form.password&&i()({method:"post",url:"manager/resetPwd",data:{uid:this.userId,old_pwd:this.form.password,new_pwd:this.new_password}}).then(t=>{switch(t.error_code){case 0:alert("登录成功");break;case 1:alert("请求参数错误");break;case 2:alert("原密码错误");break;case 3:alert("新密码格式错误");break;case 4:alert("用户不存在");break}})},login(){localStorage.setItem("token","wutoken");var t=localStorage.getItem("token");console.log(t),""!=this.form.email&&""!=this.form.password?i()({method:"post",url:"manager/Login",data:{acc:this.form.email,pwd:this.form.password}}).then(t=>{console.log(t.data.error_code);let e={};e.Mail=this.form.email,e.UID=t.data.uid,e.hash_code=t.data.hash_code,console.log(e.hash_code),0==t.data.error_code?(localStorage.setItem("uid",t.data.uid),localStorage.setItem("Mail",this.form.email),localStorage.setItem("isSuperUser",t.data.is_superUser),localStorage.setItem("token",t.data.hash_code),t.data.is_superUser?(this.$router.push("/borrowProcessing"),this.$store.commit("changeLogin",e)):(this.$router.push("/settools"),this.$store.commit("changeLogin",e))):1==t.data.error_code?alert("存在输入为空！"):2==t.data.error_code?alert("用户不存在！"):3==t.data.error_code?alert("密码错误！请重新输入。"):alert("请重新输入！")}):alert("填写不能为空")},register(){console.log(this.form.phone+" : "+this.form.tid),""!=this.form.password&&""!=this.form.email?this.form.password!=this.form.password2?alert("两次密码输入不一致。"):i()({method:"post",url:"manager/RegisterTeacherAcc",data:{acc:this.form.email,teacherId:this.form.tid,name:this.form.name,pwd:this.form.password,key:this.form.code,phoneNumber:this.form.phone}}).then(t=>{console.log(t),0==t.data.error_code&&(alert("您的注册请求已提交！请等待管理员审核。"),this.changeType()),1==t.data.error_code&&alert("输入有误！请检查并重新输入"),2==t.data.error_code&&alert("该邮箱已注册！")}):alert("填写不能为空！")}}},l=n,c=(s("7041"),s("847b")),m=Object(c["a"])(l,o,a,!1,null,"da6152ac",null);e["default"]=m.exports},7041:function(t,e,s){"use strict";s("7947")},7947:function(t,e,s){}}]);
//# sourceMappingURL=chunk-1501f082.00bdb32d.js.map