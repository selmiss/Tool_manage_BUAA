{"remainingRequest":"/Users/fancy/工训中心工具管理/Tool_manage_BUAA/前端文件/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fancy/工训中心工具管理/Tool_manage_BUAA/前端文件/src/views/manager_views/UserRecord.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fancy/工训中心工具管理/Tool_manage_BUAA/前端文件/src/views/manager_views/UserRecord.vue","mtime":1672908219256},{"path":"/Users/fancy/工训中心工具管理/Tool_manage_BUAA/前端文件/node_modules/cache-loader/dist/cjs.js","mtime":1672908217846},{"path":"/Users/fancy/工训中心工具管理/Tool_manage_BUAA/前端文件/node_modules/babel-loader/lib/index.js","mtime":1672908217685},{"path":"/Users/fancy/工训中心工具管理/Tool_manage_BUAA/前端文件/node_modules/cache-loader/dist/cjs.js","mtime":1672908217846},{"path":"/Users/fancy/工训中心工具管理/Tool_manage_BUAA/前端文件/node_modules/vue-loader/lib/index.js","mtime":1672908219119}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUZWFjaGVySGVhZEJhciBmcm9tICJAL2NvbXBvbmVudHMvVGVhY2hlckhlYWRCYXIiOwppbXBvcnQgVGVhY2hlck1lbnUgZnJvbSAiQC9jb21wb25lbnRzL1RlYWNoZXJNZW51IjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOntUZWFjaGVySGVhZEJhcixUZWFjaGVyTWVudX0sCiAgaW5qZWN0OiBbJ3JlbG9hZCddLAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRNZXNzYWdlKCkKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIHRhYmxlUmVjb3JkRGF0YTogWwogICAgICAgIHsKICAgICAgICAgIHRvb2xOYW1lOiAiIiwKICAgICAgICAgIHN0YXJ0VGltZToiIiwKICAgICAgICAgIHJldHVyblRpbWU6ICIiLAogICAgICAgICAgcmVxdWVzdElkOiAiIiwKICAgICAgICAgIHN0YXR1czogIiIsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgdGFibGVEYXRhOiBbCiAgICAgICAgewogICAgICAgICAgdWlkOicnLAogICAgICAgICAgbmFtZTonJywKICAgICAgICAgIHBob25lTnVtYmVyOicnLAogICAgICAgICAgY29sbGVnZTonJywKICAgICAgICAgIHN0dWRlbnRJZDonJywKICAgICAgICB9LAogICAgICBdLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUNyZWF0ZShyb3cpIHsKICAgICAgLy/miZPlvIDlvLnnqpcKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgYXhpb3MoewogICAgICAgIHVybDogJ2h0dHA6Ly8xMjEuNC4xNjAuMTU3L3VzZXIvYWxsQm9ycm93TGlzdCcsCiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgZGF0YTogewogICAgICAgICAgdWlkIDogcm93LnVpZAogICAgICAgIH0KICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmVycm9yX2NvZGUgPT09IDApIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIuiOt+WPluaIkOWKnyIsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB0aGF0LnRhYmxlUmVjb3JkRGF0YSA9IHJlc3BvbnNlLmRhdGEucmVxdWVzdExpc3Q7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygi6I635Y+W5aSx6LSlIiArIHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICBhbGVydChyb3cudWlkICsgIiDojrflj5blpLHotKUsZXJyb3I6ICIgKyByZXNwb25zZS5kYXRhLmVycm9yX2NvZGUpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygi6I635Y+W5aSx6LSlIiArIHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgYWxlcnQoIuiOt+WPluWksei0pe+8jOivt+ajgOafpee9kee7nCIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlVXNlcihyb3cpewogICAgICBjb25zb2xlLmxvZyhyb3cpOwogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIHZhciBpID0gcm93LnVpZDsKICAgICAgYXhpb3MoewogICAgICAgIHVybDonaHR0cDovLzEyMS40LjE2MC4xNTcvbWFuYWdlci9kZWxldGVTdHVkZW50JywKICAgICAgICBtZXRob2Q6J3Bvc3QnLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHVpZCA6IGkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMucmVsb2FkKCk7CiAgICAgICAgYWxlcnQoJ+W3suWIoOmZpOivpeeUqOaItycpOwogICAgICB9KQogICAgfSwKICAgIGxvYWRNZXNzYWdlKCkgewoJCQkJbGV0IHRoYXQgPSB0aGlzOwoJCQkJYXhpb3MoewoJCQkJCXVybDogJ2h0dHA6Ly8xMjEuNC4xNjAuMTU3L21hbmFnZXIvZ2V0U3R1ZGVudExpc3QnLAoJCQkJCW1ldGhvZDogJ3Bvc3QnLAoJCQkJCWRhdGE6IHsKCQkJCQl9CgkJCQl9KS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLmRhdGFMaXN0OwoJCQkJfSk7CgkJfSwKICB9Cn07Cg=="},{"version":3,"sources":["UserRecord.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserRecord.vue","sourceRoot":"src/views/manager_views","sourcesContent":["<template>\n  <div>\n    <TeacherHeadBar></TeacherHeadBar>\n    <el-container>\n      <el-aside width=\"20%\" style=\"min-height: 600px;\" >\n        <TeacherMenu></TeacherMenu>\n      </el-aside>\n      <el-main width=\"75%\">\n        <div class=\"title\" style=\"margin-top: 20px\">用户记录表</div>\n        <div style=\"margin: 0 auto; margin-top: 20px; align-items: center;\">\n          <el-card class=\"box-card\" style=\"width: 80%\">\n              <el-table :data=\"tableData\" style=\"width: 100%\" border>\n                <el-table-column type=\"index\" :index=\"indexMethod\" align=\"center\"></el-table-column>\n                <el-table-column align=\"center\" prop=\"name\" label=\"用户名\" min-width=\"50\"></el-table-column>\n                <el-table-column align=\"center\" prop=\"phoneNumber\" label=\"手机号\" min-width=\"80\"></el-table-column>\n                <el-table-column align=\"center\" prop=\"studentId\" label=\"学号\" min-width=\"60\"> </el-table-column>\n                <el-table-column align=\"center\" prop=\"college\" label=\"学院\" min-width=\"50\"> </el-table-column>\n                <el-table-column align=\"center\" label=\"操作\" min-width=\"160\">\n                  <template  slot-scope=\"scope\">\n                    <el-button type=\"primary\" plain  @click=\"handleCreate(scope.row)\">查看记录</el-button>\n                    <el-button type=\"danger\" plain @click=\"deleteUser(scope.row)\">删除用户</el-button>\n                    <el-dialog :visible.sync=\"dialogFormVisible\">\n                      <div class=\"title\" style=\"margin-top: 0px\">工具借用记录表</div>\n                      <div style=\"margin: 0 auto; align-items: center;\">\n                        <el-card class=\"box-card\" style=\"width: 80%\">\n                            <el-table :data=\"tableRecordData\" style=\"width: 100%\" border>\n                              <el-table-column align=\"center\" prop=\"toolName\" label=\"工具名称\" min-width=\"120\"></el-table-column>\n                              <el-table-column align=\"center\" prop=\"startTime\" label=\"借用开始时间\" min-width=\"100\"></el-table-column>\n                              <el-table-column align=\"center\" prop=\"returnTime\" label=\"最晚归还时间\" min-width=\"100\"> </el-table-column>\n                              <el-table-column align=\"center\" label=\"状态\" min-width=\"120\"> \n                                <template slot-scope=\"scope\">\n                                  <el-button v-if=\"scope.row.status === 'A'\" size=\"mini\" type=\"warning\" >工具借用中</el-button>\n                                  <el-button v-if=\"scope.row.status === 'W'\" size=\"mini\" type=\"primary\" >等待审核中</el-button>\n                                  <el-button v-if=\"scope.row.status === 'R'\" size=\"mini\" type=\"danger\" >申请被拒绝</el-button>\n                                  <el-button v-if=\"scope.row.status === 'F'\" size=\"mini\" type=\"success\" >工具已归还</el-button>\n                                </template>\n                              </el-table-column>\n                            </el-table>\n                        </el-card>\n                      </div>\n                    </el-dialog>\n                  </template>\n                </el-table-column>\n              </el-table>\n          </el-card>\n        </div>\n      </el-main>\n      <el-aside width=\"5%\"></el-aside>\n    </el-container>\n  </div>\n</template>\n\n<script>\nimport TeacherHeadBar from \"@/components/TeacherHeadBar\";\nimport TeacherMenu from \"@/components/TeacherMenu\";\nimport axios from \"axios\";\n\nexport default {\n  components:{TeacherHeadBar,TeacherMenu},\n  inject: ['reload'],\n  mounted() {\n    this.loadMessage()\n  },\n  data() {\n    return {\n      dialogFormVisible: false,\n      tableRecordData: [\n        {\n          toolName: \"\",\n          startTime:\"\",\n          returnTime: \"\",\n          requestId: \"\",\n          status: \"\",\n        },\n      ],\n      tableData: [\n        {\n          uid:'',\n          name:'',\n          phoneNumber:'',\n          college:'',\n          studentId:'',\n        },\n      ],\n    };\n  },\n  methods: {\n    handleCreate(row) {\n      //打开弹窗\n      this.dialogFormVisible = true;\n      let that = this;\n      axios({\n        url: 'http://121.4.160.157/user/allBorrowList',\n        method: 'post',\n        data: {\n          uid : row.uid\n        }\n      }).then((response) => {\n        if (response) {\n          if (response.data.error_code === 0) {\n            console.log(\"获取成功\", response.data);\n            that.tableRecordData = response.data.requestList;\n          } else {\n            console.log(\"获取失败\" + response.data);\n            alert(row.uid + \" 获取失败,error: \" + response.data.error_code);\n          }\n        } else {\n          console.log(\"获取失败\" + response.data);\n          alert(\"获取失败，请检查网络\");\n        }\n      });\n    },\n    deleteUser(row){\n      console.log(row);\n      let that = this;\n      var i = row.uid;\n      axios({\n        url:'http://121.4.160.157/manager/deleteStudent',\n        method:'post',\n        data: {\n          uid : i\n        }\n      }).then((res) => {\n        this.reload();\n        alert('已删除该用户');\n      })\n    },\n    loadMessage() {\n\t\t\t\tlet that = this;\n\t\t\t\taxios({\n\t\t\t\t\turl: 'http://121.4.160.157/manager/getStudentList',\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: {\n\t\t\t\t\t}\n\t\t\t\t}).then((res) => {\n          console.log(res);\n          this.tableData = res.data.dataList;\n\t\t\t\t});\n\t\t},\n  }\n};\n</script>\n\n<style scoped>\n  .header{\n    height: 50px;\n    display: flex;\n    color: aqua;\n  }\n  .box-card{\n    margin-left: 100px;\n  }\n  .title {\n    color: rgb(204, 116, 0);\n    margin-bottom: 20px;\n    font-family: 微软雅黑;\n    word-wrap: break-word;\n    /* text-align: left; */\n    font-size: 25px;\n    font-weight: bold;\n  }\n  .el-table{\n    width: 100%;\n  }\n</style>"]}]}