{"remainingRequest":"D:\\Desktop\\git_clong\\Tool_manage_BUAA\\前端文件\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\git_clong\\Tool_manage_BUAA\\前端文件\\src\\views\\student_views\\BorrowRecord.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Desktop\\git_clong\\Tool_manage_BUAA\\前端文件\\src\\views\\student_views\\BorrowRecord.vue","mtime":1673754132211},{"path":"D:\\Desktop\\git_clong\\Tool_manage_BUAA\\前端文件\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1673701897175},{"path":"D:\\Desktop\\git_clong\\Tool_manage_BUAA\\前端文件\\node_modules\\babel-loader\\lib\\index.js","mtime":1673701896619},{"path":"D:\\Desktop\\git_clong\\Tool_manage_BUAA\\前端文件\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1673701897175},{"path":"D:\\Desktop\\git_clong\\Tool_manage_BUAA\\前端文件\\node_modules\\vue-loader\\lib\\index.js","mtime":1673701901619}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IEhlYWRCYXIgZnJvbSAiQC9jb21wb25lbnRzL0hlYWRCYXIiOw0KaW1wb3J0IFN0dWRlbnRNZW51IGZyb20gIkAvY29tcG9uZW50cy9TdHVkZW50TWVudSI7DQppbXBvcnQgeyBMb2FkaW5nIH0gZnJvbSAiZWxlbWVudC11aSI7CmV4cG9ydCBkZWZhdWx0IHsNCiAgaW5qZWN0OiBbJ3JlbG9hZCddLA0KICBjb21wb25lbnRzOntIZWFkQmFyLFN0dWRlbnRNZW51fSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmxvYWRNZXNzYWdlKCkNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KCQlsb2FkaW5nOiB0cnVlLA0KICAgICAgcm93U3RvcmU6IG51bGwsDQogICAgICBwaWNrZXJPcHRpb25zOiB7DQogICAgICAgICAgZGlzYWJsZWREYXRlKHRpbWUpIHsNCiAgICAgICAgICAgIHJldHVybiAodGltZS5nZXRUaW1lKCkgPCBEYXRlLm5vdygpKTsNCiAgICAgICAgICB9LA0KICAgICAgICAgIHNob3J0Y3V0czogW3sNCiAgICAgICAgICAgIHRleHQ6ICfkuIDlkajlkI4nLA0KICAgICAgICAgICAgb25DbGljayhwaWNrZXIpIHsNCiAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArIDM2MDAgKiAxMDAwICogMjQgKiA3KTsNCiAgICAgICAgICAgICAgcGlja2VyLiRlbWl0KCdwaWNrJywgZGF0ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwgew0KICAgICAgICAgICAgdGV4dDogJ+S4gOS4quaciOWQjicsDQogICAgICAgICAgICBvbkNsaWNrKHBpY2tlcikgew0KICAgICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgMzYwMCAqIDEwMDAgKiAyNCAqIDMwKTsNCiAgICAgICAgICAgICAgcGlja2VyLiRlbWl0KCdwaWNrJywgZGF0ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfV0NCiAgICAgIH0sDQoJICBkaWFsb2dSZXBlYWxWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwNCiAgICAgIGZvcm1EYXRhOnsNCiAgICAgICAgICBwdXJwb3NlOiAiIiwNCiAgICAgICAgICBwb3N0cG9uZVRpbWU6ICIiLA0KICAgICAgfSwNCgkgIFJlcGVhbERhdGE6ew0KCQkgIHB1cnBvc2U6IiIsDQoJICB9LA0KICAgICAgdGFibGVEYXRhOiBbDQogICAgICAgIHsNCiAgICAgICAgICB0b29sTmFtZTogIiIsDQogICAgICAgICAgc3RhcnRUaW1lOiIiLA0KICAgICAgICAgIHJldHVyblRpbWU6ICIiLA0KDQoJCQlhZGRyZXNzOiIiLA0KCQkJc3R0aW1lOiIiLCAgLy/lgJ/nlKjlvZPlpKnlvIDlp4vpooblj5bnmoTml7bpl7QNCgkJCWVuZHRpbWU6IiIsDQoJCQlnZXRkYXRlOiIiLA0KCQkJDQogICAgICAgICAgcmVxdWVzdElkOiAiIiwNCiAgICAgICAgICBzdGF0dXM6ICIiLA0KICAgICAgICB9LA0KICAgICAgXSwNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlQ3JlYXRlKHJvdykgew0KCQl0aGlzLnJvd1N0b3JlPXJvdzsNCiAgICAgIHRoaXMuZm9ybURhdGEgPSB7DQogICAgICAgICAgcHVycG9zZTogIiIsDQogICAgICAgICAgcG9zdHBvbmVUaW1lOiAiIiwNCiAgICAgIH0sDQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsNCiAgICB9LA0KCXdpdGhkcmF3KHJvdykgew0KCQl0aGlzLnJvd1N0b3JlID0gcm93DQoJCXRoaXMuZGlhbG9nUmVwZWFsVmlzaWJsZT10cnVlOw0KCX0sDQogICAgaGFuZGxlUmVuZXcoKSB7DQogICAgICB2YXIgcm93ID0gdGhpcy5yb3dTdG9yZTsNCiAgICAgIGNvbnNvbGUubG9nKCLnu63lgJ/ml7bpl7QiLCB0aGlzLmZvcm1EYXRhLnBvc3Rwb25lVGltZSk7DQogICAgICBheGlvcyh7DQoJCQkJCXVybDogJ3VzZXIvYXBwbHlQb3N0cG9uZScsDQoJCQkJCW1ldGhvZDogJ3Bvc3QnLA0KCQkJCQlkYXRhOiB7DQogICAgICAgICAgICB1aWQgOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndWlkJyksDQogICAgICAgICAgICByZXF1ZXN0SWQ6IHJvdy5yZXF1ZXN0SWQsDQogICAgICAgICAgICBwb3N0cG9uZVRpbWUgOiB0aGlzLmZvcm1EYXRhLnBvc3Rwb25lVGltZSwNCiAgICAgICAgICAgIHB1cnBvc2U6IHRoaXMuZm9ybURhdGEucHVycG9zZSwNCgkJCQkJfQ0KCQkJCX0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQoJCQkJCWlmIChyZXNwb25zZSkgew0KCQkJCQkJaWYgKHJlc3BvbnNlLmRhdGEuZXJyb3JfY29kZSA9PT0gMCkgew0KCQkJCQkJCWNvbnNvbGUubG9nKCLlt7LnlLPor7fnu63lgJ/vvIzor7fnrYnlvoXmlZnluIjlrqHmibkiLCByZXNwb25zZS5kYXRhKTsNCiAgICAgICAgICAgICAgYWxlcnQoIuW3sueUs+ivt+e7reWAnyzor7fnrYnlvoXmlZnluIjlrqHmibks5a6h5om55L+h5oGv5bCG6YCa6L+H6YKu5Lu26YCa55+lISIpOw0KICAgICAgICAgICAgICB0aGlzLnJlbG9hZCgpOw0KCQkJCQkJfSBlbHNlIHsNCgkJCQkJCQljb25zb2xlLmxvZygiZXJyb3IiICsgcmVzcG9uc2UuZGF0YSk7DQoJCQkJCQkJYWxlcnQoImVycm9yIiArIHJlc3BvbnNlLmRhdGEpOw0KCQkJCQkJfQ0KCQkJCQl9IGVsc2Ugew0KCQkJCQkJY29uc29sZS5sb2coIueUs+ivt+Wksei0pe+8jOivt+ajgOafpee9kee7nCIpOw0KCQkJCQkJYWxlcnQoIueUs+ivt+Wksei0pe+8jOivt+ajgOafpee9kee7nCIpOw0KCQkJCQl9DQoJCQkJfSk7DQoJCQkJdGhpcy5jbG9zZVdpbmRvdygpOw0KICAgIH0sDQogICAgY2xvc2VXaW5kb3coKSB7DQogICAgICB0aGlzLlJlcGVhbERhdGE9ew0KCQkJcHVycG9zZToiIiwNCgkJICB9LA0KICAgICAgZGlhbG9nUmVwZWFsVmlzaWJsZSA9IGZhbHNlDQoNCiAgICB9LA0KCSAgUmVwZWFsUmVuZXcoKSB7DQogICAgICB2YXIgcm93ID0gdGhpcy5yb3dTdG9yZTsNCgkJYXhpb3Moew0KCQkJCQl1cmw6ICd1c2VyL3JlcGVhbFJlcXVlc3QnLA0KCQkJCQltZXRob2Q6ICdwb3N0JywNCgkJCQkJZGF0YTogew0KCQkJCQl1aWQgOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndWlkJyksDQoJCQkJCXJlcXVlc3RJZDogcm93LnJlcXVlc3RJZCwNCgkJCQkJcHVycG9zZTogdGhpcy5SZXBlYWxEYXRhLnB1cnBvc2UsDQoJCQkJCX0NCgkJCQl9KS50aGVuKChyZXNwb25zZSkgPT4gew0KCQkJCQlpZiAocmVzcG9uc2UpIHsNCgkJCQkJCWlmIChyZXNwb25zZS5kYXRhLmVycm9yX2NvZGUgPT09IDApIHsNCgkJCQkJCQljb25zb2xlLmxvZygi5pKk6ZSA5oiQ5YqfIiwgcmVzcG9uc2UuZGF0YSk7DQoJCQkJCQkJYWxlcnQoIuaSpOmUgOaIkOWKnyIpOw0KCQkJCQkJCXRoaXMucmVsb2FkKCk7DQoJCQkJCQl9IGVsc2Ugew0KCQkJCQkJCWNvbnNvbGUubG9nKCJlcnJvciIgKyByZXNwb25zZS5kYXRhKTsNCgkJCQkJCQlhbGVydCgiZXJyb3IiICsgcmVzcG9uc2UuZGF0YS5lcnJvcl9jb2RlKTsNCgkJCQkJCX0NCgkJCQkJfSBlbHNlIHsNCgkJCQkJCWNvbnNvbGUubG9nKCLnlLPor7flpLHotKXvvIzor7fmo4Dmn6XnvZHnu5wiKTsNCgkJCQkJCWFsZXJ0KCLnlLPor7flpLHotKXvvIzor7fmo4Dmn6XnvZHnu5wiKTsNCgkJCQkJfQ0KCQkJCX0pOw0KICAgICAgICB0aGlzLmNsb3NlV2luZG93KCk7DQoJfSwNCglsb2FkTWVzc2FnZSgpIHsNCgkJCQlsZXQgdGhhdCA9IHRoaXM7DQoJCQkJY29uc29sZS5sb2cobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VpZCcpKQ0KCQkJCWF4aW9zKHsNCgkJCQkJdXJsOiAndXNlci9hbGxCb3Jyb3dMaXN0JywNCgkJCQkJbWV0aG9kOiAncG9zdCcsDQoJCQkJCWRhdGE6IHsNCgkJCQkJCXVpZCA6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1aWQnKSwgDQoJCQkJCX0NCgkJCQl9KS50aGVuKChyZXNwb25zZSkgPT4gew0KCQkJCQlpZiAocmVzcG9uc2UpIHsNCgkJCQkJCWNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEudG9rZW5fbWVzc2FnZSkNCgkJCQkJCWlmKHJlc3BvbnNlLmRhdGEudG9rZW5fbWVzc2FnZT09ICJ0b2tlbumUmeivryIpew0KCQkJCQkJCWFsZXJ0KCLorr/pl67lh73mlbDlpLHotKXvvIzor7fph43mlrDnmbvlvZXlsJ3or5Xop6PlhrMiKQ0KCQkJCQkJfQ0KCQkJCQkJaWYgKHJlc3BvbnNlLmRhdGEuZXJyb3JfY29kZSA9PT0gMCkgew0KCQkJCQkJCWNvbnNvbGUubG9nKCLojrflj5bmiJDlip8iLCByZXNwb25zZS5kYXRhKTsNCgkJCQkJCQl0aGF0LnRhYmxlRGF0YSA9IHJlc3BvbnNlLmRhdGEucmVxdWVzdExpc3Q7DQoJCQkJCQkJbG9hZGluZz1mYWxzZTsNCgkJCQkJCX0gZWxzZSB7DQoJCQkJCQkJY29uc29sZS5sb2coIuiOt+WPluWksei0pSIgKyByZXNwb25zZS5kYXRhKTsNCgkJCQkJCQlhbGVydChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndWlkJykgKyAiIOiOt+WPluWksei0pSxlcnJvcjogIiArIHJlc3BvbnNlLmRhdGEuZXJyb3JfY29kZSk7DQoJCQkJCQl9DQoJCQkJCX0gZWxzZSB7DQoJCQkJCQljb25zb2xlLmxvZygi6I635Y+W5aSx6LSlIiArIHJlc3BvbnNlLmRhdGEpOw0KCQkJCQkJYWxlcnQoIuiOt+WPluWksei0pe+8jOivt+ajgOafpee9kee7nCIpOw0KCQkJCQl9DQoJCQkJfSk7DQoJCX0sDQogIH0NCn07DQo="},{"version":3,"sources":["BorrowRecord.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BorrowRecord.vue","sourceRoot":"src/views/student_views","sourcesContent":["<template>\r\n  <div>\r\n    <head-bar></head-bar>\r\n    <el-container>\r\n      <el-aside width=\"20%\" style=\"min-height: 600px;\" >\r\n        <StudentMenu></StudentMenu>\r\n      </el-aside>\r\n      <el-main width=\"75%\">\r\n        <div class=\"title\" style=\"margin-top: 20px\">工具借用记录表</div>\r\n        <div style=\"margin: 0 auto; margin-top: 20px; align-items: center;\">\r\n          <el-card class=\"box-card\" style=\"width: 80%\">\r\n              <el-table :data=\"tableData\" style=\"width: 100%\" border>\r\n                <el-table-column align=\"center\" prop=\"toolName\" label=\"工具名称\" min-width=\"120\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"startTime\" label=\"借用开始时间\" min-width=\"100\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"returnTime\" label=\"最晚归还时间\" min-width=\"100\"> </el-table-column>\r\n                <el-table-column align=\"center\" label=\"状态\" min-width=\"120\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-button v-if=\"scope.row.status === 'A'\" size=\"mini\" type=\"warning\" >工具借用中</el-button>\r\n                    <el-button v-if=\"scope.row.status === 'W'\" size=\"mini\" type=\"primary\" >等待审核中</el-button>\r\n                    <el-button v-if=\"scope.row.status === 'R'\" size=\"mini\" type=\"danger\" >申请被拒绝</el-button>\r\n                    <el-button v-if=\"scope.row.status === 'F'\" size=\"mini\" type=\"success\" >工具已归还</el-button>\r\n                  </template>\r\n                </el-table-column>\r\n\t\t\t\t\r\n\t\t\t\t<el-table-column align=\"center\" label=\"借用信息\" min-width=\"120\">\r\n\t\t\t\t  <template slot-scope=\"scope\">\r\n\t\t\t\t\t  <el-popover\r\n\t\t\t\t\t    placement=\"bottom\"\r\n\t\t\t\t\t    width=\"250\"\r\n\t\t\t\t\t    trigger=\"hover\">\r\n\t\t\t\t\t\t<div>领取信息</div>\r\n\t\t\t\t\t\t<div >地址:  &nbsp &nbsp &nbsp &nbsp  {{ scope.row.address }} </div>\r\n\t\t\t\t\t\t<div >日期:  &nbsp &nbsp &nbsp &nbsp  {{ scope.row.getdate }}</div>\r\n\t\t\t\t\t\t<div >开始时间: &nbsp {{ scope.row.sttime }}</div>\r\n\t\t\t\t\t\t<div >结束时间: &nbsp {{ scope.row.endtime }}</div>\r\n\t\t\t\t    <el-button  size=\"mini\" v-show=\"scope.row.status === 'A'\" slot=\"reference\">领取信息</el-button>\r\n\t\t\t\t\t</el-popover>\r\n\t\t\t\t  </template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t\r\n\t\t\t\t\r\n                <el-table-column align=\"center\" label=\"操作\" min-width=\"120\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-button v-if=\"scope.row.status === 'A'\" size=\"mini\" type=\"primary\" plain  @click=\"handleCreate(scope.row)\">申请续借</el-button>\r\n                    <el-button v-if=\"scope.row.status === 'W'\" size=\"mini\" type=\"warning\" plain  @click=\"withdraw(scope.row)\">撤销申请</el-button>\r\n                    <el-button v-if=\"scope.row.status === 'R'\" size=\"mini\" type=\"info\" plain disabled @click=\"handleCreate()\"></el-button>\r\n                    <el-button v-if=\"scope.row.status === 'F'\" size=\"mini\" type=\"info\" plain disabled @click=\"handleCreate()\"></el-button>\r\n                    <el-dialog :visible.sync=\"dialogFormVisible\">\r\n                      <el-form\r\n                        :model=\"formData\"\r\n                        ref=\"dataForm\"\r\n                        label-position=\"left\"\r\n                        label-width=\"80px\"\r\n                        style=\"width: 300px; margin-left:50px;\">\r\n                        <el-form-item label=\"续借原因\" prop=\"purpose\">\r\n                          <el-input type=\"textarea\" :rows=\"2\" v-model=\"formData.purpose\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"续借日期\">\r\n                            <el-date-picker\r\n                              v-model=\"formData.postponeTime\"\r\n                              format=\"yyyy年MM月dd日\"\r\n                              value-format=\"yyyy-MM-dd\"\r\n                              align=\"left\"\r\n                              type=\"date\"\r\n                              placeholder=\"选择日期\"\r\n                              :picker-options=\"pickerOptions\">\r\n                            </el-date-picker>\r\n                        </el-form-item>\r\n                      </el-form>\r\n                      <div slot=\"footer\" class=\"dialog-footer\">\r\n                        <el-button @click=\"dialogFormVisible = false\">取消</el-button>\r\n                        <el-button type=\"primary\" @click=\"handleRenew()\">确定</el-button>\r\n                      </div>\r\n                    </el-dialog>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t<el-dialog :visible.sync=\"dialogRepealVisible\">\r\n\t\t\t\t\t  <el-form\r\n\t\t\t\t\t    :model=\"RepealData\"\r\n\t\t\t\t\t    ref=\"RepealForm\"\r\n\t\t\t\t\t    label-position=\"left\"\r\n\t\t\t\t\t    label-width=\"80px\"\r\n\t\t\t\t\t    style=\"width: 300px; margin-left:50px;\">\r\n\t\t\t\t\t    <el-form-item label=\"撤销原因\" prop=\"purpose\">\r\n\t\t\t\t\t      <el-input type=\"textarea\" :rows=\"2\" v-model=\"formData.purpose\"></el-input>\r\n\t\t\t\t\t    </el-form-item>\r\n\t\t\t\t\t  </el-form>\r\n\t\t\t\t\t  <div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t\t    <el-button @click=\"closeWindow\">取消</el-button>\r\n\t\t\t\t\t    <el-button type=\"primary\" @click=\"RepealRenew()\">确定</el-button>\r\n\t\t\t\t\t  </div>\r\n\t\t\t\t\t</el-dialog>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n          </el-card>\r\n        </div>\r\n      </el-main>\r\n      <el-aside width=\"5%\"></el-aside>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport HeadBar from \"@/components/HeadBar\";\r\nimport StudentMenu from \"@/components/StudentMenu\";\r\nimport { Loading } from \"element-ui\";\nexport default {\r\n  inject: ['reload'],\r\n  components:{HeadBar,StudentMenu},\r\n  mounted() {\r\n    this.loadMessage()\r\n  },\r\n  data() {\r\n    return {\r\n\t\tloading: true,\r\n      rowStore: null,\r\n      pickerOptions: {\r\n          disabledDate(time) {\r\n            return (time.getTime() < Date.now());\r\n          },\r\n          shortcuts: [{\r\n            text: '一周后',\r\n            onClick(picker) {\r\n              const date = new Date();\r\n              date.setTime(date.getTime() + 3600 * 1000 * 24 * 7);\r\n              picker.$emit('pick', date);\r\n            }\r\n          }, {\r\n            text: '一个月后',\r\n            onClick(picker) {\r\n              const date = new Date();\r\n              date.setTime(date.getTime() + 3600 * 1000 * 24 * 30);\r\n              picker.$emit('pick', date);\r\n            }\r\n          }]\r\n      },\r\n\t  dialogRepealVisible: false,\r\n      dialogFormVisible: false,\r\n      formData:{\r\n          purpose: \"\",\r\n          postponeTime: \"\",\r\n      },\r\n\t  RepealData:{\r\n\t\t  purpose:\"\",\r\n\t  },\r\n      tableData: [\r\n        {\r\n          toolName: \"\",\r\n          startTime:\"\",\r\n          returnTime: \"\",\r\n\r\n\t\t\taddress:\"\",\r\n\t\t\tsttime:\"\",  //借用当天开始领取的时间\r\n\t\t\tendtime:\"\",\r\n\t\t\tgetdate:\"\",\r\n\t\t\t\r\n          requestId: \"\",\r\n          status: \"\",\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    handleCreate(row) {\r\n\t\tthis.rowStore=row;\r\n      this.formData = {\r\n          purpose: \"\",\r\n          postponeTime: \"\",\r\n      },\r\n      this.dialogFormVisible = true;\r\n    },\r\n\twithdraw(row) {\r\n\t\tthis.rowStore = row\r\n\t\tthis.dialogRepealVisible=true;\r\n\t},\r\n    handleRenew() {\r\n      var row = this.rowStore;\r\n      console.log(\"续借时间\", this.formData.postponeTime);\r\n      axios({\r\n\t\t\t\t\turl: 'user/applyPostpone',\r\n\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\tdata: {\r\n            uid : localStorage.getItem('uid'),\r\n            requestId: row.requestId,\r\n            postponeTime : this.formData.postponeTime,\r\n            purpose: this.formData.purpose,\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((response) => {\r\n\t\t\t\t\tif (response) {\r\n\t\t\t\t\t\tif (response.data.error_code === 0) {\r\n\t\t\t\t\t\t\tconsole.log(\"已申请续借，请等待教师审批\", response.data);\r\n              alert(\"已申请续借,请等待教师审批,审批信息将通过邮件通知!\");\r\n              this.reload();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(\"error\" + response.data);\r\n\t\t\t\t\t\t\talert(\"error\" + response.data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"申请失败，请检查网络\");\r\n\t\t\t\t\t\talert(\"申请失败，请检查网络\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.closeWindow();\r\n    },\r\n    closeWindow() {\r\n      this.RepealData={\r\n\t\t\tpurpose:\"\",\r\n\t\t  },\r\n      dialogRepealVisible = false\r\n\r\n    },\r\n\t  RepealRenew() {\r\n      var row = this.rowStore;\r\n\t\taxios({\r\n\t\t\t\t\turl: 'user/repealRequest',\r\n\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\tuid : localStorage.getItem('uid'),\r\n\t\t\t\t\trequestId: row.requestId,\r\n\t\t\t\t\tpurpose: this.RepealData.purpose,\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((response) => {\r\n\t\t\t\t\tif (response) {\r\n\t\t\t\t\t\tif (response.data.error_code === 0) {\r\n\t\t\t\t\t\t\tconsole.log(\"撤销成功\", response.data);\r\n\t\t\t\t\t\t\talert(\"撤销成功\");\r\n\t\t\t\t\t\t\tthis.reload();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(\"error\" + response.data);\r\n\t\t\t\t\t\t\talert(\"error\" + response.data.error_code);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"申请失败，请检查网络\");\r\n\t\t\t\t\t\talert(\"申请失败，请检查网络\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n        this.closeWindow();\r\n\t},\r\n\tloadMessage() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tconsole.log(localStorage.getItem('uid'))\r\n\t\t\t\taxios({\r\n\t\t\t\t\turl: 'user/allBorrowList',\r\n\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tuid : localStorage.getItem('uid'), \r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((response) => {\r\n\t\t\t\t\tif (response) {\r\n\t\t\t\t\t\tconsole.log(response.data.token_message)\r\n\t\t\t\t\t\tif(response.data.token_message== \"token错误\"){\r\n\t\t\t\t\t\t\talert(\"访问函数失败，请重新登录尝试解决\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (response.data.error_code === 0) {\r\n\t\t\t\t\t\t\tconsole.log(\"获取成功\", response.data);\r\n\t\t\t\t\t\t\tthat.tableData = response.data.requestList;\r\n\t\t\t\t\t\t\tloading=false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(\"获取失败\" + response.data);\r\n\t\t\t\t\t\t\talert(localStorage.getItem('uid') + \" 获取失败,error: \" + response.data.error_code);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"获取失败\" + response.data);\r\n\t\t\t\t\t\talert(\"获取失败，请检查网络\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t},\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n  .header{\r\n    height: 50px;\r\n    display: flex;\r\n    color: aqua;\r\n  }\r\n  .box-card{\r\n    margin-left: 100px;\r\n  }\r\n  .title {\r\n    color: #06c;\r\n    margin-bottom: 20px;\r\n    font-family: 微软雅黑;\r\n    word-wrap: break-word;\r\n    /* text-align: left; */\r\n    font-size: 25px;\r\n    font-weight: bold;\r\n  }\r\n  .el-table{\r\n    width: 100%;\r\n  }\r\n</style>"]}]}