{"remainingRequest":"/Users/fancy/工训中心工具管理/Tool_manage_BUAA/前端文件/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fancy/工训中心工具管理/Tool_manage_BUAA/前端文件/src/views/teacher_views/MessageProcessing.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fancy/工训中心工具管理/Tool_manage_BUAA/前端文件/src/views/teacher_views/MessageProcessing.vue","mtime":1672908219257},{"path":"/Users/fancy/工训中心工具管理/Tool_manage_BUAA/前端文件/node_modules/cache-loader/dist/cjs.js","mtime":1672908217846},{"path":"/Users/fancy/工训中心工具管理/Tool_manage_BUAA/前端文件/node_modules/babel-loader/lib/index.js","mtime":1672908217685},{"path":"/Users/fancy/工训中心工具管理/Tool_manage_BUAA/前端文件/node_modules/cache-loader/dist/cjs.js","mtime":1672908217846},{"path":"/Users/fancy/工训中心工具管理/Tool_manage_BUAA/前端文件/node_modules/vue-loader/lib/index.js","mtime":1672908219119}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBUZWFjaGVySGVhZEJhciBmcm9tICJAL2NvbXBvbmVudHMvVGVhY2hlckhlYWRCYXIiOwppbXBvcnQgVGVhY2hlck1lbnUgZnJvbSAiQC9jb21wb25lbnRzL1RlYWNoZXJNZW51IjsKZXhwb3J0IGRlZmF1bHQgewogIGluamVjdDogWydyZWxvYWQnXSwKICBjb21wb25lbnRzOntUZWFjaGVySGVhZEJhcixUZWFjaGVyTWVudX0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMubG9hZE1lc3NhZ2UoKQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgZm9ybURhdGE6ewogICAgICAgICAgcmVmdXNlUmVhc29uOiIiLAogICAgICB9LAogICAgICByZW5ld0xpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICB0b29sTmFtZTogIiIsCiAgICAgICAgICByZXF1ZXN0VXNlck5hbWU6IiIsCiAgICAgICAgICBzdGFydFRpbWU6IiIsCiAgICAgICAgICBib3Jyb3dUaW1lOiAiIiwKICAgICAgICAgIHJldHVyblRpbWU6ICIiLAogICAgICAgICAgcG9zdFBvbmVUaW1lOiAiIiwKICAgICAgICAgIHN0dWlkOiIiLAogICAgICAgICAgc3R1Q29sbGVnZToiIiwKICAgICAgICAgIHVzZXJJZDoiIiwKICAgICAgICAgIHBob25lTnVtYmVyOiAiIiwKICAgICAgICAgIHN0dUVtYWlsOiAiIiwKICAgICAgICAgIHBvc3Rwb25lUHVycG9zZTogIiIsCiAgICAgICAgICByZXF1ZXN0SWQ6ICIiLAogICAgICAgIH0KICAgICAgXSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDcmVhdGUoKSB7CiAgICAgIHRoaXMuZm9ybURhdGEgPSB7CiAgICAgICAgcmVmdXNlUmVhc29uOiAiIiwKICAgICAgfSwKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgaGFuZGxlQWdyZWUocm93KSB7CiAgICAgIGF4aW9zKHsKCQkJCQl1cmw6ICdodHRwOi8vMTIxLjQuMTYwLjE1Ny9tYW5hZ2VyL2FwcHJvdmVQb3N0cG9uZVJlcXVlc3QnLAoJCQkJCW1ldGhvZDogJ3Bvc3QnLAoJCQkJCWRhdGE6IHsKICAgICAgICAgICAgcmVxdWVzdElkOiByb3cucmVxdWVzdElkLAogICAgICAgICAgICBzdGF0dXM6ICJBY2NlcHQiLAogICAgICAgICAgICByZWZ1c2VSZWFzb246IiIsCgkJCQkJfQoJCQkJfSkudGhlbigocmVzcG9uc2UpID0+IHsKCQkJCQlpZiAocmVzcG9uc2UpIHsKCQkJCQkJaWYgKHJlc3BvbnNlLmRhdGEuZXJyb3JfY29kZSA9PT0gMCkgewogICAgICAgICAgICAgIGFsZXJ0KCLlt7LlkIzmhI/lu7bmnJ/nlLPor7fvvIzor6Xorr7lpIfmnIDmmZrkuo4iICsgcm93LnBvc3RQb25lVGltZSArICLlvZLov5giKTsKICAgICAgICAgICAgICB0aGlzLnJlbG9hZCgpCgkJCQkJCX0gZWxzZSB7CgkJCQkJCQljb25zb2xlLmxvZygiZXJyb3IiICsgcmVzcG9uc2UuZGF0YS5lcnJvcl9jb2RlKTsKCQkJCQkJCWFsZXJ0KCJlcnJvciIgKyByZXNwb25zZS5kYXRhLmVycm9yX2NvZGUpOwoJCQkJCQl9CgkJCQkJfSBlbHNlIHsKCQkJCQkJY29uc29sZS5sb2coIuWuoeaJueWksei0pe+8jOivt+ajgOafpee9kee7nCIpOwoJCQkJCQlhbGVydCgi5a6h5om55aSx6LSl77yM6K+35qOA5p+l572R57ucIik7CgkJCQkJfQoJCQkJfSk7CiAgICB9LAogICAgaGFuZGxlUmVmdXNlKHJvdykgewogICAgICBheGlvcyh7CgkJCQkJdXJsOiAnaHR0cDovLzEyMS40LjE2MC4xNTcvbWFuYWdlci9hcHByb3ZlUG9zdHBvbmVSZXF1ZXN0JywKCQkJCQltZXRob2Q6ICdwb3N0JywKCQkJCQlkYXRhOiB7CiAgICAgICAgICAgIHJlcXVlc3RJZDogcm93LnJlcXVlc3RJZCwKICAgICAgICAgICAgc3RhdHVzOiAiUmVmdXNlIiwKICAgICAgICAgICAgcmVmdXNlUmVhc29uOiB0aGlzLmZvcm1EYXRhLnJlZnVzZVJlYXNvbiwKCQkJCQl9CgkJCQl9KS50aGVuKChyZXNwb25zZSkgPT4gewoJCQkJCWlmIChyZXNwb25zZSkgewoJCQkJCQlpZiAocmVzcG9uc2UuZGF0YS5lcnJvcl9jb2RlID09PSAwKSB7CgkJCQkJCQljb25zb2xlLmxvZygi5bey5ouS57ud6K+l55Sz6K+3IiwgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgYWxlcnQoIuW3suaLkue7neivpeeUs+ivtyIpOwogICAgICAgICAgICAgIHRoaXMucmVsb2FkKCkKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWNvbnNvbGUubG9nKCJlcnJvciIgKyByZXNwb25zZS5kYXRhLmVycm9yX2NvZGUpOwoJCQkJCQkJYWxlcnQoImVycm9yIiArIHJlc3BvbnNlLmRhdGEuZXJyb3JfY29kZSk7CgkJCQkJCX0KCQkJCQl9IGVsc2UgewoJCQkJCQljb25zb2xlLmxvZygi5a6h5om55aSx6LSl77yM6K+35qOA5p+l572R57ucIik7CgkJCQkJCWFsZXJ0KCLlrqHmibnlpLHotKXvvIzor7fmo4Dmn6XnvZHnu5wiKTsKCQkJCQl9CgkJCQl9KTsKICAgIH0sCiAgICBsb2FkTWVzc2FnZSgpIHsKCQkJCWxldCB0aGF0ID0gdGhpczsKCQkJCWF4aW9zKHsKCQkJCQl1cmw6ICdodHRwOi8vMTIxLjQuMTYwLjE1Ny9tYW5hZ2VyL2dldFBvc3Rwb25lUmVxdWVzdExpc3QnLAoJCQkJCW1ldGhvZDogJ3Bvc3QnLAoJCQkJCWRhdGE6IHsKCQkJCQl9CgkJCQl9KS50aGVuKChyZXNwb25zZSkgPT4gewoJCQkJCWlmIChyZXNwb25zZSkgewoJCQkJCQlpZiAocmVzcG9uc2UuZGF0YS5lcnJvcl9jb2RlID09PSAwKSB7CgkJCQkJCQljb25zb2xlLmxvZygi6I635Y+W5oiQ5YqfIiwgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgdGhhdC5yZW5ld0xpc3QgPSByZXNwb25zZS5kYXRhLmRhdGFfbGlzdDsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWNvbnNvbGUubG9nKCLojrflj5blpLHotKUiICsgcmVzcG9uc2UuZGF0YSk7CgkJCQkJCQlhbGVydCgi6I635Y+W5aSx6LSl77yM6K+35qOA5p+l572R57ucIik7CgkJCQkJCX0KCQkJCQl9IGVsc2UgewoJCQkJCQljb25zb2xlLmxvZygi6I635Y+W5aSx6LSlIiArIHJlc3BvbnNlLmRhdGEpOwoJCQkJCQlhbGVydCgi6I635Y+W5aSx6LSl77yM6K+35qOA5p+l572R57ucIik7CgkJCQkJfQoJCQkJfSk7CgkJfSwKICB9Cn07Cg=="},{"version":3,"sources":["MessageProcessing.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MessageProcessing.vue","sourceRoot":"src/views/teacher_views","sourcesContent":["<template>\n  <div>\n    <TeacherHeadBar></TeacherHeadBar>\n    <el-container>\n      <el-aside width=\"20%\" style=\"min-height: 600px;\" >\n        <TeacherMenu></TeacherMenu>\n      </el-aside>\n      <el-main width=\"75%\">\n        <div class=\"title\">待审批延期归还申请</div>\n        <div style=\"margin: 0 auto; margin-top: 20px; align-items: center;\">\n          <el-card class=\"box-card\" style=\"width: 100%\">\n            <el-table \n                :data=\"renewList\"\n                style=\"width: 100%\"\n                border>\n              <el-table-column align=\"center\" prop=\"toolName\" label=\"工具名称\" min-width=\"100\"></el-table-column>\n              <el-table-column align=\"center\" label=\"借用者信息\" min-width=\"100\">\n                <template slot-scope=\"scope\">\n                  <el-popover\n                    placement=\"bottom\"\n                    width=\"250\"\n                    trigger=\"click\">\n                    <div>{{ scope.row.requestUserName }} &nbsp &nbsp &nbsp {{ scope.row.stuid }}</div>\n                    <div >学院: &nbsp &nbsp &nbsp &nbsp {{ scope.row.stuCollege }}</div>\n                    <div >联系邮箱: &nbsp{{ scope.row.stuEmail }}</div>\n                    <div >联系电话: &nbsp{{ scope.row.phoneNumber }}</div>\n                    <el-button size=\"mini\" slot=\"reference\">{{ scope.row.requestUserName }}</el-button>\n                  </el-popover>\n                </template>\n              </el-table-column>\n              <el-table-column align=\"center\" prop=\"startTime\" label=\"借用开始时间\" min-width=\"100\"></el-table-column>\n              <el-table-column align=\"center\" prop=\"returnTime\" label=\"原定归还时间\" min-width=\"100\"> </el-table-column>\n              <el-table-column align=\"center\" prop=\"postPoneTime\" label=\"延期归还时间\" min-width=\"100\"> </el-table-column>\n              <el-table-column align=\"center\" label=\"操作\" min-width=\"200\">\n                <template slot-scope=\"scope\">\n                  <el-popover\n                    placement=\"left\"\n                    width=\"250\"\n                    trigger=\"click\">\n                    <div >延期目的: {{ scope.row.postponePurpose }}:</div>\n                    <el-button style=\"margin-right:10px;\" size=\"mini\" plain slot=\"reference\" type=\"primary\">查看</el-button>\n                  </el-popover>\n                  <el-button\n                    size=\"mini\"\n                    type=\"success\"\n                    plain\n                    @click=\"handleAgree(scope.row)\">同意</el-button>\n                  <el-button\n                    size=\"mini\"\n                    type=\"danger\"\n                    plain\n                    @click=\"handleCreate()\">拒绝</el-button>\n\n                    <el-dialog :visible.sync=\"dialogFormVisible\">\n                      <el-form\n                        :model=\"formData\"\n                        ref=\"dataForm\"\n                        label-position=\"left\"\n                        label-width=\"80px\"\n                        style=\"width: 300px; margin-left:50px;\">\n                        <el-form-item label=\"拒绝原因\">\n                          <el-input type=\"textarea\" :rows=\"2\" v-model=\"formData.refuseReason\" placeholder=\"请输入拒绝原因\"></el-input>\n                        </el-form-item>\n                      </el-form>\n                      <div slot=\"footer\" class=\"dialog-footer\">\n                        <el-button @click=\"dialogFormVisible = false\">取消</el-button>\n                        <el-button type=\"primary\" @click=\"handleRefuse(scope.row)\">确定</el-button>\n                      </div>\n                    </el-dialog>\n\n                </template>\n              </el-table-column>\n            </el-table>\n          </el-card>\n        </div>\n      </el-main>\n      <el-aside width=\"5%\">\n      </el-aside>\n    </el-container>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport TeacherHeadBar from \"@/components/TeacherHeadBar\";\nimport TeacherMenu from \"@/components/TeacherMenu\";\nexport default {\n  inject: ['reload'],\n  components:{TeacherHeadBar,TeacherMenu},\n  mounted() {\n    this.loadMessage()\n  },\n  data() {\n    return {\n      dialogFormVisible: false,\n      formData:{\n          refuseReason:\"\",\n      },\n      renewList: [\n        {\n          toolName: \"\",\n          requestUserName:\"\",\n          startTime:\"\",\n          borrowTime: \"\",\n          returnTime: \"\",\n          postPoneTime: \"\",\n          stuid:\"\",\n          stuCollege:\"\",\n          userId:\"\",\n          phoneNumber: \"\",\n          stuEmail: \"\",\n          postponePurpose: \"\",\n          requestId: \"\",\n        }\n      ],\n    };\n  },\n  methods: {\n    handleCreate() {\n      this.formData = {\n        refuseReason: \"\",\n      },\n      this.dialogFormVisible = true;\n    },\n    handleAgree(row) {\n      axios({\n\t\t\t\t\turl: 'http://121.4.160.157/manager/approvePostponeRequest',\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: {\n            requestId: row.requestId,\n            status: \"Accept\",\n            refuseReason:\"\",\n\t\t\t\t\t}\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tif (response) {\n\t\t\t\t\t\tif (response.data.error_code === 0) {\n              alert(\"已同意延期申请，该设备最晚于\" + row.postPoneTime + \"归还\");\n              this.reload()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log(\"error\" + response.data.error_code);\n\t\t\t\t\t\t\talert(\"error\" + response.data.error_code);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"审批失败，请检查网络\");\n\t\t\t\t\t\talert(\"审批失败，请检查网络\");\n\t\t\t\t\t}\n\t\t\t\t});\n    },\n    handleRefuse(row) {\n      axios({\n\t\t\t\t\turl: 'http://121.4.160.157/manager/approvePostponeRequest',\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: {\n            requestId: row.requestId,\n            status: \"Refuse\",\n            refuseReason: this.formData.refuseReason,\n\t\t\t\t\t}\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tif (response) {\n\t\t\t\t\t\tif (response.data.error_code === 0) {\n\t\t\t\t\t\t\tconsole.log(\"已拒绝该申请\", response.data);\n              alert(\"已拒绝该申请\");\n              this.reload()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log(\"error\" + response.data.error_code);\n\t\t\t\t\t\t\talert(\"error\" + response.data.error_code);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"审批失败，请检查网络\");\n\t\t\t\t\t\talert(\"审批失败，请检查网络\");\n\t\t\t\t\t}\n\t\t\t\t});\n    },\n    loadMessage() {\n\t\t\t\tlet that = this;\n\t\t\t\taxios({\n\t\t\t\t\turl: 'http://121.4.160.157/manager/getPostponeRequestList',\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: {\n\t\t\t\t\t}\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tif (response) {\n\t\t\t\t\t\tif (response.data.error_code === 0) {\n\t\t\t\t\t\t\tconsole.log(\"获取成功\", response.data);\n              that.renewList = response.data.data_list;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log(\"获取失败\" + response.data);\n\t\t\t\t\t\t\talert(\"获取失败，请检查网络\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"获取失败\" + response.data);\n\t\t\t\t\t\talert(\"获取失败，请检查网络\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n  }\n};\n</script>\n\n<style scoped>\n  .box-card{\n    /* margin-right: 10px; */\n  }\n  .title {\n    color: rgb(225, 162, 80);\n    margin-bottom: 40px;\n    font-family: 微软雅黑;\n    word-wrap: break-word;\n    font-size: 25px;\n    font-weight: bold;\n  }\n</style>\n"]}]}