(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85cd14f6"],{"8fb8":function(e,t,r){"use strict";r("e9ed")},a09a:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("TeacherHeadBar"),r("el-container",[r("el-aside",{staticStyle:{"min-height":"600px"},attrs:{width:"20%"}},[r("TeacherMenu")],1),r("el-main",{attrs:{width:"75%"}},[r("div",{staticClass:"title"},[e._v("待审批借用申请")]),r("div",{staticStyle:{margin:"0 auto","margin-top":"20px","align-items":"center"}},[r("el-card",{staticClass:"box-card",staticStyle:{width:"100%"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.borrowList,border:""}},[r("el-table-column",{attrs:{align:"center",prop:"toolName",label:"工具名称","min-width":"110"}}),r("el-table-column",{attrs:{align:"center",prop:"borrowCount",label:"借用数量","min-width":"110"}}),r("el-table-column",{attrs:{align:"center",label:"借用者信息","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"bottom",width:"250",trigger:"click"}},[r("div",[e._v(e._s(t.row.requestUserName)+"       "+e._s(t.row.stuid))]),r("div",[e._v("学院:         "+e._s(t.row.stuCollege))]),r("div",[e._v("联系邮箱:  "+e._s(t.row.stuEmail))]),r("div",[e._v("联系电话:  "+e._s(t.row.phoneNumber))]),r("el-button",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[e._v(e._s(t.row.requestUserName))])],1)]}}])}),r("el-table-column",{attrs:{align:"center",prop:"startTime",label:"借用开始时间","min-width":"100"}}),r("el-table-column",{attrs:{align:"center",prop:"returnTime",label:"原定归还时间","min-width":"100"}}),r("el-table-column",{attrs:{align:"center",label:"操作","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"left",width:"250",trigger:"click"}},[r("div",[e._v("借用目的: "+e._s(t.row.purpose)+":")]),r("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",size:"mini",plain:"",type:"primary"},slot:"reference"},[e._v("查看目的")])],1),r("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(t){return e.handleCreate2()}}},[e._v("同意借出")]),r("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){return e.handleCreate()}}},[e._v("拒绝借出")]),r("el-dialog",{attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"dataForm",staticStyle:{width:"300px","margin-left":"50px"},attrs:{model:e.formData,"label-position":"left","label-width":"80px"}},[r("el-form-item",{attrs:{label:"拒绝原因"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入拒绝原因"},model:{value:e.formData.refuseReason,callback:function(t){e.$set(e.formData,"refuseReason",t)},expression:"formData.refuseReason"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.handleRefuse(t.$index,t.row)}}},[e._v("拒绝")])],1)],1),r("el-dialog",{attrs:{visible:e.dialogFormVisible2},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[r("el-form",{ref:"dataForm",staticStyle:{width:"600px","margin-left":"50px"},attrs:{model:e.formAgree,"label-position":"left","label-width":"120px",align:"left"}},[r("el-form-item",{attrs:{label:"领取工具日期"}},[[r("el-date-picker",{attrs:{format:"yyyy年MM月dd日","value-format":"yyyy-MM-dd",align:"left",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.formAgree.getDate,callback:function(t){e.$set(e.formAgree,"getDate",t)},expression:"formAgree.getDate"}})]],2),r("el-form-item",{attrs:{label:"领取工具时间"}},[[r("el-time-select",{attrs:{placeholder:"起始时间","picker-options":{start:"08:30",step:"00:30",end:"18:30"}},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),r("el-time-select",{attrs:{placeholder:"结束时间","picker-options":{start:"08:30",step:"00:30",end:"22:30",minTime:e.startTime}},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})]],2),r("el-form-item",{attrs:{label:"领取工具地点"}},[r("el-input",{staticStyle:{width:"90%"},attrs:{type:"textarea",rows:1,placeholder:"请输入领取工具地点"},model:{value:e.formAgree.address,callback:function(t){e.$set(e.formAgree,"address",t)},expression:"formAgree.address"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible2=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.handleAgree(t.$index,t.row)}}},[e._v("借出")])],1)],1)]}}])})],1)],1)],1)]),r("el-aside",{attrs:{width:"5%"}})],1)],1)},o=[],s=r("bc3a"),i=r.n(s),l=r("f18d"),n=r("cb7d"),c={inject:["reload"],components:{TeacherHeadBar:l["a"],TeacherMenu:n["a"]},mounted:function(){this.loadMessage()},data:function(){return{startTime:"",endTime:"",dialogFormVisible:!1,dialogFormVisible2:!1,formData:{refuseReason:""},formAgree:{address:"",getDate:""},borrowList:[{toolName:"",requestUserName:"",startTime:"",borrowTime:"",returnTime:"",stuid:"",stuCollege:"",userId:"",phoneNumber:"",purpose:"",stuEmail:"",borrowCount:""}]}},methods:{handleCreate:function(){this.formData={refuseReason:""},this.dialogFormVisible=!0},handleCreate2:function(){this.formAgree={address:"工程训练中心南208"},this.dialogFormVisible2=!0},handleAgree:function(e,t){var r=this;console.log(e,t),i()({url:"http://121.4.160.157/manager/approveBorrowRequest",method:"post",data:{requestId:t.requestId,status:"Accept",isChangeTime:"false",changeTime:"",refuseReason:"",getDate:this.formAgree.getDate,startTime:this.startTime,endTime:this.endTime,address:this.formAgree.address}}).then((function(e){e?0===e.data.error_code?(console.log("已同意借用申请",e.data),alert("已同意该同学的借用申请，该设备最晚于"+t.returnTime+"归还"),r.reload()):5===e.data.error_code?alert("该设备数量不足，请拒绝该申请！"):(console.log("审批失败"+e.data),alert("error: "+e.data.error_code)):(console.log("error"+e.data),alert("error"+e.data.error_code))}))},handleRefuse:function(e,t){var r=this;console.log(this.formData.refuseReason),i()({url:"http://121.4.160.157/manager/approveBorrowRequest",method:"post",data:{requestId:t.requestId,status:"Refuse",isChangeTime:"false",changeTime:null,refuseReason:this.formData.refuseReason,getDate:"",startTime:"",endTime:"",address:""}}).then((function(e){e?(console.log("rejectpurpose: ",r.formData.refuseReason),0===e.data.error_code?(console.log("已拒绝该申请",e.data),alert("已拒绝该申请"),r.reload()):(console.log("审批失败"+e.data),alert("error: "+e.data.error_code))):(console.log("审批失败，请检查网络"+e.data),alert("审批失败，请检查网络"))}))},loadMessage:function(){var e=this;i()({url:"http://121.4.160.157/manager/getToolRequestList",method:"post",data:{}}).then((function(t){t&&0===t.data.error_code?(console.log("获取成功",t.data),e.borrowList=t.data.dataList):(console.log("获取失败"+t.data),alert("获取失败，请检查网络"))}))}}},d=c,u=(r("b1c3"),r("2877")),m=Object(u["a"])(d,a,o,!1,null,"4ef94fc2",null);t["default"]=m.exports},b1c3:function(e,t,r){"use strict";r("ec18")},cb7d:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex"}},[r("div",{staticStyle:{"min-width":"200px"}},[r("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"active-text-color":"#a6dcff",router:""}},[r("el-submenu",{attrs:{index:"1"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-s-promotion"}),e._v("审批管理")]),this.isSuperUser?r("el-menu-item",{attrs:{index:"/borrowProcessing"}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("借用审批")])]):e._e(),this.isSuperUser?r("el-menu-item",{attrs:{index:"/messageProcessing"}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("延期审批")])]):e._e(),this.isSuperUser?r("el-menu-item",{attrs:{index:"/toolRecord"}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("归还审批")])]):e._e()],2),r("el-submenu",{attrs:{index:"2"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-s-order"}),e._v("用户管理")]),this.isSuperUser?r("el-menu-item",{attrs:{index:"/addTeacher"}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("添加教师")])]):e._e(),this.isSuperUser?r("el-menu-item",{attrs:{index:"/UserRecord"}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("学生列表")])]):e._e(),this.isSuperUser?r("el-menu-item",{attrs:{index:"/TeacherRecord"}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("教师列表")])]):e._e()],2),r("el-submenu",{attrs:{index:"3"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-setting"}),e._v("工具管理")]),this.isSuperUser?r("el-menu-item",{attrs:{index:"/AllToolRecord"}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("工具列表")])]):e._e(),r("el-menu-item",{attrs:{index:"/addtool"}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("新增工具")])]),r("el-menu-item",{attrs:{index:"/settools"}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("编辑工具")])])],2)],1)],1),r("div",[r("router-view")],1)])},o=[],s={name:"teachermenu",mounted:function(){this.loadIsSuperUser()},data:function(){return{isSuperUser:!0}},methods:{loadIsSuperUser:function(){"false"==localStorage.getItem("isSuperUser")&&(this.isSuperUser=!1)}}},i=s,l=r("2877"),n=Object(l["a"])(i,a,o,!1,null,null,null);t["a"]=n.exports},e9ed:function(e,t,r){},ec18:function(e,t,r){},f18d:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"x-head"},[r("img",{staticStyle:{cursor:"pointer",height:"60px","margin-left":"10px","margin-top":"0.5%"},attrs:{src:"headerLogo.png"}}),r("div",{staticStyle:{margin:"0 auto"}}),r("div",{staticStyle:{"line-height":"6vh",margin:"0 4vh 0 0"}},[r("el-dropdown",[r("div",{staticClass:"header-right"},[r("span",{staticStyle:{color:"white"}},[e._v(e._s(this.mail))])]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{icon:"el-icon-edit"}},[r("span",{staticStyle:{cursor:"pointer"},on:{click:e.changePwd}},[e._v("修改密码")])]),r("el-dropdown-item",{attrs:{icon:"el-icon-edit"}},[r("span",{staticStyle:{cursor:"pointer"},on:{click:e.changeInfo}},[e._v("个人信息")])]),r("el-dropdown-item",{attrs:{icon:"el-icon-s-fold"}},[r("span",{staticStyle:{cursor:"pointer"},on:{click:e.logout}},[e._v("退出登录")])])],1)],1)],1),e._m(0)])},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("br")])}],s={name:"teacherheadbar",data:function(){return{mail:localStorage.getItem("Mail")}},methods:{goToLogin:function(){this.$router.push("/teacherLogin"),localStorage.setItem("Mail",null)},logout:function(){this.$router.push("/teacherLogin"),localStorage.setItem("Mail",null)},changeInfo:function(){console.log("Info"),this.$router.push("/teacherChangeInfo")},changePwd:function(){console.log("Pwd"),this.$router.push("/teacherChangePwd")},toMain:function(){this.$router.push("/toolManagement")}}},i=s,l=(r("8fb8"),r("2877")),n=Object(l["a"])(i,a,o,!1,null,"9894a1be",null);t["a"]=n.exports}}]);
//# sourceMappingURL=chunk-85cd14f6.d6764660.js.map